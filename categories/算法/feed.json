{
    "version": "https://jsonfeed.org/version/1",
    "title": "艾瑞可erik • All posts by \"算法\" categories",
    "description": "一只PHP开发的程序猿，偶尔做做运维、Goland、Python、Java、摄影、画画、写作、顺便睡觉，反正整站都搞过。",
    "home_page_url": "https://erik.xyz",
    "items": [
        {
            "id": "https://erik.xyz/2023/07/01/new-year-read-moeny/",
            "url": "https://erik.xyz/2023/07/01/new-year-read-moeny/",
            "title": "红包算法",
            "date_published": "2023-07-01T14:27:00.000Z",
            "content_html": "<p>红包算法<br>给定具体人数和金额，所有人都有，所有人的金额都是随机。那么，在分配中就要限定最大额度不能超过平局值，最小额度1分，算法如下：</p>\n<span id=\"more\"></span>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function moneyBag($number, $money,  $min = 1)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    $max = intval($money / $number);</span><br><span class=\"line\">    for ($i = 0; $i &lt; $number; $i++) &#123;</span><br><span class=\"line\">        if ($number - 1 == $i) &#123;</span><br><span class=\"line\">            $end_arr = $money;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">            $one_money =mt_rand($min, $max);</span><br><span class=\"line\">            $end_arr = $one_money;</span><br><span class=\"line\">            $money -= $end_arr;</span><br><span class=\"line\">            $max = intval($money / ($number-($i+1)));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        yield $end_arr;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">$last_arr = moneyBag(1000, 10 * 100);</span><br><span class=\"line\">$arr = [];</span><br><span class=\"line\">foreach ($last_arr as $end) &#123;</span><br><span class=\"line\">    var_dump(bcdiv($end, 100, 2));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>最终结果如下：<br><img src=\"/img/202306/20230701223119.png\" alt=\"https://erik.xyz\"></p>\n",
            "tags": [
                "算法",
                "红包算法"
            ]
        },
        {
            "id": "https://erik.xyz/2023/06/06/matching-amount-algorithm/",
            "url": "https://erik.xyz/2023/06/06/matching-amount-algorithm/",
            "title": "php撮合算法",
            "date_published": "2023-06-06T12:37:00.000Z",
            "content_html": "<p>在同一平台中买卖交易，需要进行订单撮合。相近的金额从大到小递减组合。期初想用mq分别匹配整数的金额倍数处理，总觉的不太完美。最近刚好有空就找到了猴子选大王算法：<br><span id=\"more\"></span><br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function King($monkeys_arr,$m)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    $i = 0;</span><br><span class=\"line\">    $finsh=[];</span><br><span class=\"line\">    while(count($monkeys_arr)&gt;1)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        $i++;</span><br><span class=\"line\">        if($i&gt;count($monkeys_arr)) break;</span><br><span class=\"line\">        $head = array_shift($monkeys_arr);</span><br><span class=\"line\">        if ($head%$m != 0) &#123;</span><br><span class=\"line\">            array_push($monkeys_arr, $head);</span><br><span class=\"line\">            continue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        $finsh[]=$head;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    return $finsh;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">$a=king([1,2,6,3,4,8,7],7);</span><br><span class=\"line\">var_dump($a);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure><br>根据以上算法改造一下。<br>先确定匹配金额顺序，即做降序排列。<br>然后每次匹配到小于指定金额后，减去此金额。把匹配金额赋值为差结果。<br>依次类推。<br>在这过程中记录匹配到的金额、最后差值的余额。<br>撮合代码如下：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function marriedDeal($arr, $change_number)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    $i = 0;</span><br><span class=\"line\">    $finsh = []; //匹配到的金额</span><br><span class=\"line\">    $default_total = count($arr);</span><br><span class=\"line\">    if($default_total==0) return [];</span><br><span class=\"line\">    arsort($arr);</span><br><span class=\"line\">    $blance = 0;  //最后余额</span><br><span class=\"line\">    while ($default_total &gt;= 1) &#123;</span><br><span class=\"line\">        $i += 1;</span><br><span class=\"line\">        if ($i &gt; $default_total || $change_number &lt;= 0) break;</span><br><span class=\"line\">        $head = array_shift($arr);</span><br><span class=\"line\">        if ($head &gt; $change_number) &#123;</span><br><span class=\"line\">            array_push($arr, $head);</span><br><span class=\"line\">            continue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        $finsh[] = $head;</span><br><span class=\"line\">        $change_number -= $head;</span><br><span class=\"line\">        $blance = $change_number;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return [$finsh, $blance, $arr];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  $get_number = marriedDeal([120, 200,100,300,11,221],20);</span><br><span class=\"line\">print_r($get_number);</span><br></pre></td></tr></table></figure>\n<p>最近闲来无事，做了测试。如下图做测试数据<br><img src=\"/img/202306/20230701220606.png\" alt=\"https://erik.xyz\"><br>测试后生成结果<br><img src=\"/img/202306/20230701221810.png\" alt=\"https://erik.xyz\"><br>发现这样撮合数据多的时候会耗时太久,就尝试找优化方法。<br>如果使用生成器呢，生成结果如下<br><img src=\"/img/202306/20230701220832.png\" alt=\"https://erik.xyz\"></p>\n<p>完整优化代码：<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">function marriedDeal($arr, $change_number)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    $default_total = count($arr);</span><br><span class=\"line\">    if ($default_total &lt;= 0 || $change_number&lt;=0) return [];</span><br><span class=\"line\">    $blance = $i = 0;</span><br><span class=\"line\">    arsort($arr);</span><br><span class=\"line\">    while ($default_total &gt;= 1) &#123;</span><br><span class=\"line\">        $i += 1;</span><br><span class=\"line\">        if ($i &gt; $default_total || $change_number &lt;= 0) break;</span><br><span class=\"line\">        $head = array_shift($arr);</span><br><span class=\"line\">        if ($head &gt; $change_number) &#123;</span><br><span class=\"line\">            array_push($arr, $head);</span><br><span class=\"line\">            continue;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        $change_number -= $head;</span><br><span class=\"line\">        $blance = $change_number;</span><br><span class=\"line\">        yield [&#x27;finsh&#x27;=&gt;$head,&quot;blance&quot;=&gt;$blance,&#x27;last_arr&#x27;=&gt;[]];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    //yield [&#x27;last_arr&#x27;=&gt;$arr];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">$t1 = microtime(true);</span><br><span class=\"line\">$list = [120, 200, 4353, 43543, 435, 546, 56, 435, 3443, 5435,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    180, 11, 223, 2342, 345, 435, 456, 4564, 55, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    232, 3243, 23424, 6576, 7897, 2342, 21342, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 456, 345, 435, 345, 456, 57, 4345, 345435, 435,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    220, 400, 20, 320, 43435, 4564, 45645, 456, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    180, 11, 223, 2342, 345, 435, 456, 4564, 55, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    232, 3243, 23424, 6576, 7897, 2342, 21342, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    456, 345, 435, 345, 456, 57, 4345, 345435, 435, 180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    56546, 566, 456452324, 34543, 435, 435, 435, 45180, 11, 223, 2342, 345, 435, 456, 4564, 55,</span><br><span class=\"line\">    2344, 3242, 342, 4, 34543, 435, 24, 456, 6, 456, 745</span><br><span class=\"line\">];</span><br><span class=\"line\">foreach($get_number as $k)&#123;</span><br><span class=\"line\">    var_dump($k);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">$t2 = microtime(true);</span><br><span class=\"line\">echo &#x27;耗时&#x27; . round($t2 - $t1, 4) . &#x27;秒&#x27;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n",
            "tags": [
                "撮合算法",
                "撮合",
                "php撮合算法"
            ]
        },
        {
            "id": "https://erik.xyz/2019/07/22/ren-yi-jin-e-fen-pei-de-saun-fa/",
            "url": "https://erik.xyz/2019/07/22/ren-yi-jin-e-fen-pei-de-saun-fa/",
            "title": "关于任意金额分配10元、5元、2元的算法",
            "date_published": "2019-07-22T12:14:00.000Z",
            "content_html": "<p>今天去一家做电商的公司面试，笔试题有个算法，如下：</p>\n<p>输入任意金额，计算分配出10元、5元、2元是否可以分配，如果可以分别分配几张。</p>\n<p>根据需求可知优先分配最高金额，根据最高金额计算出分配值，然后取整数。<span id=\"more\"></span>再用输入金额减去最高金额计算出的整数乘以最高金额，得出余额。一开始我想的是分别计算，嵌套多层if else后来发现不是很友好，还越来越乱。再加上是在a4纸上手写代码，很烦躁。</p>\n<p>晚上回家花了半个小时思索，写了这样的。</p>\n<pre><code>function findMoney($money = 0)\n&#123;\n    $no_text = &quot;不能找回金额为&quot; . $money . &quot;的零钱。&quot;;\n    $text = &quot;可以找回金额为&quot; . $money . &quot;的零钱,其中&quot;;\n    if ($money &lt;= 0) &#123;\n        echo $no_text;\n    &#125;\n    $rand = [10, 5, 2];\n    for ($i = 0; $i &lt; count($rand); $i++) &#123;\n        if ($rand[$i] &gt; 0) &#123;\n            $number = floor($money / $rand[$i]);\n            $money = $money - $number * $rand[$i];\n            $text .= &quot;面额&quot; . $rand[$i] . &quot;元的&quot; . $number . &quot;张&quot; . &quot;,&quot;;\n            if ($money == 1) &#123;\n                echo $no_text . PHP_EOL;\n                exit;\n            &#125;\n        &#125;\n    &#125;\n    echo $text . PHP_EOL;\n&#125;\nfindMoney(16);\n</code></pre><p><img src=\"/img/201907/2019-07-23_00-06.png\" alt=\"\"></p>\n<p>今天周二，昨晚弄得比较晚，急着睡。下午又想了想感觉不对。<br>输入6或者8的时候并不能分配。<br>对昨天的代码优化一番。</p>\n<p>如下</p>\n<pre><code>function findMoney($money = 0)\n&#123;\n    $no_text = &quot;不能找回金额为&quot; . $money . &quot;的零钱。&quot;;\n    $text = &quot;可以找回金额为&quot; . $money . &quot;的零钱,其中&quot;;\n    if ($money &lt;= 0) &#123;\n        echo $no_text;\n    &#125;\n    $rand = [10, 5, 2];\n    for ($i = 0; $i &lt; count($rand); $i++) &#123;\n        if ($rand[$i] &gt; 0) &#123;\n            $number = floor($money / $rand[$i]);\n            $money = $money - $number * $rand[$i];\n            $text .= &quot;面额&quot; . $rand[$i] . &quot;元的&quot; . $number . &quot;张&quot; . &quot;,&quot;;\n            if ($money == 1) &#123;\n                echo $no_text . PHP_EOL;\n                exit;\n            &#125;\n        &#125;\n    &#125;\n    echo $text . PHP_EOL;\n&#125;\nfindMoney(16);\n</code></pre><p>后续改进</p>\n<p>如下</p>\n<pre><code>function findMoney($money = 0)\n&#123;\n    //print_r($money);exit;\n    $no_text = &quot;不能找回金额为&quot; . $money . &quot;的零钱。&quot;;\n    $text = &quot;可以找回金额为&quot; . $money . &quot;的零钱,其中&quot;;\n    if ($money &lt;= 0) &#123;\n        echo $no_text;\n    &#125;\n    $rand = [10, 5, 2];\n    $number = 0;\n    for ($i = 0; $i &lt; count($rand); $i++) &#123;\n        if (isset($rand[$i])) &#123;\n            //不能整除的情况\n            if (is_float($money / $rand[$i])) &#123;\n                $number = $money / $rand[$i];\n                if ($money &gt; 0 &amp;&amp; $rand[$i] == 5 &amp;&amp; ceil($number) != $number) &#123;\n                    $text .= &quot;面额&quot; . $rand[$i] . &quot;元的0张&quot; . &quot;,&quot;;\n                    $text .= getChildMoney($money);\n                &#125;else&#123;\n                    $number = is_float($number) == 1 ? floor($number) : $number;\n                    $money = $money - $number * $rand[$i];\n                    $text .= &quot;面额&quot; . $rand[$i] . &quot;元的&quot; . $number . &quot;张&quot; . &quot;,&quot;;\n                &#125;\n            &#125; else &#123;\n                $number = $money / $rand[$i];\n                $money = $money - $number * $rand[$i];\n                $text .= &quot;面额&quot; . $rand[$i] . &quot;元的&quot; . $number . &quot;张&quot; . &quot;,&quot;;\n                if ($money == 0) &#123;\n                    continue;\n                &#125;\n            &#125;\n        &#125;\n    &#125;\n    if ($money &gt; 0) &#123;\n        echo $no_text . PHP_EOL;\n    &#125; else &#123;\n        echo $text . PHP_EOL;\n    &#125;\n&#125;\n\nfunction getChildMoney($money = 0)\n&#123;\n    $number = $money / 2;\n    if (is_float($number)) &#123;\n        return false;\n    &#125;\n    $text = &quot;面额&quot; . $money . &quot;元的&quot; . $number . &quot;张&quot; . &quot;,&quot;;\n    return $text;\n&#125;\n\nfindMoney(34);\n</code></pre><p>这样就是任意金额<br><img src=\"/img/201907/2019-07-23_20-09.png\" alt=\"\"></p>\n",
            "tags": [
                "算法",
                "任意金额输入",
                "10元、5元、2元"
            ]
        },
        {
            "id": "https://erik.xyz/2019/03/20/php-hong-bao-suan-fa/",
            "url": "https://erik.xyz/2019/03/20/php-hong-bao-suan-fa/",
            "title": "php红包算法",
            "date_published": "2019-03-20T04:28:00.000Z",
            "content_html": "<p>今天去参见一个面试，结尾时，面试官问了个红包如何随机分配实现问题。这个确实没搞过，也想不出来。回头自己研究了一下，发现也就这么回事。。<span id=\"more\"></span></p>\n<p>参考文章 <a href=\"https://www.cnblogs.com/dreign/p/4610766.html\">https://www.cnblogs.com/dreign/p/4610766.html</a><br>得到一个正态分布的方法，反复比较其他几种，最后选择了这个。<br>分析一下需求如下：</p>\n<blockquote>\n</blockquote>\n<p> 一个用户发100元红包，分成100份。那么每份金额随机。而分成100份的金额之和刚好等于100元。那首先每个用户至少分到0.01元红包，那每个用户分得最大红包是总金额减去分出去用户的金额，剩余用户的平均金额。<br> 由此，便清晰了。那每取一个随机金额肯定在最小金额和最大金额之间。</p>\n<p>上代码试试。</p>\n<blockquote>\n</blockquote>\n<p>假如有100元要分给100个人，100个红包随机生成。代码如下：</p>\n<p><img src=\"https://erik.xyz/wp-content/uploads/2019/2019-04-23_160135.jpg\" alt=\"\"></p>\n<blockquote>\n<p>输出结果</p>\n</blockquote>\n<p><img src=\"https://erik.xyz/wp-content/uploads/2019/2019-04-23_162419.jpg\" alt=\"\"></p>\n",
            "tags": [
                "算法",
                "php随机数"
            ]
        }
    ]
}