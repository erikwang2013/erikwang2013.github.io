<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>艾瑞可erik • Posts by &#34;elasticsearch&#34; tag • Posts by &#34;undefined&#34; categories</title>
        <link>https://erik.xyz</link>
        <description>一只PHP开发的程序猿，偶尔做做运维、Goland、Python、Java、摄影、画画、写作、顺便睡觉，反正整站都搞过。</description>
        <language>zh-CN</language>
        <pubDate>Thu, 18 Jun 2020 22:35:50 +0800</pubDate>
        <lastBuildDate>Thu, 18 Jun 2020 22:35:50 +0800</lastBuildDate>
        <category>日志</category>
        <category>工具</category>
        <category>php扩展</category>
        <category>php技巧</category>
        <category>php类库</category>
        <category>php资源</category>
        <category>jquery</category>
        <category>jquery插件</category>
        <category>js</category>
        <category>css</category>
        <category>php</category>
        <category>web</category>
        <category>代码</category>
        <category>压缩</category>
        <category>说说</category>
        <category>趣闻</category>
        <category>php服务器</category>
        <category>随笔</category>
        <category>php实例</category>
        <category>nginx</category>
        <category>转载</category>
        <category>php库</category>
        <category>互联</category>
        <category>项目实战</category>
        <category>javascript</category>
        <category>漏洞</category>
        <category>php应用</category>
        <category>浮点</category>
        <category>http</category>
        <category>http服务器</category>
        <category>负载均衡</category>
        <category>kali</category>
        <category>kali安装</category>
        <category>农业系统</category>
        <category>系统设计</category>
        <category>克莱姆法则</category>
        <category>行列式</category>
        <category>n阶行列式</category>
        <category>支付系统</category>
        <category>支付</category>
        <category>centos</category>
        <category>linux</category>
        <category>apache优化</category>
        <category>apache隐藏index</category>
        <category>nginx优化</category>
        <category>nginx隐藏index</category>
        <category>日常</category>
        <category>seo</category>
        <category>优化</category>
        <category>摘要</category>
        <category>文章</category>
        <category>游记</category>
        <category>ca证书</category>
        <category>证书生成</category>
        <category>二战</category>
        <category>二战熊</category>
        <category>西伯利亚熊</category>
        <category>centos软件</category>
        <category>yum仓库</category>
        <category>软件</category>
        <category>centos安装chromium报错</category>
        <category>chromium安装报错</category>
        <category>svn</category>
        <category>代码提交</category>
        <category>deb</category>
        <category>deb/rpm互转</category>
        <category>deb转rpm</category>
        <category>rpm互转</category>
        <category>centos7安装steam</category>
        <category>centos安装steam</category>
        <category>centos安装吃鸡steam</category>
        <category>linux安装steam</category>
        <category>steam安装</category>
        <category>centos软件安装</category>
        <category>centos6.5</category>
        <category>linux系统</category>
        <category>centos7安装Redis Desktop Manager</category>
        <category>centos7安装redis桌面</category>
        <category>centos安装redis桌面</category>
        <category>linux安装centos7安装Redis Desktop Manager</category>
        <category>Redis Desktop Manager</category>
        <category>redis桌面</category>
        <category>centos7</category>
        <category>centos7-wine</category>
        <category>wine</category>
        <category>wine安装</category>
        <category>root密码</category>
        <category>root密码重置</category>
        <category>忘记root密码</category>
        <category>memcache</category>
        <category>memcached</category>
        <category>生活手记</category>
        <category>艾瑞可erik</category>
        <category>程序员</category>
        <category>开源云</category>
        <category>容器</category>
        <category>cncf</category>
        <category>监控</category>
        <category>composer</category>
        <category>composer部署</category>
        <category>内网部署composer</category>
        <category>cphalcon</category>
        <category>cphalcon报错</category>
        <category>css中的em</category>
        <category>响应式字体</category>
        <category>响应式布局样式</category>
        <category>proxy代理搭建</category>
        <category>代理服务器搭建</category>
        <category>proxy服务器</category>
        <category>查找</category>
        <category>排序</category>
        <category>快速排序</category>
        <category>冒泡排序</category>
        <category>二分查找</category>
        <category>datahub</category>
        <category>datahub安装</category>
        <category>deepin</category>
        <category>emergency</category>
        <category>emergency mode</category>
        <category>deepin黑屏</category>
        <category>清理系统</category>
        <category>清理c盘</category>
        <category>dns</category>
        <category>域名监测</category>
        <category>网站监测</category>
        <category>docker</category>
        <category>php安装</category>
        <category>杂谈</category>
        <category>ecshop</category>
        <category>框架</category>
        <category>beego数据分页</category>
        <category>分页</category>
        <category>elasticsearch</category>
        <category>elasticsearch搭建</category>
        <category>elasticsearch集群</category>
        <category>系统</category>
        <category>emm</category>
        <category>mdm</category>
        <category>phone</category>
        <category>手机</category>
        <category>新闻</category>
        <category>免费</category>
        <category>jenkis</category>
        <category>jenkis教程</category>
        <category>随笔吐槽</category>
        <category>算法</category>
        <category>ping</category>
        <category>ping服务器</category>
        <category>各大网站ping</category>
        <category>搜引擎ping服务器</category>
        <category>go获取ip</category>
        <category>im</category>
        <category>go中pdf生成</category>
        <category>go中限流</category>
        <category>go对接快递签名</category>
        <category>go时间获取</category>
        <category>go类型转换</category>
        <category>微服务</category>
        <category>go-zero</category>
        <category>rpc</category>
        <category>go加密</category>
        <category>go解密</category>
        <category>归</category>
        <category>吐槽</category>
        <category>php大全</category>
        <category>php资料</category>
        <category>hadoop</category>
        <category>hadoop2.8.0</category>
        <category>hadoop安装教程</category>
        <category>hadoop安装详细教程</category>
        <category>hadoop教程</category>
        <category>hadoop部署</category>
        <category>hadoop3</category>
        <category>hadoop配置</category>
        <category>log4j2</category>
        <category>数据库</category>
        <category>hbase安装教程</category>
        <category>hbase</category>
        <category>http1.1</category>
        <category>http2.0</category>
        <category>会话</category>
        <category>会话原理</category>
        <category>hyperf</category>
        <category>杂录</category>
        <category>新冠肺炎</category>
        <category>springboot</category>
        <category>springboot内网部署</category>
        <category>linux恢复</category>
        <category>linux误删</category>
        <category>linux命令</category>
        <category>linux命令汇总</category>
        <category>jenkins</category>
        <category>jetbtrains</category>
        <category>phpstorm</category>
        <category>搜索引擎</category>
        <category>图片</category>
        <category>素材</category>
        <category>jq</category>
        <category>jq侧边导航</category>
        <category>侧边导航</category>
        <category>js判断浏览器</category>
        <category>js判断浏览器版本</category>
        <category>判断浏览器</category>
        <category>浏览器版本判断</category>
        <category>获取浏览器信息</category>
        <category>kali右键汉化</category>
        <category>kali桌面右键汉化</category>
        <category>kali右键创建文件</category>
        <category>区块链</category>
        <category>lanmp</category>
        <category>php环境独立配置</category>
        <category>服务器</category>
        <category>劳动纠纷</category>
        <category>追缴工资</category>
        <category>申请仲裁</category>
        <category>flash</category>
        <category>表单</category>
        <category>linux报错</category>
        <category>linux中update-command-not-found</category>
        <category>linux运行命令报错</category>
        <category>web前端</category>
        <category>web优化</category>
        <category>撮合算法</category>
        <category>撮合</category>
        <category>php撮合算法</category>
        <category>maven搭建库</category>
        <category>maven</category>
        <category>maven内网库</category>
        <category>高级缓存配置</category>
        <category>mongodb</category>
        <category>mongodb权限</category>
        <category>可穿戴设备</category>
        <category>mysql</category>
        <category>分库分表</category>
        <category>mysql应对千万级</category>
        <category>mysql瓶颈</category>
        <category>mysql瓶颈解决办法</category>
        <category>redis</category>
        <category>数据一致性</category>
        <category>mysql消息</category>
        <category>mysql队列</category>
        <category>mysql高并发</category>
        <category>mysql存储</category>
        <category>mysql引擎</category>
        <category>mysql数据表设计选择</category>
        <category>mysql监控</category>
        <category>mysql性能</category>
        <category>内网支付</category>
        <category>内网穿透</category>
        <category>支付接口本地化开发</category>
        <category>本地挂网</category>
        <category>穿透</category>
        <category>go</category>
        <category>new和make的区别</category>
        <category>红包算法</category>
        <category>深圳劳动法服务部门</category>
        <category>非关系型数据库</category>
        <category>onethink</category>
        <category>oop</category>
        <category>php管理系统</category>
        <category>开放接口开发</category>
        <category>开源工具</category>
        <category>桌面共享工具</category>
        <category>openresty</category>
        <category>openvas</category>
        <category>openvas安装</category>
        <category>php变量</category>
        <category>php超级全局变量</category>
        <category>php超级变量</category>
        <category>php基本类型</category>
        <category>php数据类型</category>
        <category>php设计模式</category>
        <category>php对接微信支付</category>
        <category>微信支付</category>
        <category>微信支付回调</category>
        <category>游戏</category>
        <category>php函数</category>
        <category>php随机数</category>
        <category>php获取闰年</category>
        <category>闰年.php时间</category>
        <category>php环境</category>
        <category>php集成环境</category>
        <category>服务器集成环境</category>
        <category>数组函数</category>
        <category>数组排序函数</category>
        <category>php数学函数</category>
        <category>php面试题</category>
        <category>php面向对象</category>
        <category>面向对象</category>
        <category>php-zookeeper</category>
        <category>zookeeper3.5.5</category>
        <category>php-zookeeper扩展</category>
        <category>php串口开发</category>
        <category>php倒计时</category>
        <category>php时间</category>
        <category>倒计时</category>
        <category>计算时间</category>
        <category>PHP数组</category>
        <category>字符串函数</category>
        <category>排序函数</category>
        <category>php的SPL</category>
        <category>SPL手册</category>
        <category>PHP算法</category>
        <category>php递归</category>
        <category>递归</category>
        <category>phpunit</category>
        <category>phpunit安装</category>
        <category>php过滤</category>
        <category>过滤</category>
        <category>foreach</category>
        <category>foreach报错</category>
        <category>php中foreach报错</category>
        <category>php中if</category>
        <category>php中if判断</category>
        <category>php的if</category>
        <category>php字符串</category>
        <category>php7中sphinx</category>
        <category>php7中sphinx扩展</category>
        <category>sphinx扩展</category>
        <category>python</category>
        <category>python库</category>
        <category>a标签</category>
        <category>a标签虚线</category>
        <category>虚线框</category>
        <category>R语言</category>
        <category>数据随机化</category>
        <category>redis总结</category>
        <category>redis命令</category>
        <category>redis监控</category>
        <category>redis锁</category>
        <category>redis分布式锁</category>
        <category>任意金额输入</category>
        <category>10元、5元、2元</category>
        <category>队列</category>
        <category>栈</category>
        <category>顺序表</category>
        <category>链表</category>
        <category>数据结构</category>
        <category>线性结构</category>
        <category>浏览器禁止操作视频</category>
        <category>禁止视频</category>
        <category>响应慢</category>
        <category>页面优化</category>
        <category>js编辑</category>
        <category>runjs</category>
        <category>在线编辑</category>
        <category>rust</category>
        <category>rust配置</category>
        <category>seajs</category>
        <category>session</category>
        <category>路由器烧录</category>
        <category>烧录</category>
        <category>极路由2烧录</category>
        <category>砖头烧录</category>
        <category>免费服务器</category>
        <category>空间</category>
        <category>资源</category>
        <category>深圳政府电话</category>
        <category>深圳电话</category>
        <category>特区电话</category>
        <category>居住证</category>
        <category>居住证签注</category>
        <category>深圳新居住证</category>
        <category>国庆骑行</category>
        <category>深圳珠海骑行</category>
        <category>骑行</category>
        <category>世界那么大</category>
        <category>css3</category>
        <category>css在线生成工具</category>
        <category>css工具</category>
        <category>php正则</category>
        <category>正则</category>
        <category>shodan</category>
        <category>黑谷歌</category>
        <category>黒帽搜素</category>
        <category>shopex</category>
        <category>可视化数据</category>
        <category>数据</category>
        <category>数据表</category>
        <category>socket通信</category>
        <category>socket多进程</category>
        <category>socket</category>
        <category>json</category>
        <category>json数组</category>
        <category>json解析</category>
        <category>sql</category>
        <category>sql优化</category>
        <category>css3兼容360浏览器兼容模式</category>
        <category>css圆角</category>
        <category>结构体转map</category>
        <category>config</category>
        <category>thinkphp</category>
        <category>配置文件</category>
        <category>树</category>
        <category>二叉树</category>
        <category>js插件</category>
        <category>web自适应</category>
        <category>响应式布局</category>
        <category>响应式所有分辨率</category>
        <category>自适应布局</category>
        <category>自适应所有分辨率</category>
        <category>webman</category>
        <category>mysql设置超时，超时</category>
        <category>markdown</category>
        <category>wget</category>
        <category>wget抓取</category>
        <category>网站抓取</category>
        <category>我在</category>
        <category>wordpress</category>
        <category>wordpress标签</category>
        <category>域名合并</category>
        <category>wpscan</category>
        <category>usbrip</category>
        <category>无限极分类</category>
        <category>php无限极</category>
        <category>分类tree</category>
        <category>无限极分类树型</category>
        <category>xhprof</category>
        <category>laravel</category>
        <category>composer插件</category>
        <category>html</category>
        <category>响应式分辨率</category>
        <category>响应式调试</category>
        <category>自适应屏幕</category>
        <category>携程</category>
        <category>携程攻击</category>
        <category>携程网站瘫痪</category>
        <category>物理删除</category>
        <category>3D</category>
        <category>动画</category>
        <category>平台</category>
        <category>虚幻4引擎编辑</category>
        <category>生成唯一id</category>
        <category>生成id</category>
        <category>发邮件</category>
        <category>邮件函数</category>
        <category>储蓄卡免年费</category>
        <category>银行卡</category>
        <category>银行卡免年费</category>
        <category>composer安装</category>
        <category>composer配置</category>
        <category>项目创建composer</category>
        <category>mysql优化</category>
        <category>mysql读写优化</category>
        <category>数据库优化，mysql语句优化</category>
        <category>php加密</category>
        <category>php技术</category>
        <category>夕阳</category>
        <category>mysql函数</category>
        <category>php中mysql函数</category>
        <category>互联网时代</category>
        <category>开源技术</category>
        <category>web框架</category>
        <category>php抓取图片</category>
        <category>php批量抓取页面图片</category>
        <category>邮箱服务器</category>
        <category>正则表达式</category>
        <category>翻墙</category>
        <category>谷歌</category>
        <category>谷歌搜索</category>
        <category>php架构</category>
        <category>php服务</category>
        <category>php服务设计</category>
        <item>
            <guid isPermalink="true">https://erik.xyz/2020/06/18/elasticsearch-curd/</guid>
            <title>Elasticsearch基本CURD操作</title>
            <link>https://erik.xyz/2020/06/18/elasticsearch-curd/</link>
            <category>elasticsearch</category>
            <pubDate>Thu, 18 Jun 2020 22:35:50 +0800</pubDate>
            <description><![CDATA[ &lt;p&gt;当我们的ES集群搭建完成以后，我怎么能看到集群中各个节点状态以及主节点和健康情况呢，如下讲解使用curl命令来与ES集群进行交互、分别有查询主节点情况、集群状态、以及创建索引查看索引、查看分片以及对ES集群进行查询请求等操作。&lt;br&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;br&gt;CURL语法讲解&lt;/p&gt;
&lt;p&gt;RESTful API:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    curl  -X&amp;lt;VERB&amp;gt; &amp;#39;&amp;lt;PROTOCOL&amp;gt;://&amp;lt;HOST&amp;gt;:&amp;lt;PORT&amp;gt;/&amp;lt;PATH&amp;gt;?&amp;lt;QUERY_STRING&amp;gt;&amp;#39; -d &amp;#39;&amp;lt;BODY&amp;gt;&amp;#39;
    -X：指定请求方式

    &amp;lt;VERB&amp;gt;：GET,POST,PUT,DELETE   一般请求为GET、提交变更为POST、上传文件为PUT、删除操作为DELETE

    &amp;lt;PROTOCOL&amp;gt;：协议，一般为HTTP协议

    &amp;lt;HOST&amp;gt;：主机，可为主机的IP地址或Hostname

    &amp;lt;PORT&amp;gt;：主机端口

    &amp;lt;PATH&amp;gt;：路径，主机端口后的路径，如下几个路径：/_cat, /_search, /_cluster   /_cat路径覆盖了大多数的信息内容,/_search为搜索所有的索引和文档类型

    &amp;lt;QUERY_STRING&amp;gt;：查询字符串匹配规则

    -d：指定主体内容

    &amp;lt;BODY&amp;gt;：json格式的请求主体
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Elasticseearch基本查询语句&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    //查看_cat支持的信息
    kibana: GET /_cat
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat&amp;#39;        

    //查看主节点信息
    kibana: GET /_cat/master?v
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/master?v&amp;#39;        

    //查看集群所有节点
    kibana: GET /_cat/nodes?v
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/nodes?v&amp;#39;        

    //查看所有索引信息
    kibana: GET /_cat/indices?v
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/indices?v&amp;#39;        

    //查看单个索引信息
    kibana: GET /_cat/indices/movies?v
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/indices/movies?v&amp;#39;        

    //查看所有分片信息
    kibana: GET /_cat/shards?v
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/shards?v&amp;#39;        

    //查看单个索引分片信息
    kibana: GET /_cat/shards/movies?v
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/shards/movies?v&amp;#39;        

    //查看集群健康状态
    kibana: GET /_cat/health?v
    kibana: GET _cluster/health
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/health?v&amp;#39;
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cluster/health?pretty&amp;#39;        

    //查看插件
    kibana: GET /_cat/plugins?v
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/plugins?v&amp;#39;        

    //查看所有索引文档总数
    kibana: GET _all/_count
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_all/_count?pretty&amp;#39;        

    //查看指定索引文档总数
    kibana: GET movies/_count
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/movies/_count?pretty&amp;#39;        

    //查看所有模板
    kibana: GET _cat/templates
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/templates?v&amp;#39;        

    //查看状态为绿的索引
    kibana: GET /_cat/indices?v&amp;amp;health=green
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/indices?v&amp;amp;health=green&amp;#39;        

    //查看movies索引元数据
    kibana: GET movies
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/movies?pretty&amp;#39;        

    //按照文档数量排序索引
    kibana: GET _cat/indices?v&amp;amp;s=docs.count:desc
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/indices?v&amp;amp;s=docs.count:desc&amp;#39;        

    //查看各个索引占用内存大小并进行排序
    kibana: 
    bash: curl -XGET -u elastic:26tBktGolYCyZD2pPISW &amp;#39;http://192.168.31.215:9201/_cat/indices?v&amp;amp;h=i,tm&amp;amp;s=tm:desc&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Elasticsearch CURD语法&lt;/p&gt;
&lt;div class=&#34;table-container&#34;&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CURD&lt;/th&gt;
&lt;th&gt;请求方式&lt;/th&gt;
&lt;th&gt;主体&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Create&lt;/td&gt;
&lt;td&gt;PUT&lt;/td&gt;
&lt;td&gt;/index/_create/id&lt;/td&gt;
&lt;td&gt;指定Document ID，创建文档，如果ID已存在，则失败&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Create&lt;/td&gt;
&lt;td&gt;POST&lt;/td&gt;
&lt;td&gt;/index/_create/id&lt;/td&gt;
&lt;td&gt;指定Document ID，创建文档，如果ID已存在，则失败&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Create&lt;/td&gt;
&lt;td&gt;POST&lt;/td&gt;
&lt;td&gt;/index/_doc&lt;/td&gt;
&lt;td&gt;自动生成ID，不会重复，重复提交则创建多个文档，文档版本都为1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Index&lt;/td&gt;
&lt;td&gt;PUT&lt;/td&gt;
&lt;td&gt;/index/_doc/id&lt;/td&gt;
&lt;td&gt;如果ID不存在,则创建新的文档,如果ID存在,则删除现有文档后创建新的文档,版本+1,ID相同&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Index&lt;/td&gt;
&lt;td&gt;POST&lt;/td&gt;
&lt;td&gt;/index/_doc/id&lt;/td&gt;
&lt;td&gt;如果ID不存在,则创建新的文档,如果ID存在,则删除现有文档后创建新的文档,版本+1,ID相同&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Read&lt;/td&gt;
&lt;td&gt;GET&lt;/td&gt;
&lt;td&gt;/index/_doc/id&lt;/td&gt;
&lt;td&gt;查看Document ID为1的文档&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Update&lt;/td&gt;
&lt;td&gt;POST&lt;/td&gt;
&lt;td&gt;/index/_doc/id&lt;/td&gt;
&lt;td&gt;文档必须存在,否则更新失败,只能增量修改字段,不能减少字段,字段值可以随意修改,版本加1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Delete&lt;/td&gt;
&lt;td&gt;Delete&lt;/td&gt;
&lt;td&gt;/index/_doc/id&lt;/td&gt;
&lt;td&gt;文档必须存在,否则删除返回”not_found”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Delete&lt;/td&gt;
&lt;td&gt;Delete&lt;/td&gt;
&lt;td&gt;/index&lt;/td&gt;
&lt;td&gt;删除索引，索引内的文档也会被随之而删除,要删除的索引必须存在,否则返回 “404”&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p&gt;原创地址：&lt;a href=&#34;https://mp.weixin.qq.com/s/qZq_EV9q1LUUzOZeTzhA-g&#34;&gt;https://mp.weixin.qq.com/s/qZq_EV9q1LUUzOZeTzhA-g&lt;/a&gt;&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://erik.xyz/2020/05/07/elasticsearch-node/</guid>
            <title>linux系统里elasticsearch集群搭建</title>
            <link>https://erik.xyz/2020/05/07/elasticsearch-node/</link>
            <category>elasticsearch</category>
            <category>elasticsearch搭建</category>
            <category>elasticsearch集群</category>
            <pubDate>Thu, 07 May 2020 11:43:00 +0800</pubDate>
            <description><![CDATA[ &lt;h2 id=&#34;1-在容器中搜索elasticsearch镜像-如图结果，一般选择最上面的一个。&#34;&gt;&lt;a href=&#34;#1-在容器中搜索elasticsearch镜像-如图结果，一般选择最上面的一个。&#34; class=&#34;headerlink&#34; title=&#34;1.在容器中搜索elasticsearch镜像,如图结果，一般选择最上面的一个。&#34;&gt;&lt;/a&gt;1.在容器中搜索elasticsearch镜像,如图结果，一般选择最上面的一个。&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;    sudo docker search elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_114446.jpg&#34; alt=&#34;&amp;#39;es图&amp;#39;&#34;&gt;&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;h2 id=&#34;2-到elasticsearch官方网站查询elasticsearch的版本，我用的是最新版7-6-2&#34;&gt;&lt;a href=&#34;#2-到elasticsearch官方网站查询elasticsearch的版本，我用的是最新版7-6-2&#34; class=&#34;headerlink&#34; title=&#34;2.到elasticsearch官方网站查询elasticsearch的版本，我用的是最新版7.6.2&#34;&gt;&lt;/a&gt;2.到elasticsearch官方网站查询elasticsearch的版本，我用的是最新版7.6.2&lt;/h2&gt;&lt;h2 id=&#34;3-拉镜像到本地&#34;&gt;&lt;a href=&#34;#3-拉镜像到本地&#34; class=&#34;headerlink&#34; title=&#34;3.拉镜像到本地&#34;&gt;&lt;/a&gt;3.拉镜像到本地&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;    sudo docker pull elasticsearch:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;4-查看本地镜像，找到elasticsearch，如下图&#34;&gt;&lt;a href=&#34;#4-查看本地镜像，找到elasticsearch，如下图&#34; class=&#34;headerlink&#34; title=&#34;4.查看本地镜像，找到elasticsearch，如下图&#34;&gt;&lt;/a&gt;4.查看本地镜像，找到elasticsearch，如下图&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;    sudo docker images
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_115053.jpg&#34; alt=&#34;&amp;#39;es图&amp;#39;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;5-创建挂载本地目录&#34;&gt;&lt;a href=&#34;#5-创建挂载本地目录&#34; class=&#34;headerlink&#34; title=&#34;5.创建挂载本地目录&#34;&gt;&lt;/a&gt;5.创建挂载本地目录&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;mkdir -p es/node1 es/node2 es/node3 &amp;amp;&amp;amp; mkdir es/node1/config es/node1/data es/node1/log es/node1/plugins es/node2/config es/node2/data es/node2/log es/node2/plugins es/node3/config es/node3/data es/node3/log es/node3/plugins
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;config存放配置文件&lt;/p&gt;
&lt;p&gt;data存放数据&lt;/p&gt;
&lt;p&gt;log存放日志&lt;/p&gt;
&lt;p&gt;plugins存放插件&lt;/p&gt;
&lt;p&gt;给目录开放读写权限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo chmod -R 777 es/node1 es/node2 es/node3
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;6-创建配置文件&#34;&gt;&lt;a href=&#34;#6-创建配置文件&#34; class=&#34;headerlink&#34; title=&#34;6.创建配置文件&#34;&gt;&lt;/a&gt;6.创建配置文件&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;node1的配置文件  es/node1/config/config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#集群名称
cluster.name: erik-es
#当前该节点的名称
node.name: node1
#是不是有资格竞选主节点
node.master: true
#是否存储数据
node.data: true
#最大集群节点数
node.max_local_storage_nodes: 3
#给当前节点自定义属性（可以省略）
#node.attr.rack: r1
#数据存档位置
path.data: /usr/share/elasticsearch/data
#日志存放位置
path.logs: /usr/share/elasticsearch/log
#是否开启时锁定内存（默认为是）
#bootstrap.memory_lock: true
#设置网关地址，我是被这个坑死了，这个地址我原先填写了自己的实际物理IP地址，
#然后启动一直报无效的IP地址，无法注入9300端口，这里只需要填写0.0.0.0
network.host: 0.0.0.0
#设置其它结点和该结点交互的ip地址，如果不设置它会自动判断，值必须是个真实的ip地址，设置当前物理机地址,
#如果是docker安装节点的IP将会是配置的IP而不是docker网管ip
network.publish_host: 172.18.0.2
#设置映射端口
http.port: 9200
#内部节点之间沟通端口
transport.tcp.port: 9300
#集群发现默认值为127.0.0.1:9300,如果要在其他主机上形成包含节点的群集,如果搭建集群则需要填写
#es7.x 之后新增的配置，写入候选主节点的设备地址，在开启服务后可以被选为主节点，也就是说把所有的节点都写上
discovery.seed_hosts: [&amp;quot;172.18.0.2:9300&amp;quot;,&amp;quot;172.18.0.3:9301&amp;quot;,&amp;quot;172.18.0.4:9302&amp;quot;]
#当你在搭建集群的时候，选出合格的节点集群，有些人说的太官方了，
#其实就是，让你选择比较好的几个节点，在你节点启动时，在这些节点中选一个做领导者，
#如果你不设置呢，elasticsearch就会自己选举，这里我们把三个节点都写上
cluster.initial_master_nodes: [&amp;quot;node1&amp;quot;,&amp;quot;node2&amp;quot;,&amp;quot;node3&amp;quot;]
#在群集完全重新启动后阻止初始恢复，直到启动N个节点
#简单点说在集群启动后，至少复活多少个节点以上，那么这个服务才可以被使用，否则不可以被使用，
gateway.recover_after_nodes: 2
#删除索引是是否需要显示其名称，默认为显示
#action.destructive_requires_name: true
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;node2的配置文件  es/node2/config/config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  #集群名称
  cluster.name: erik-es
  #当前该节点的名称
  node.name: node2
  #是不是有资格竞选主节点
  node.master: true
  #是否存储数据
  node.data: true
  #最大集群节点数
  node.max_local_storage_nodes: 3
  #给当前节点自定义属性（可以省略）
  #node.attr.rack: r1
  #数据存档位置
  path.data: /usr/share/elasticsearch/data
  #日志存放位置
  path.logs: /usr/share/elasticsearch/log
  #是否开启时锁定内存（默认为是）
  #bootstrap.memory_lock: true
  #设置网关地址，我是被这个坑死了，这个地址我原先填写了自己的实际物理IP地址，
  #然后启动一直报无效的IP地址，无法注入9300端口，这里只需要填写0.0.0.0
  network.host: 0.0.0.0
  #设置其它结点和该结点交互的ip地址，如果不设置它会自动判断，值必须是个真实的ip地址，设置当前物理机地址,
  #如果是docker安装节点的IP将会是配置的IP而不是docker网管ip
  network.publish_host: 172.18.0.3
  #设置映射端口
  http.port: 9201
  #内部节点之间沟通端口
  transport.tcp.port: 9301
  #集群发现默认值为127.0.0.1:9300,如果要在其他主机上形成包含节点的群集,如果搭建集群则需要填写
  #es7.x 之后新增的配置，写入候选主节点的设备地址，在开启服务后可以被选为主节点，也就是说把所有的节点都写上
  discovery.seed_hosts: [&amp;quot;172.18.0.2:9300&amp;quot;,&amp;quot;172.18.0.3:9301&amp;quot;,&amp;quot;172.18.0.4:9302&amp;quot;]
  #当你在搭建集群的时候，选出合格的节点集群，有些人说的太官方了，
  #其实就是，让你选择比较好的几个节点，在你节点启动时，在这些节点中选一个做领导者，
  #如果你不设置呢，elasticsearch就会自己选举，这里我们把三个节点都写上
  cluster.initial_master_nodes: [&amp;quot;node1&amp;quot;,&amp;quot;node2&amp;quot;,&amp;quot;node3&amp;quot;]
  #在群集完全重新启动后阻止初始恢复，直到启动N个节点
  #简单点说在集群启动后，至少复活多少个节点以上，那么这个服务才可以被使用，否则不可以被使用，
  gateway.recover_after_nodes: 2
  #删除索引是是否需要显示其名称，默认为显示
  #action.destructive_requires_name: true
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;node3的配置文件  es/node3/config/config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  #集群名称
  cluster.name: erik-es
  #当前该节点的名称
  node.name: node3
  #是不是有资格竞选主节点
  node.master: true
  #是否存储数据
  node.data: true
  #最大集群节点数
  node.max_local_storage_nodes: 3
  #给当前节点自定义属性（可以省略）
  #node.attr.rack: r1
  #数据存档位置
  path.data: /usr/share/elasticsearch/data
  #日志存放位置
  path.logs: /usr/share/elasticsearch/log
  #是否开启时锁定内存（默认为是）
  #bootstrap.memory_lock: true
  #设置网关地址，我是被这个坑死了，这个地址我原先填写了自己的实际物理IP地址，
  #然后启动一直报无效的IP地址，无法注入9300端口，这里只需要填写0.0.0.0
  network.host: 0.0.0.0
  #设置其它结点和该结点交互的ip地址，如果不设置它会自动判断，值必须是个真实的ip地址，设置当前物理机地址,
  #如果是docker安装节点的IP将会是配置的IP而不是docker网管ip
  network.publish_host: 172.18.0.4
  #设置映射端口
  http.port: 9202
  #内部节点之间沟通端口
  transport.tcp.port: 9302
  #集群发现默认值为127.0.0.1:9300,如果要在其他主机上形成包含节点的群集,如果搭建集群则需要填写
  #es7.x 之后新增的配置，写入候选主节点的设备地址，在开启服务后可以被选为主节点，也就是说把所有的节点都写上
  discovery.seed_hosts: [&amp;quot;172.18.0.2:9300&amp;quot;,&amp;quot;172.18.0.3:9301&amp;quot;,&amp;quot;172.18.0.4:9302&amp;quot;]
  #当你在搭建集群的时候，选出合格的节点集群，有些人说的太官方了，
  #其实就是，让你选择比较好的几个节点，在你节点启动时，在这些节点中选一个做领导者，
  #如果你不设置呢，elasticsearch就会自己选举，这里我们把三个节点都写上
  cluster.initial_master_nodes: [&amp;quot;node1&amp;quot;,&amp;quot;node2&amp;quot;,&amp;quot;node3&amp;quot;]
  #在群集完全重新启动后阻止初始恢复，直到启动N个节点
  #简单点说在集群启动后，至少复活多少个节点以上，那么这个服务才可以被使用，否则不可以被使用，
  gateway.recover_after_nodes: 2
  #删除索引是是否需要显示其名称，默认为显示
  #action.destructive_requires_name: true
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;7-创建网络&#34;&gt;&lt;a href=&#34;#7-创建网络&#34; class=&#34;headerlink&#34; title=&#34;7.创建网络&#34;&gt;&lt;/a&gt;7.创建网络&lt;/h2&gt;&lt;p&gt;如果需要安装kibana等其他，需要创建一个网络，名字任意取，让他们在同一个网络，使得elasticsearch和kibana通信，网络名称可以自定义&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker network create es-net
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt; 查看已创建的网络，如下图&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo docker network ls
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_125720.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;8-创建节点&#34;&gt;&lt;a href=&#34;#8-创建节点&#34; class=&#34;headerlink&#34; title=&#34;8.创建节点&#34;&gt;&lt;/a&gt;8.创建节点&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;node1&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo docker run --privileged -ti -e ES_JAVA_OPTS=&amp;quot;-Xms512m -Xmx512m&amp;quot; --network es-net -d -p 9200:9200 -p 9300:9300 -v /home/project/es/node1/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /home/project/es/node1/plugins:/usr/share/elasticsearch/plugins -v /home/project/es/node1/data:/usr/share/elasticsearch/data -v /home/project/es/node1/log:/usr/share/elasticsearch/log --name es-node1 elasticsearch:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这时候你会发现过会容器节点es-node1自动停止了。查查容器日志，如下&lt;br&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_133110.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;本地系统最大虚拟值太小，一般就是本地没有设置，而用了默认的，打开&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo leafpad  /etc/sysctl.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;在sysctl.conf中找找vm.max_map_count，如果找不到就添加vm.max_map_count=262144&lt;br&gt;退出编辑，执行加载&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo sysctl -p
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;重新启动es-node1&lt;/p&gt;
&lt;p&gt;查询此时容器es-node1的IP地址&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo docker inspect es-node1 | grep &amp;#39;&amp;quot;IPAddress&amp;quot;&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后更改es-node1配置文件中的network.publish_host和discovery.seed_hostsd地址，其他两个节点也是如此。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;node2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker run --privileged -ti -e ES_JAVA_OPTS=&amp;quot;-Xms512m -Xmx512m&amp;quot; --network es-net -d -p 9201:9201 -p 9301:9301 -v /home/project/es/node2/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /home/project/es/node2/plugins:/usr/share/elasticsearch/plugins -v /home/project/es/node2/data:/usr/share/elasticsearch/data -v /home/project/es/node2/log:/usr/share/elasticsearch/log --name es-node2 elasticsearch:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;改配置ip同node1&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;node3&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker run --privileged -ti -e ES_JAVA_OPTS=&amp;quot;-Xms512m -Xmx512m&amp;quot; --network es-net -d -p 9202:9202 -p 9302:9302 -v /home/project/es/node3/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /home/project/es/node3/plugins:/usr/share/elasticsearch/plugins -v /home/project/es/node3/data:/usr/share/elasticsearch/data -v /home/project/es/node3/log:/usr/share/elasticsearch/log --name es-node3 elasticsearch:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;改配置ip同node1&lt;/p&gt;
&lt;p&gt;修改完所有节点的配置文件后记得重启所有节点。&lt;/p&gt;
&lt;h2 id=&#34;9-测试结果&#34;&gt;&lt;a href=&#34;#9-测试结果&#34; class=&#34;headerlink&#34; title=&#34;9.测试结果&#34;&gt;&lt;/a&gt;9.测试结果&lt;/h2&gt;&lt;p&gt;在浏览器端输入（ip是我本地的）&lt;a href=&#34;http://172.18.0.2:9200/_cat/nodes?pretty&#34;&gt;http://172.18.0.2:9200/_cat/nodes?pretty&lt;/a&gt;&lt;br&gt;展示如下图&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_140004.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;表示成功&lt;/p&gt;
&lt;h2 id=&#34;10-安装Kibana&#34;&gt;&lt;a href=&#34;#10-安装Kibana&#34; class=&#34;headerlink&#34; title=&#34;10.安装Kibana&#34;&gt;&lt;/a&gt;10.安装Kibana&lt;/h2&gt;&lt;p&gt;在docker中拉取Kibana&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker pull kibana:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;创建kibana目录，并添加文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo chmod -R 777 kibana/config

    leafpad kibana/config/kibana.yml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;配置文件内容&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#Kibana的映射端口
server.port: 5601

#网关地址
server.host: &amp;quot;0.0.0.0&amp;quot;

#Kibana实例对外展示的名称
server.name: &amp;quot;kibana-192.168.31.190&amp;quot;

#Elasticsearch的集群地址，也就是说所有的集群IP
elasticsearch.hosts: [&amp;quot;http://172.18.0.2:9200&amp;quot;,&amp;quot;http://172.18.0.3:9201&amp;quot;,&amp;quot;http://172.18.0.4:9202&amp;quot;]

#设置页面语言，中文使用zh-CN，英文使用en
i18n.locale: &amp;quot;zh-CN&amp;quot;

#这个配置还没理解清楚………………
xpack.monitoring.ui.container.elasticsearch.enabled: true
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;安装容器&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker run --privileged -ti -d -p 5601:5601 -v /home/project/kibana/config/kibana.yml:/usr/share/kibana/config/kibana.yml --network es-net --name kibana kibana:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;成功后在浏览器输入地址（第一次启动会比较慢）&lt;a href=&#34;http://127.0.0.1:5601，展示如下图&#34;&gt;http://127.0.0.1:5601，展示如下图&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_142240.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;参考文章：&lt;a href=&#34;https://blog.csdn.net/gfk3009/article/details/104560431/&#34;&gt;https://blog.csdn.net/gfk3009/article/details/104560431/&lt;/a&gt;&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>