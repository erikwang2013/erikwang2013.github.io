<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://erik.xyz</id>
    <title>艾瑞可erik • Posts by &#34;elasticsearch搭建&#34; tag • Posts by &#34;undefined&#34; categories</title>
    <link href="https://erik.xyz" />
    <updated>2020-05-07T03:43:00.000Z</updated>
    <category term="日志" />
    <category term="工具" />
    <category term="jquery" />
    <category term="jquery插件" />
    <category term="js" />
    <category term="css" />
    <category term="php" />
    <category term="web" />
    <category term="代码" />
    <category term="压缩" />
    <category term="php扩展" />
    <category term="php技巧" />
    <category term="php类库" />
    <category term="php资源" />
    <category term="说说" />
    <category term="趣闻" />
    <category term="php服务器" />
    <category term="随笔" />
    <category term="php实例" />
    <category term="php库" />
    <category term="转载" />
    <category term="互联" />
    <category term="项目实战" />
    <category term="nginx" />
    <category term="javascript" />
    <category term="漏洞" />
    <category term="php应用" />
    <category term="浮点" />
    <category term="负载均衡" />
    <category term="kali" />
    <category term="kali安装" />
    <category term="http" />
    <category term="http服务器" />
    <category term="农业系统" />
    <category term="系统设计" />
    <category term="克莱姆法则" />
    <category term="行列式" />
    <category term="n阶行列式" />
    <category term="支付系统" />
    <category term="支付" />
    <category term="centos" />
    <category term="linux" />
    <category term="apache优化" />
    <category term="apache隐藏index" />
    <category term="nginx优化" />
    <category term="nginx隐藏index" />
    <category term="seo" />
    <category term="优化" />
    <category term="日常" />
    <category term="摘要" />
    <category term="文章" />
    <category term="游记" />
    <category term="ca证书" />
    <category term="证书生成" />
    <category term="二战" />
    <category term="二战熊" />
    <category term="西伯利亚熊" />
    <category term="centos软件" />
    <category term="yum仓库" />
    <category term="软件" />
    <category term="centos安装chromium报错" />
    <category term="chromium安装报错" />
    <category term="svn" />
    <category term="代码提交" />
    <category term="deb" />
    <category term="deb/rpm互转" />
    <category term="deb转rpm" />
    <category term="rpm互转" />
    <category term="centos7安装steam" />
    <category term="centos安装steam" />
    <category term="centos安装吃鸡steam" />
    <category term="linux安装steam" />
    <category term="steam安装" />
    <category term="centos软件安装" />
    <category term="centos6.5" />
    <category term="linux系统" />
    <category term="centos7安装Redis Desktop Manager" />
    <category term="centos7安装redis桌面" />
    <category term="centos安装redis桌面" />
    <category term="linux安装centos7安装Redis Desktop Manager" />
    <category term="Redis Desktop Manager" />
    <category term="redis桌面" />
    <category term="centos7" />
    <category term="centos7-wine" />
    <category term="wine" />
    <category term="wine安装" />
    <category term="root密码" />
    <category term="root密码重置" />
    <category term="忘记root密码" />
    <category term="memcache" />
    <category term="memcached" />
    <category term="生活手记" />
    <category term="艾瑞可erik" />
    <category term="程序员" />
    <category term="开源云" />
    <category term="容器" />
    <category term="cncf" />
    <category term="监控" />
    <category term="composer" />
    <category term="composer部署" />
    <category term="内网部署composer" />
    <category term="cphalcon" />
    <category term="cphalcon报错" />
    <category term="css中的em" />
    <category term="响应式字体" />
    <category term="响应式布局样式" />
    <category term="proxy代理搭建" />
    <category term="代理服务器搭建" />
    <category term="proxy服务器" />
    <category term="查找" />
    <category term="排序" />
    <category term="快速排序" />
    <category term="冒泡排序" />
    <category term="二分查找" />
    <category term="datahub" />
    <category term="datahub安装" />
    <category term="deepin" />
    <category term="emergency" />
    <category term="emergency mode" />
    <category term="deepin黑屏" />
    <category term="清理系统" />
    <category term="清理c盘" />
    <category term="dns" />
    <category term="域名监测" />
    <category term="网站监测" />
    <category term="docker" />
    <category term="php安装" />
    <category term="杂谈" />
    <category term="ecshop" />
    <category term="框架" />
    <category term="beego数据分页" />
    <category term="分页" />
    <category term="elasticsearch" />
    <category term="elasticsearch搭建" />
    <category term="elasticsearch集群" />
    <category term="系统" />
    <category term="emm" />
    <category term="mdm" />
    <category term="phone" />
    <category term="手机" />
    <category term="新闻" />
    <category term="免费" />
    <category term="jenkis" />
    <category term="jenkis教程" />
    <category term="随笔吐槽" />
    <category term="算法" />
    <category term="ping" />
    <category term="ping服务器" />
    <category term="各大网站ping" />
    <category term="搜引擎ping服务器" />
    <category term="go获取ip" />
    <category term="im" />
    <category term="go中pdf生成" />
    <category term="go中限流" />
    <category term="go对接快递签名" />
    <category term="go时间获取" />
    <category term="go类型转换" />
    <category term="微服务" />
    <category term="go-zero" />
    <category term="rpc" />
    <category term="go加密" />
    <category term="go解密" />
    <category term="归" />
    <category term="吐槽" />
    <category term="php大全" />
    <category term="php资料" />
    <category term="hadoop" />
    <category term="hadoop2.8.0" />
    <category term="hadoop安装教程" />
    <category term="hadoop安装详细教程" />
    <category term="hadoop教程" />
    <category term="hadoop部署" />
    <category term="hadoop3" />
    <category term="hadoop配置" />
    <category term="log4j2" />
    <category term="数据库" />
    <category term="hbase安装教程" />
    <category term="hbase" />
    <category term="http1.1" />
    <category term="http2.0" />
    <category term="会话" />
    <category term="会话原理" />
    <category term="hyperf" />
    <category term="杂录" />
    <category term="新冠肺炎" />
    <category term="springboot" />
    <category term="springboot内网部署" />
    <category term="linux恢复" />
    <category term="linux误删" />
    <category term="linux命令" />
    <category term="linux命令汇总" />
    <category term="jenkins" />
    <category term="jetbtrains" />
    <category term="phpstorm" />
    <category term="搜索引擎" />
    <category term="图片" />
    <category term="素材" />
    <category term="jq" />
    <category term="jq侧边导航" />
    <category term="侧边导航" />
    <category term="js判断浏览器" />
    <category term="js判断浏览器版本" />
    <category term="判断浏览器" />
    <category term="浏览器版本判断" />
    <category term="获取浏览器信息" />
    <category term="kali右键汉化" />
    <category term="kali桌面右键汉化" />
    <category term="kali右键创建文件" />
    <category term="区块链" />
    <category term="lanmp" />
    <category term="php环境独立配置" />
    <category term="服务器" />
    <category term="劳动纠纷" />
    <category term="追缴工资" />
    <category term="申请仲裁" />
    <category term="flash" />
    <category term="表单" />
    <category term="linux报错" />
    <category term="linux中update-command-not-found" />
    <category term="linux运行命令报错" />
    <category term="web前端" />
    <category term="web优化" />
    <category term="撮合算法" />
    <category term="撮合" />
    <category term="php撮合算法" />
    <category term="maven搭建库" />
    <category term="maven" />
    <category term="maven内网库" />
    <category term="高级缓存配置" />
    <category term="mongodb" />
    <category term="mongodb权限" />
    <category term="可穿戴设备" />
    <category term="mysql" />
    <category term="分库分表" />
    <category term="mysql应对千万级" />
    <category term="mysql瓶颈" />
    <category term="mysql瓶颈解决办法" />
    <category term="redis" />
    <category term="数据一致性" />
    <category term="mysql消息" />
    <category term="mysql队列" />
    <category term="mysql高并发" />
    <category term="mysql存储" />
    <category term="mysql引擎" />
    <category term="mysql数据表设计选择" />
    <category term="mysql监控" />
    <category term="mysql性能" />
    <category term="内网支付" />
    <category term="内网穿透" />
    <category term="支付接口本地化开发" />
    <category term="本地挂网" />
    <category term="穿透" />
    <category term="go" />
    <category term="new和make的区别" />
    <category term="红包算法" />
    <category term="深圳劳动法服务部门" />
    <category term="非关系型数据库" />
    <category term="onethink" />
    <category term="oop" />
    <category term="php管理系统" />
    <category term="开放接口开发" />
    <category term="开源工具" />
    <category term="桌面共享工具" />
    <category term="openresty" />
    <category term="openvas" />
    <category term="openvas安装" />
    <category term="php变量" />
    <category term="php超级全局变量" />
    <category term="php超级变量" />
    <category term="php基本类型" />
    <category term="php数据类型" />
    <category term="php设计模式" />
    <category term="php对接微信支付" />
    <category term="微信支付" />
    <category term="微信支付回调" />
    <category term="游戏" />
    <category term="php函数" />
    <category term="php随机数" />
    <category term="php获取闰年" />
    <category term="闰年.php时间" />
    <category term="php环境" />
    <category term="php集成环境" />
    <category term="服务器集成环境" />
    <category term="数组函数" />
    <category term="数组排序函数" />
    <category term="php数学函数" />
    <category term="php面试题" />
    <category term="php面向对象" />
    <category term="面向对象" />
    <category term="php-zookeeper" />
    <category term="zookeeper3.5.5" />
    <category term="php-zookeeper扩展" />
    <category term="php串口开发" />
    <category term="php倒计时" />
    <category term="php时间" />
    <category term="倒计时" />
    <category term="计算时间" />
    <category term="PHP数组" />
    <category term="字符串函数" />
    <category term="排序函数" />
    <category term="php的SPL" />
    <category term="SPL手册" />
    <category term="PHP算法" />
    <category term="php递归" />
    <category term="递归" />
    <category term="phpunit" />
    <category term="phpunit安装" />
    <category term="php过滤" />
    <category term="过滤" />
    <category term="foreach" />
    <category term="foreach报错" />
    <category term="php中foreach报错" />
    <category term="php中if" />
    <category term="php中if判断" />
    <category term="php的if" />
    <category term="php字符串" />
    <category term="php7中sphinx" />
    <category term="php7中sphinx扩展" />
    <category term="sphinx扩展" />
    <category term="python" />
    <category term="python库" />
    <category term="a标签" />
    <category term="a标签虚线" />
    <category term="虚线框" />
    <category term="R语言" />
    <category term="数据随机化" />
    <category term="redis总结" />
    <category term="redis命令" />
    <category term="redis监控" />
    <category term="redis锁" />
    <category term="redis分布式锁" />
    <category term="任意金额输入" />
    <category term="10元、5元、2元" />
    <category term="队列" />
    <category term="栈" />
    <category term="顺序表" />
    <category term="链表" />
    <category term="数据结构" />
    <category term="线性结构" />
    <category term="浏览器禁止操作视频" />
    <category term="禁止视频" />
    <category term="响应慢" />
    <category term="页面优化" />
    <category term="js编辑" />
    <category term="runjs" />
    <category term="在线编辑" />
    <category term="rust" />
    <category term="rust配置" />
    <category term="seajs" />
    <category term="session" />
    <category term="路由器烧录" />
    <category term="烧录" />
    <category term="极路由2烧录" />
    <category term="砖头烧录" />
    <category term="免费服务器" />
    <category term="空间" />
    <category term="资源" />
    <category term="深圳政府电话" />
    <category term="深圳电话" />
    <category term="特区电话" />
    <category term="居住证" />
    <category term="居住证签注" />
    <category term="深圳新居住证" />
    <category term="国庆骑行" />
    <category term="深圳珠海骑行" />
    <category term="骑行" />
    <category term="世界那么大" />
    <category term="css3" />
    <category term="css在线生成工具" />
    <category term="css工具" />
    <category term="php正则" />
    <category term="正则" />
    <category term="shodan" />
    <category term="黑谷歌" />
    <category term="黒帽搜素" />
    <category term="shopex" />
    <category term="可视化数据" />
    <category term="数据" />
    <category term="数据表" />
    <category term="socket通信" />
    <category term="socket多进程" />
    <category term="socket" />
    <category term="json" />
    <category term="json数组" />
    <category term="json解析" />
    <category term="sql" />
    <category term="sql优化" />
    <category term="css3兼容360浏览器兼容模式" />
    <category term="css圆角" />
    <category term="结构体转map" />
    <category term="config" />
    <category term="thinkphp" />
    <category term="配置文件" />
    <category term="树" />
    <category term="二叉树" />
    <category term="js插件" />
    <category term="web自适应" />
    <category term="响应式布局" />
    <category term="响应式所有分辨率" />
    <category term="自适应布局" />
    <category term="自适应所有分辨率" />
    <category term="webman" />
    <category term="mysql设置超时，超时" />
    <category term="markdown" />
    <category term="wget" />
    <category term="wget抓取" />
    <category term="网站抓取" />
    <category term="我在" />
    <category term="wordpress" />
    <category term="wordpress标签" />
    <category term="域名合并" />
    <category term="wpscan" />
    <category term="usbrip" />
    <category term="无限极分类" />
    <category term="php无限极" />
    <category term="分类tree" />
    <category term="无限极分类树型" />
    <category term="xhprof" />
    <category term="laravel" />
    <category term="composer插件" />
    <category term="html" />
    <category term="响应式分辨率" />
    <category term="响应式调试" />
    <category term="自适应屏幕" />
    <category term="携程" />
    <category term="携程攻击" />
    <category term="携程网站瘫痪" />
    <category term="物理删除" />
    <category term="3D" />
    <category term="动画" />
    <category term="平台" />
    <category term="虚幻4引擎编辑" />
    <category term="生成唯一id" />
    <category term="生成id" />
    <category term="发邮件" />
    <category term="邮件函数" />
    <category term="储蓄卡免年费" />
    <category term="银行卡" />
    <category term="银行卡免年费" />
    <category term="composer安装" />
    <category term="composer配置" />
    <category term="项目创建composer" />
    <category term="mysql优化" />
    <category term="mysql读写优化" />
    <category term="数据库优化，mysql语句优化" />
    <category term="php加密" />
    <category term="php技术" />
    <category term="夕阳" />
    <category term="mysql函数" />
    <category term="php中mysql函数" />
    <category term="互联网时代" />
    <category term="开源技术" />
    <category term="web框架" />
    <category term="php抓取图片" />
    <category term="php批量抓取页面图片" />
    <category term="邮箱服务器" />
    <category term="正则表达式" />
    <category term="翻墙" />
    <category term="谷歌" />
    <category term="谷歌搜索" />
    <entry>
        <id>https://erik.xyz/2020/05/07/elasticsearch-node/</id>
        <title>linux系统里elasticsearch集群搭建</title>
        <link rel="alternate" href="https://erik.xyz/2020/05/07/elasticsearch-node/"/>
        <content type="html">&lt;h2 id=&#34;1-在容器中搜索elasticsearch镜像-如图结果，一般选择最上面的一个。&#34;&gt;&lt;a href=&#34;#1-在容器中搜索elasticsearch镜像-如图结果，一般选择最上面的一个。&#34; class=&#34;headerlink&#34; title=&#34;1.在容器中搜索elasticsearch镜像,如图结果，一般选择最上面的一个。&#34;&gt;&lt;/a&gt;1.在容器中搜索elasticsearch镜像,如图结果，一般选择最上面的一个。&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;    sudo docker search elasticsearch
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_114446.jpg&#34; alt=&#34;&amp;#39;es图&amp;#39;&#34;&gt;&lt;/p&gt;
&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;h2 id=&#34;2-到elasticsearch官方网站查询elasticsearch的版本，我用的是最新版7-6-2&#34;&gt;&lt;a href=&#34;#2-到elasticsearch官方网站查询elasticsearch的版本，我用的是最新版7-6-2&#34; class=&#34;headerlink&#34; title=&#34;2.到elasticsearch官方网站查询elasticsearch的版本，我用的是最新版7.6.2&#34;&gt;&lt;/a&gt;2.到elasticsearch官方网站查询elasticsearch的版本，我用的是最新版7.6.2&lt;/h2&gt;&lt;h2 id=&#34;3-拉镜像到本地&#34;&gt;&lt;a href=&#34;#3-拉镜像到本地&#34; class=&#34;headerlink&#34; title=&#34;3.拉镜像到本地&#34;&gt;&lt;/a&gt;3.拉镜像到本地&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;    sudo docker pull elasticsearch:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;4-查看本地镜像，找到elasticsearch，如下图&#34;&gt;&lt;a href=&#34;#4-查看本地镜像，找到elasticsearch，如下图&#34; class=&#34;headerlink&#34; title=&#34;4.查看本地镜像，找到elasticsearch，如下图&#34;&gt;&lt;/a&gt;4.查看本地镜像，找到elasticsearch，如下图&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;    sudo docker images
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_115053.jpg&#34; alt=&#34;&amp;#39;es图&amp;#39;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;5-创建挂载本地目录&#34;&gt;&lt;a href=&#34;#5-创建挂载本地目录&#34; class=&#34;headerlink&#34; title=&#34;5.创建挂载本地目录&#34;&gt;&lt;/a&gt;5.创建挂载本地目录&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;mkdir -p es/node1 es/node2 es/node3 &amp;amp;&amp;amp; mkdir es/node1/config es/node1/data es/node1/log es/node1/plugins es/node2/config es/node2/data es/node2/log es/node2/plugins es/node3/config es/node3/data es/node3/log es/node3/plugins
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;config存放配置文件&lt;/p&gt;
&lt;p&gt;data存放数据&lt;/p&gt;
&lt;p&gt;log存放日志&lt;/p&gt;
&lt;p&gt;plugins存放插件&lt;/p&gt;
&lt;p&gt;给目录开放读写权限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo chmod -R 777 es/node1 es/node2 es/node3
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;6-创建配置文件&#34;&gt;&lt;a href=&#34;#6-创建配置文件&#34; class=&#34;headerlink&#34; title=&#34;6.创建配置文件&#34;&gt;&lt;/a&gt;6.创建配置文件&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;node1的配置文件  es/node1/config/config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#集群名称
cluster.name: erik-es
#当前该节点的名称
node.name: node1
#是不是有资格竞选主节点
node.master: true
#是否存储数据
node.data: true
#最大集群节点数
node.max_local_storage_nodes: 3
#给当前节点自定义属性（可以省略）
#node.attr.rack: r1
#数据存档位置
path.data: /usr/share/elasticsearch/data
#日志存放位置
path.logs: /usr/share/elasticsearch/log
#是否开启时锁定内存（默认为是）
#bootstrap.memory_lock: true
#设置网关地址，我是被这个坑死了，这个地址我原先填写了自己的实际物理IP地址，
#然后启动一直报无效的IP地址，无法注入9300端口，这里只需要填写0.0.0.0
network.host: 0.0.0.0
#设置其它结点和该结点交互的ip地址，如果不设置它会自动判断，值必须是个真实的ip地址，设置当前物理机地址,
#如果是docker安装节点的IP将会是配置的IP而不是docker网管ip
network.publish_host: 172.18.0.2
#设置映射端口
http.port: 9200
#内部节点之间沟通端口
transport.tcp.port: 9300
#集群发现默认值为127.0.0.1:9300,如果要在其他主机上形成包含节点的群集,如果搭建集群则需要填写
#es7.x 之后新增的配置，写入候选主节点的设备地址，在开启服务后可以被选为主节点，也就是说把所有的节点都写上
discovery.seed_hosts: [&amp;quot;172.18.0.2:9300&amp;quot;,&amp;quot;172.18.0.3:9301&amp;quot;,&amp;quot;172.18.0.4:9302&amp;quot;]
#当你在搭建集群的时候，选出合格的节点集群，有些人说的太官方了，
#其实就是，让你选择比较好的几个节点，在你节点启动时，在这些节点中选一个做领导者，
#如果你不设置呢，elasticsearch就会自己选举，这里我们把三个节点都写上
cluster.initial_master_nodes: [&amp;quot;node1&amp;quot;,&amp;quot;node2&amp;quot;,&amp;quot;node3&amp;quot;]
#在群集完全重新启动后阻止初始恢复，直到启动N个节点
#简单点说在集群启动后，至少复活多少个节点以上，那么这个服务才可以被使用，否则不可以被使用，
gateway.recover_after_nodes: 2
#删除索引是是否需要显示其名称，默认为显示
#action.destructive_requires_name: true
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;node2的配置文件  es/node2/config/config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  #集群名称
  cluster.name: erik-es
  #当前该节点的名称
  node.name: node2
  #是不是有资格竞选主节点
  node.master: true
  #是否存储数据
  node.data: true
  #最大集群节点数
  node.max_local_storage_nodes: 3
  #给当前节点自定义属性（可以省略）
  #node.attr.rack: r1
  #数据存档位置
  path.data: /usr/share/elasticsearch/data
  #日志存放位置
  path.logs: /usr/share/elasticsearch/log
  #是否开启时锁定内存（默认为是）
  #bootstrap.memory_lock: true
  #设置网关地址，我是被这个坑死了，这个地址我原先填写了自己的实际物理IP地址，
  #然后启动一直报无效的IP地址，无法注入9300端口，这里只需要填写0.0.0.0
  network.host: 0.0.0.0
  #设置其它结点和该结点交互的ip地址，如果不设置它会自动判断，值必须是个真实的ip地址，设置当前物理机地址,
  #如果是docker安装节点的IP将会是配置的IP而不是docker网管ip
  network.publish_host: 172.18.0.3
  #设置映射端口
  http.port: 9201
  #内部节点之间沟通端口
  transport.tcp.port: 9301
  #集群发现默认值为127.0.0.1:9300,如果要在其他主机上形成包含节点的群集,如果搭建集群则需要填写
  #es7.x 之后新增的配置，写入候选主节点的设备地址，在开启服务后可以被选为主节点，也就是说把所有的节点都写上
  discovery.seed_hosts: [&amp;quot;172.18.0.2:9300&amp;quot;,&amp;quot;172.18.0.3:9301&amp;quot;,&amp;quot;172.18.0.4:9302&amp;quot;]
  #当你在搭建集群的时候，选出合格的节点集群，有些人说的太官方了，
  #其实就是，让你选择比较好的几个节点，在你节点启动时，在这些节点中选一个做领导者，
  #如果你不设置呢，elasticsearch就会自己选举，这里我们把三个节点都写上
  cluster.initial_master_nodes: [&amp;quot;node1&amp;quot;,&amp;quot;node2&amp;quot;,&amp;quot;node3&amp;quot;]
  #在群集完全重新启动后阻止初始恢复，直到启动N个节点
  #简单点说在集群启动后，至少复活多少个节点以上，那么这个服务才可以被使用，否则不可以被使用，
  gateway.recover_after_nodes: 2
  #删除索引是是否需要显示其名称，默认为显示
  #action.destructive_requires_name: true
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;node3的配置文件  es/node3/config/config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  #集群名称
  cluster.name: erik-es
  #当前该节点的名称
  node.name: node3
  #是不是有资格竞选主节点
  node.master: true
  #是否存储数据
  node.data: true
  #最大集群节点数
  node.max_local_storage_nodes: 3
  #给当前节点自定义属性（可以省略）
  #node.attr.rack: r1
  #数据存档位置
  path.data: /usr/share/elasticsearch/data
  #日志存放位置
  path.logs: /usr/share/elasticsearch/log
  #是否开启时锁定内存（默认为是）
  #bootstrap.memory_lock: true
  #设置网关地址，我是被这个坑死了，这个地址我原先填写了自己的实际物理IP地址，
  #然后启动一直报无效的IP地址，无法注入9300端口，这里只需要填写0.0.0.0
  network.host: 0.0.0.0
  #设置其它结点和该结点交互的ip地址，如果不设置它会自动判断，值必须是个真实的ip地址，设置当前物理机地址,
  #如果是docker安装节点的IP将会是配置的IP而不是docker网管ip
  network.publish_host: 172.18.0.4
  #设置映射端口
  http.port: 9202
  #内部节点之间沟通端口
  transport.tcp.port: 9302
  #集群发现默认值为127.0.0.1:9300,如果要在其他主机上形成包含节点的群集,如果搭建集群则需要填写
  #es7.x 之后新增的配置，写入候选主节点的设备地址，在开启服务后可以被选为主节点，也就是说把所有的节点都写上
  discovery.seed_hosts: [&amp;quot;172.18.0.2:9300&amp;quot;,&amp;quot;172.18.0.3:9301&amp;quot;,&amp;quot;172.18.0.4:9302&amp;quot;]
  #当你在搭建集群的时候，选出合格的节点集群，有些人说的太官方了，
  #其实就是，让你选择比较好的几个节点，在你节点启动时，在这些节点中选一个做领导者，
  #如果你不设置呢，elasticsearch就会自己选举，这里我们把三个节点都写上
  cluster.initial_master_nodes: [&amp;quot;node1&amp;quot;,&amp;quot;node2&amp;quot;,&amp;quot;node3&amp;quot;]
  #在群集完全重新启动后阻止初始恢复，直到启动N个节点
  #简单点说在集群启动后，至少复活多少个节点以上，那么这个服务才可以被使用，否则不可以被使用，
  gateway.recover_after_nodes: 2
  #删除索引是是否需要显示其名称，默认为显示
  #action.destructive_requires_name: true
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;7-创建网络&#34;&gt;&lt;a href=&#34;#7-创建网络&#34; class=&#34;headerlink&#34; title=&#34;7.创建网络&#34;&gt;&lt;/a&gt;7.创建网络&lt;/h2&gt;&lt;p&gt;如果需要安装kibana等其他，需要创建一个网络，名字任意取，让他们在同一个网络，使得elasticsearch和kibana通信，网络名称可以自定义&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker network create es-net
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt; 查看已创建的网络，如下图&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo docker network ls
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_125720.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;8-创建节点&#34;&gt;&lt;a href=&#34;#8-创建节点&#34; class=&#34;headerlink&#34; title=&#34;8.创建节点&#34;&gt;&lt;/a&gt;8.创建节点&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;node1&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo docker run --privileged -ti -e ES_JAVA_OPTS=&amp;quot;-Xms512m -Xmx512m&amp;quot; --network es-net -d -p 9200:9200 -p 9300:9300 -v /home/project/es/node1/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /home/project/es/node1/plugins:/usr/share/elasticsearch/plugins -v /home/project/es/node1/data:/usr/share/elasticsearch/data -v /home/project/es/node1/log:/usr/share/elasticsearch/log --name es-node1 elasticsearch:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这时候你会发现过会容器节点es-node1自动停止了。查查容器日志，如下&lt;br&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_133110.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;本地系统最大虚拟值太小，一般就是本地没有设置，而用了默认的，打开&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo leafpad  /etc/sysctl.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;在sysctl.conf中找找vm.max_map_count，如果找不到就添加vm.max_map_count=262144&lt;br&gt;退出编辑，执行加载&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo sysctl -p
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;重新启动es-node1&lt;/p&gt;
&lt;p&gt;查询此时容器es-node1的IP地址&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo docker inspect es-node1 | grep &amp;#39;&amp;quot;IPAddress&amp;quot;&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后更改es-node1配置文件中的network.publish_host和discovery.seed_hostsd地址，其他两个节点也是如此。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;node2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker run --privileged -ti -e ES_JAVA_OPTS=&amp;quot;-Xms512m -Xmx512m&amp;quot; --network es-net -d -p 9201:9201 -p 9301:9301 -v /home/project/es/node2/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /home/project/es/node2/plugins:/usr/share/elasticsearch/plugins -v /home/project/es/node2/data:/usr/share/elasticsearch/data -v /home/project/es/node2/log:/usr/share/elasticsearch/log --name es-node2 elasticsearch:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;改配置ip同node1&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;node3&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker run --privileged -ti -e ES_JAVA_OPTS=&amp;quot;-Xms512m -Xmx512m&amp;quot; --network es-net -d -p 9202:9202 -p 9302:9302 -v /home/project/es/node3/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /home/project/es/node3/plugins:/usr/share/elasticsearch/plugins -v /home/project/es/node3/data:/usr/share/elasticsearch/data -v /home/project/es/node3/log:/usr/share/elasticsearch/log --name es-node3 elasticsearch:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;改配置ip同node1&lt;/p&gt;
&lt;p&gt;修改完所有节点的配置文件后记得重启所有节点。&lt;/p&gt;
&lt;h2 id=&#34;9-测试结果&#34;&gt;&lt;a href=&#34;#9-测试结果&#34; class=&#34;headerlink&#34; title=&#34;9.测试结果&#34;&gt;&lt;/a&gt;9.测试结果&lt;/h2&gt;&lt;p&gt;在浏览器端输入（ip是我本地的）&lt;a href=&#34;http://172.18.0.2:9200/_cat/nodes?pretty&#34;&gt;http://172.18.0.2:9200/_cat/nodes?pretty&lt;/a&gt;&lt;br&gt;展示如下图&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_140004.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;表示成功&lt;/p&gt;
&lt;h2 id=&#34;10-安装Kibana&#34;&gt;&lt;a href=&#34;#10-安装Kibana&#34; class=&#34;headerlink&#34; title=&#34;10.安装Kibana&#34;&gt;&lt;/a&gt;10.安装Kibana&lt;/h2&gt;&lt;p&gt;在docker中拉取Kibana&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker pull kibana:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;创建kibana目录，并添加文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    sudo chmod -R 777 kibana/config

    leafpad kibana/config/kibana.yml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;配置文件内容&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#Kibana的映射端口
server.port: 5601

#网关地址
server.host: &amp;quot;0.0.0.0&amp;quot;

#Kibana实例对外展示的名称
server.name: &amp;quot;kibana-192.168.31.190&amp;quot;

#Elasticsearch的集群地址，也就是说所有的集群IP
elasticsearch.hosts: [&amp;quot;http://172.18.0.2:9200&amp;quot;,&amp;quot;http://172.18.0.3:9201&amp;quot;,&amp;quot;http://172.18.0.4:9202&amp;quot;]

#设置页面语言，中文使用zh-CN，英文使用en
i18n.locale: &amp;quot;zh-CN&amp;quot;

#这个配置还没理解清楚………………
xpack.monitoring.ui.container.elasticsearch.enabled: true
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;安装容器&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo docker run --privileged -ti -d -p 5601:5601 -v /home/project/kibana/config/kibana.yml:/usr/share/kibana/config/kibana.yml --network es-net --name kibana kibana:7.6.2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;成功后在浏览器输入地址（第一次启动会比较慢）&lt;a href=&#34;http://127.0.0.1:5601，展示如下图&#34;&gt;http://127.0.0.1:5601，展示如下图&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://erik.xyz/img/202005/07/2020-05-07_142240.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;参考文章：&lt;a href=&#34;https://blog.csdn.net/gfk3009/article/details/104560431/&#34;&gt;https://blog.csdn.net/gfk3009/article/details/104560431/&lt;/a&gt;&lt;/p&gt;
</content>
        <category term="elasticsearch" />
        <category term="elasticsearch搭建" />
        <category term="elasticsearch集群" />
        <updated>2020-05-07T03:43:00.000Z</updated>
    </entry>
</feed>