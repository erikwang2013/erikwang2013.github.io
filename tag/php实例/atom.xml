<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://erik.xyz</id>
    <title>艾瑞可erik • Posts by &#34;php实例&#34; tag • Posts by &#34;undefined&#34; categories</title>
    <link href="https://erik.xyz" />
    <updated>2014-12-29T14:07:00.000Z</updated>
    <category term="php扩展" />
    <category term="php技巧" />
    <category term="php类库" />
    <category term="php资源" />
    <category term="日志" />
    <category term="工具" />
    <category term="jquery" />
    <category term="jquery插件" />
    <category term="js" />
    <category term="css" />
    <category term="php" />
    <category term="web" />
    <category term="代码" />
    <category term="压缩" />
    <category term="说说" />
    <category term="趣闻" />
    <category term="php服务器" />
    <category term="随笔" />
    <category term="php实例" />
    <category term="nginx" />
    <category term="转载" />
    <category term="php库" />
    <category term="互联" />
    <category term="项目实战" />
    <category term="javascript" />
    <category term="漏洞" />
    <category term="php应用" />
    <category term="浮点" />
    <category term="http" />
    <category term="http服务器" />
    <category term="负载均衡" />
    <category term="kali" />
    <category term="kali安装" />
    <category term="农业系统" />
    <category term="系统设计" />
    <category term="克莱姆法则" />
    <category term="行列式" />
    <category term="n阶行列式" />
    <category term="支付系统" />
    <category term="支付" />
    <category term="centos" />
    <category term="linux" />
    <category term="apache优化" />
    <category term="apache隐藏index" />
    <category term="nginx优化" />
    <category term="nginx隐藏index" />
    <category term="日常" />
    <category term="seo" />
    <category term="优化" />
    <category term="摘要" />
    <category term="文章" />
    <category term="游记" />
    <category term="ca证书" />
    <category term="证书生成" />
    <category term="二战" />
    <category term="二战熊" />
    <category term="西伯利亚熊" />
    <category term="centos软件" />
    <category term="yum仓库" />
    <category term="软件" />
    <category term="centos安装chromium报错" />
    <category term="chromium安装报错" />
    <category term="svn" />
    <category term="代码提交" />
    <category term="deb" />
    <category term="deb/rpm互转" />
    <category term="deb转rpm" />
    <category term="rpm互转" />
    <category term="centos7安装steam" />
    <category term="centos安装steam" />
    <category term="centos安装吃鸡steam" />
    <category term="linux安装steam" />
    <category term="steam安装" />
    <category term="centos软件安装" />
    <category term="centos6.5" />
    <category term="linux系统" />
    <category term="centos7安装Redis Desktop Manager" />
    <category term="centos7安装redis桌面" />
    <category term="centos安装redis桌面" />
    <category term="linux安装centos7安装Redis Desktop Manager" />
    <category term="Redis Desktop Manager" />
    <category term="redis桌面" />
    <category term="centos7" />
    <category term="centos7-wine" />
    <category term="wine" />
    <category term="wine安装" />
    <category term="root密码" />
    <category term="root密码重置" />
    <category term="忘记root密码" />
    <category term="memcache" />
    <category term="memcached" />
    <category term="生活手记" />
    <category term="艾瑞可erik" />
    <category term="程序员" />
    <category term="开源云" />
    <category term="容器" />
    <category term="cncf" />
    <category term="监控" />
    <category term="composer" />
    <category term="composer部署" />
    <category term="内网部署composer" />
    <category term="cphalcon" />
    <category term="cphalcon报错" />
    <category term="css中的em" />
    <category term="响应式字体" />
    <category term="响应式布局样式" />
    <category term="proxy代理搭建" />
    <category term="代理服务器搭建" />
    <category term="proxy服务器" />
    <category term="查找" />
    <category term="排序" />
    <category term="快速排序" />
    <category term="冒泡排序" />
    <category term="二分查找" />
    <category term="datahub" />
    <category term="datahub安装" />
    <category term="deepin" />
    <category term="emergency" />
    <category term="emergency mode" />
    <category term="deepin黑屏" />
    <category term="清理系统" />
    <category term="清理c盘" />
    <category term="dns" />
    <category term="域名监测" />
    <category term="网站监测" />
    <category term="docker" />
    <category term="php安装" />
    <category term="杂谈" />
    <category term="ecshop" />
    <category term="框架" />
    <category term="beego数据分页" />
    <category term="分页" />
    <category term="elasticsearch" />
    <category term="elasticsearch搭建" />
    <category term="elasticsearch集群" />
    <category term="系统" />
    <category term="emm" />
    <category term="mdm" />
    <category term="phone" />
    <category term="手机" />
    <category term="新闻" />
    <category term="免费" />
    <category term="jenkis" />
    <category term="jenkis教程" />
    <category term="随笔吐槽" />
    <category term="算法" />
    <category term="ping" />
    <category term="ping服务器" />
    <category term="各大网站ping" />
    <category term="搜引擎ping服务器" />
    <category term="go获取ip" />
    <category term="im" />
    <category term="go中pdf生成" />
    <category term="go中限流" />
    <category term="go对接快递签名" />
    <category term="go时间获取" />
    <category term="go类型转换" />
    <category term="微服务" />
    <category term="go-zero" />
    <category term="rpc" />
    <category term="go加密" />
    <category term="go解密" />
    <category term="归" />
    <category term="吐槽" />
    <category term="php大全" />
    <category term="php资料" />
    <category term="hadoop" />
    <category term="hadoop2.8.0" />
    <category term="hadoop安装教程" />
    <category term="hadoop安装详细教程" />
    <category term="hadoop教程" />
    <category term="hadoop部署" />
    <category term="hadoop3" />
    <category term="hadoop配置" />
    <category term="log4j2" />
    <category term="数据库" />
    <category term="hbase安装教程" />
    <category term="hbase" />
    <category term="http1.1" />
    <category term="http2.0" />
    <category term="会话" />
    <category term="会话原理" />
    <category term="hyperf" />
    <category term="杂录" />
    <category term="新冠肺炎" />
    <category term="springboot" />
    <category term="springboot内网部署" />
    <category term="linux恢复" />
    <category term="linux误删" />
    <category term="linux命令" />
    <category term="linux命令汇总" />
    <category term="jenkins" />
    <category term="jetbtrains" />
    <category term="phpstorm" />
    <category term="搜索引擎" />
    <category term="图片" />
    <category term="素材" />
    <category term="jq" />
    <category term="jq侧边导航" />
    <category term="侧边导航" />
    <category term="js判断浏览器" />
    <category term="js判断浏览器版本" />
    <category term="判断浏览器" />
    <category term="浏览器版本判断" />
    <category term="获取浏览器信息" />
    <category term="kali右键汉化" />
    <category term="kali桌面右键汉化" />
    <category term="kali右键创建文件" />
    <category term="区块链" />
    <category term="lanmp" />
    <category term="php环境独立配置" />
    <category term="服务器" />
    <category term="劳动纠纷" />
    <category term="追缴工资" />
    <category term="申请仲裁" />
    <category term="flash" />
    <category term="表单" />
    <category term="linux报错" />
    <category term="linux中update-command-not-found" />
    <category term="linux运行命令报错" />
    <category term="web前端" />
    <category term="web优化" />
    <category term="撮合算法" />
    <category term="撮合" />
    <category term="php撮合算法" />
    <category term="maven搭建库" />
    <category term="maven" />
    <category term="maven内网库" />
    <category term="高级缓存配置" />
    <category term="mongodb" />
    <category term="mongodb权限" />
    <category term="可穿戴设备" />
    <category term="mysql" />
    <category term="分库分表" />
    <category term="mysql应对千万级" />
    <category term="mysql瓶颈" />
    <category term="mysql瓶颈解决办法" />
    <category term="redis" />
    <category term="数据一致性" />
    <category term="mysql消息" />
    <category term="mysql队列" />
    <category term="mysql高并发" />
    <category term="mysql存储" />
    <category term="mysql引擎" />
    <category term="mysql数据表设计选择" />
    <category term="mysql监控" />
    <category term="mysql性能" />
    <category term="内网支付" />
    <category term="内网穿透" />
    <category term="支付接口本地化开发" />
    <category term="本地挂网" />
    <category term="穿透" />
    <category term="go" />
    <category term="new和make的区别" />
    <category term="红包算法" />
    <category term="深圳劳动法服务部门" />
    <category term="非关系型数据库" />
    <category term="onethink" />
    <category term="oop" />
    <category term="php管理系统" />
    <category term="开放接口开发" />
    <category term="开源工具" />
    <category term="桌面共享工具" />
    <category term="openresty" />
    <category term="openvas" />
    <category term="openvas安装" />
    <category term="php变量" />
    <category term="php超级全局变量" />
    <category term="php超级变量" />
    <category term="php基本类型" />
    <category term="php数据类型" />
    <category term="php设计模式" />
    <category term="php对接微信支付" />
    <category term="微信支付" />
    <category term="微信支付回调" />
    <category term="游戏" />
    <category term="php函数" />
    <category term="php随机数" />
    <category term="php获取闰年" />
    <category term="闰年.php时间" />
    <category term="php环境" />
    <category term="php集成环境" />
    <category term="服务器集成环境" />
    <category term="数组函数" />
    <category term="数组排序函数" />
    <category term="php数学函数" />
    <category term="php面试题" />
    <category term="php面向对象" />
    <category term="面向对象" />
    <category term="php-zookeeper" />
    <category term="zookeeper3.5.5" />
    <category term="php-zookeeper扩展" />
    <category term="php串口开发" />
    <category term="php倒计时" />
    <category term="php时间" />
    <category term="倒计时" />
    <category term="计算时间" />
    <category term="PHP数组" />
    <category term="字符串函数" />
    <category term="排序函数" />
    <category term="php的SPL" />
    <category term="SPL手册" />
    <category term="PHP算法" />
    <category term="php递归" />
    <category term="递归" />
    <category term="phpunit" />
    <category term="phpunit安装" />
    <category term="php过滤" />
    <category term="过滤" />
    <category term="foreach" />
    <category term="foreach报错" />
    <category term="php中foreach报错" />
    <category term="php中if" />
    <category term="php中if判断" />
    <category term="php的if" />
    <category term="php字符串" />
    <category term="php7中sphinx" />
    <category term="php7中sphinx扩展" />
    <category term="sphinx扩展" />
    <category term="python" />
    <category term="python库" />
    <category term="a标签" />
    <category term="a标签虚线" />
    <category term="虚线框" />
    <category term="R语言" />
    <category term="数据随机化" />
    <category term="redis总结" />
    <category term="redis命令" />
    <category term="redis监控" />
    <category term="redis锁" />
    <category term="redis分布式锁" />
    <category term="任意金额输入" />
    <category term="10元、5元、2元" />
    <category term="队列" />
    <category term="栈" />
    <category term="顺序表" />
    <category term="链表" />
    <category term="数据结构" />
    <category term="线性结构" />
    <category term="浏览器禁止操作视频" />
    <category term="禁止视频" />
    <category term="响应慢" />
    <category term="页面优化" />
    <category term="js编辑" />
    <category term="runjs" />
    <category term="在线编辑" />
    <category term="rust" />
    <category term="rust配置" />
    <category term="seajs" />
    <category term="session" />
    <category term="路由器烧录" />
    <category term="烧录" />
    <category term="极路由2烧录" />
    <category term="砖头烧录" />
    <category term="免费服务器" />
    <category term="空间" />
    <category term="资源" />
    <category term="深圳政府电话" />
    <category term="深圳电话" />
    <category term="特区电话" />
    <category term="居住证" />
    <category term="居住证签注" />
    <category term="深圳新居住证" />
    <category term="国庆骑行" />
    <category term="深圳珠海骑行" />
    <category term="骑行" />
    <category term="世界那么大" />
    <category term="css3" />
    <category term="css在线生成工具" />
    <category term="css工具" />
    <category term="php正则" />
    <category term="正则" />
    <category term="shodan" />
    <category term="黑谷歌" />
    <category term="黒帽搜素" />
    <category term="shopex" />
    <category term="可视化数据" />
    <category term="数据" />
    <category term="数据表" />
    <category term="json" />
    <category term="json数组" />
    <category term="json解析" />
    <category term="socket通信" />
    <category term="socket多进程" />
    <category term="socket" />
    <category term="sql" />
    <category term="sql优化" />
    <category term="css3兼容360浏览器兼容模式" />
    <category term="css圆角" />
    <category term="结构体转map" />
    <category term="config" />
    <category term="thinkphp" />
    <category term="配置文件" />
    <category term="树" />
    <category term="二叉树" />
    <category term="js插件" />
    <category term="web自适应" />
    <category term="响应式布局" />
    <category term="响应式所有分辨率" />
    <category term="自适应布局" />
    <category term="自适应所有分辨率" />
    <category term="webman" />
    <category term="mysql设置超时，超时" />
    <category term="markdown" />
    <category term="wget" />
    <category term="wget抓取" />
    <category term="网站抓取" />
    <category term="我在" />
    <category term="wordpress" />
    <category term="wordpress标签" />
    <category term="wpscan" />
    <category term="usbrip" />
    <category term="无限极分类" />
    <category term="php无限极" />
    <category term="分类tree" />
    <category term="无限极分类树型" />
    <category term="域名合并" />
    <category term="xhprof" />
    <category term="laravel" />
    <category term="composer插件" />
    <category term="html" />
    <category term="响应式分辨率" />
    <category term="响应式调试" />
    <category term="自适应屏幕" />
    <category term="携程" />
    <category term="携程攻击" />
    <category term="携程网站瘫痪" />
    <category term="物理删除" />
    <category term="3D" />
    <category term="动画" />
    <category term="平台" />
    <category term="虚幻4引擎编辑" />
    <category term="生成唯一id" />
    <category term="生成id" />
    <category term="发邮件" />
    <category term="邮件函数" />
    <category term="储蓄卡免年费" />
    <category term="银行卡" />
    <category term="银行卡免年费" />
    <category term="composer安装" />
    <category term="composer配置" />
    <category term="项目创建composer" />
    <category term="mysql优化" />
    <category term="mysql读写优化" />
    <category term="数据库优化，mysql语句优化" />
    <category term="php加密" />
    <category term="php技术" />
    <category term="夕阳" />
    <category term="mysql函数" />
    <category term="php中mysql函数" />
    <category term="互联网时代" />
    <category term="开源技术" />
    <category term="web框架" />
    <category term="php抓取图片" />
    <category term="php批量抓取页面图片" />
    <category term="邮箱服务器" />
    <category term="正则表达式" />
    <category term="翻墙" />
    <category term="谷歌" />
    <category term="谷歌搜索" />
    <entry>
        <id>https://erik.xyz/2014/12/29/21-ge-shi-yong-bian-li-de-php-dai-ma/</id>
        <title>21个实用便利的PHP代码</title>
        <link rel="alternate" href="https://erik.xyz/2014/12/29/21-ge-shi-yong-bian-li-de-php-dai-ma/"/>
        <content type="html">&lt;link rel=&#34;stylesheet&#34; class=&#34;aplayer-secondary-style-marker&#34; href=&#34;/assets/css/APlayer.min.css&#34;&gt;&lt;script src=&#34;/assets/js/APlayer.min.js&#34; class=&#34;aplayer-secondary-script-marker&#34;&gt;&lt;/script&gt;&lt;p&gt;作者: &lt;a href=&#34;http://paranimage.com/author/admin/&#34; title=&#34;由帕兰发布&#34;&gt;帕兰&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;1-PHP可阅读随机字符串&#34;&gt;&lt;a href=&#34;#1-PHP可阅读随机字符串&#34; class=&#34;headerlink&#34; title=&#34;1. PHP可阅读随机字符串&#34;&gt;&lt;/a&gt;1. PHP可阅读随机字符串&lt;/h3&gt;&lt;p&gt;此代码将创建一个可阅读的字符串，使其更接近词典中的单词，实用且具有密码验证功能。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/**************
*@length - length of random string (must be a multiple of 2)
**************/
function readable_random_string($length = 6)&amp;#123;
    $conso=array(&amp;quot;b&amp;quot;,&amp;quot;c&amp;quot;,&amp;quot;d&amp;quot;,&amp;quot;f&amp;quot;,&amp;quot;g&amp;quot;,&amp;quot;h&amp;quot;,&amp;quot;j&amp;quot;,&amp;quot;k&amp;quot;,&amp;quot;l&amp;quot;,
    &amp;quot;m&amp;quot;,&amp;quot;n&amp;quot;,&amp;quot;p&amp;quot;,&amp;quot;r&amp;quot;,&amp;quot;s&amp;quot;,&amp;quot;t&amp;quot;,&amp;quot;v&amp;quot;,&amp;quot;w&amp;quot;,&amp;quot;x&amp;quot;,&amp;quot;y&amp;quot;,&amp;quot;z&amp;quot;);
    $vocal=array(&amp;quot;a&amp;quot;,&amp;quot;e&amp;quot;,&amp;quot;i&amp;quot;,&amp;quot;o&amp;quot;,&amp;quot;u&amp;quot;);
    $password=&amp;quot;&amp;quot;;
    srand ((double)microtime()*1000000);
    $max = $length/2;
    for($i=1; $i&amp;lt;=$max; $i++)
    &amp;#123;
    $password.=$conso[rand(0,19)];
    $password.=$vocal[rand(0,4)];
    &amp;#125;
    return $password;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;
&lt;h3 id=&#34;2-PHP生成一个随机字符串&#34;&gt;&lt;a href=&#34;#2-PHP生成一个随机字符串&#34; class=&#34;headerlink&#34; title=&#34;2. PHP生成一个随机字符串&#34;&gt;&lt;/a&gt;2. PHP生成一个随机字符串&lt;/h3&gt;&lt;p&gt;如果不需要可阅读的字符串，使用此函数替代，即可创建一个随机字符串，作为用户的随机密码等。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/*************
*@l - length of random string
*/
function generate_rand($l)&amp;#123;
  $c= &amp;quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&amp;quot;;
  srand((double)microtime()*1000000);
  for($i=0; $i&amp;lt;$l; $i++) &amp;#123;
      $rand.= $c[rand()%strlen($c)];
  &amp;#125;
  return $rand;
 &amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;3-PHP编码电子邮件地址&#34;&gt;&lt;a href=&#34;#3-PHP编码电子邮件地址&#34; class=&#34;headerlink&#34; title=&#34;3. PHP编码电子邮件地址&#34;&gt;&lt;/a&gt;3. PHP编码电子邮件地址&lt;/h3&gt;&lt;p&gt;使用此代码，可以将任何电子邮件地址编码为 HTML 字符实体，以防止被垃圾邮件程序收集。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function encode_email($email=&amp;#39;info@domain.com&amp;#39;, $linkText=&amp;#39;Contact Us&amp;#39;, $attrs =&amp;#39;class=&amp;quot;emailencoder&amp;quot;&amp;#39; )
&amp;#123;
    // remplazar aroba y puntos
    $email = str_replace(&amp;#39;@&amp;#39;, &amp;#39;&amp;amp;#64;&amp;#39;, $email);
    $email = str_replace(&amp;#39;.&amp;#39;, &amp;#39;&amp;amp;#46;&amp;#39;, $email);
    $email = str_split($email, 5);  

    $linkText = str_replace(&amp;#39;@&amp;#39;, &amp;#39;&amp;amp;#64;&amp;#39;, $linkText);
    $linkText = str_replace(&amp;#39;.&amp;#39;, &amp;#39;&amp;amp;#46;&amp;#39;, $linkText);
    $linkText = str_split($linkText, 5);  

    $part1 = &amp;#39;&amp;lt;a href=&amp;quot;ma&amp;#39;;
    $part2 = &amp;#39;ilto&amp;amp;#58;&amp;#39;;
    $part3 = &amp;#39;&amp;quot; &amp;#39;. $attrs .&amp;#39; &amp;gt;&amp;#39;;
    $part4 = &amp;#39;&amp;lt;/a&amp;gt;&amp;#39;;  

    $encoded = &amp;#39;&amp;lt;script type=&amp;quot;text/javascript&amp;quot;&amp;gt;&amp;#39;;
    $encoded .= &amp;quot;document.write(&amp;#39;$part1&amp;#39;);&amp;quot;;
    $encoded .= &amp;quot;document.write(&amp;#39;$part2&amp;#39;);&amp;quot;;
    foreach($email as $e)
    &amp;#123;
            $encoded .= &amp;quot;document.write(&amp;#39;$e&amp;#39;);&amp;quot;;
    &amp;#125;
    $encoded .= &amp;quot;document.write(&amp;#39;$part3&amp;#39;);&amp;quot;;
    foreach($linkText as $l)
    &amp;#123;
            $encoded .= &amp;quot;document.write(&amp;#39;$l&amp;#39;);&amp;quot;;
    &amp;#125;
    $encoded .= &amp;quot;document.write(&amp;#39;$part4&amp;#39;);&amp;quot;;
    $encoded .= &amp;#39;&amp;lt;/script&amp;gt;&amp;#39;;  

    return $encoded;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;4-PHP验证邮件地址&#34;&gt;&lt;a href=&#34;#4-PHP验证邮件地址&#34; class=&#34;headerlink&#34; title=&#34;4. PHP验证邮件地址&#34;&gt;&lt;/a&gt;4. PHP验证邮件地址&lt;/h3&gt;&lt;p&gt;电子邮件验证也许是中最常用的网页表单验证，此代码除了验证电子邮件地址，也可以选择检查邮件域所属 DNS 中的 MX 记录，使邮件验证功能更加强大。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function is_valid_email($email, $test_mx = false)
&amp;#123;
    if(eregi(&amp;quot;^([_a-z0-9-]+)(\.[_a-z0-9-]+)*@([a-z0-9-]+)(\.[a-z0-9-]+)*(\.[a-z]&amp;#123;2,4&amp;#125;)$&amp;quot;, $email))
        if($test_mx)
        &amp;#123;
            list($username, $domain) = split(&amp;quot;@&amp;quot;, $email);
            return getmxrr($domain, $mxrecords);
        &amp;#125;
        else
            return true;
    else
        return false;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;5-PHP列出目录内容&#34;&gt;&lt;a href=&#34;#5-PHP列出目录内容&#34; class=&#34;headerlink&#34; title=&#34;5. PHP列出目录内容&#34;&gt;&lt;/a&gt;5. PHP列出目录内容&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;function list_files($dir)
&amp;#123;
    if(is_dir($dir))
    &amp;#123;
        if($handle = opendir($dir))
        &amp;#123;
            while(($file = readdir($handle)) !== false)
            &amp;#123;
                if($file != &amp;quot;.&amp;quot; &amp;amp;&amp;amp; $file != &amp;quot;..&amp;quot; &amp;amp;&amp;amp; $file != &amp;quot;Thumbs.db&amp;quot;)
                &amp;#123;
                    echo &amp;#39;&amp;lt;a target=&amp;quot;_blank&amp;quot; href=&amp;quot;&amp;#39;.$dir.$file.&amp;#39;&amp;quot;&amp;gt;&amp;#39;.$file.&amp;#39;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&amp;#39;.&amp;quot;\n&amp;quot;;
                &amp;#125;
            &amp;#125;
            closedir($handle);
        &amp;#125;
    &amp;#125;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;6-PHP销毁目录&#34;&gt;&lt;a href=&#34;#6-PHP销毁目录&#34; class=&#34;headerlink&#34; title=&#34;6. PHP销毁目录&#34;&gt;&lt;/a&gt;6. PHP销毁目录&lt;/h3&gt;&lt;p&gt;删除一个目录，包括它的内容。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/*****
*@dir - Directory to destroy
*@virtual[optional]- whether a virtual directory
*/
function destroyDir($dir, $virtual = false)
&amp;#123;
    $ds = DIRECTORY_SEPARATOR;
    $dir = $virtual ? realpath($dir) : $dir;
    $dir = substr($dir, -1) == $ds ? substr($dir, 0, -1) : $dir;
    if (is_dir($dir) &amp;amp;&amp;amp; $handle = opendir($dir))
    &amp;#123;
        while ($file = readdir($handle))
        &amp;#123;
            if ($file == &amp;#39;.&amp;#39; || $file == &amp;#39;..&amp;#39;)
            &amp;#123;
                continue;
            &amp;#125;
            elseif (is_dir($dir.$ds.$file))
            &amp;#123;
                destroyDir($dir.$ds.$file);
            &amp;#125;
            else
            &amp;#123;
                unlink($dir.$ds.$file);
            &amp;#125;
        &amp;#125;
        closedir($handle);
        rmdir($dir);
        return true;
    &amp;#125;
    else
    &amp;#123;
        return false;
    &amp;#125;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;7-PHP解析-JSON-数据&#34;&gt;&lt;a href=&#34;#7-PHP解析-JSON-数据&#34; class=&#34;headerlink&#34; title=&#34;7. PHP解析 JSON 数据&#34;&gt;&lt;/a&gt;7. PHP解析 JSON 数据&lt;/h3&gt;&lt;p&gt;与大多数流行的 Web 服务如 Twitter 通过开放 API 来提供数据一样，它总是能够知道如何解析 API 数据的各种传送格式，包括 JSON，XML 等等。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$json_string=&amp;#39;&amp;#123;&amp;quot;id&amp;quot;:1,&amp;quot;name&amp;quot;:&amp;quot;foo&amp;quot;,&amp;quot;email&amp;quot;:&amp;quot;foo@foobar.com&amp;quot;,&amp;quot;interest&amp;quot;:[&amp;quot;wordpress&amp;quot;,&amp;quot;php&amp;quot;]&amp;#125; &amp;#39;;
$obj=json_decode($json_string);
echo $obj-&amp;gt;name; //prints foo
echo $obj-&amp;gt;interest[1]; //prints php
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;8-PHP解析-XML-数据&#34;&gt;&lt;a href=&#34;#8-PHP解析-XML-数据&#34; class=&#34;headerlink&#34; title=&#34;8. PHP解析 XML 数据&#34;&gt;&lt;/a&gt;8. PHP解析 XML 数据&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;//xml string
$xml_string=&amp;quot;&amp;lt;?xml version=&amp;#39;1.0&amp;#39;?&amp;gt;
&amp;lt;users&amp;gt;
   &amp;lt;user id=&amp;#39;398&amp;#39;&amp;gt;
      &amp;lt;name&amp;gt;Foo&amp;lt;/name&amp;gt;
      &amp;lt;email&amp;gt;foo@bar.com&amp;lt;/name&amp;gt;
   &amp;lt;/user&amp;gt;
   &amp;lt;user id=&amp;#39;867&amp;#39;&amp;gt;
      &amp;lt;name&amp;gt;Foobar&amp;lt;/name&amp;gt;
      &amp;lt;email&amp;gt;foobar@foo.com&amp;lt;/name&amp;gt;
   &amp;lt;/user&amp;gt;
&amp;lt;/users&amp;gt;&amp;quot;;  

//load the xml string using simplexml
$xml = simplexml_load_string($xml_string);  

//loop through the each node of user
foreach ($xml-&amp;gt;user as $user)
&amp;#123;
   //access attribute
   echo $user[&amp;#39;id&amp;#39;], &amp;#39;  &amp;#39;;
   //subnodes are accessed by -&amp;gt; operator
   echo $user-&amp;gt;name, &amp;#39;  &amp;#39;;
   echo $user-&amp;gt;email, &amp;#39;&amp;lt;br /&amp;gt;&amp;#39;;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;9-PHP创建日志缩略名&#34;&gt;&lt;a href=&#34;#9-PHP创建日志缩略名&#34; class=&#34;headerlink&#34; title=&#34;9. PHP创建日志缩略名&#34;&gt;&lt;/a&gt;9. PHP创建日志缩略名&lt;/h3&gt;&lt;p&gt;创建用户友好的日志缩略名。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function create_slug($string)&amp;#123;
    $slug=preg_replace(&amp;#39;/[^A-Za-z0-9-]+/&amp;#39;, &amp;#39;-&amp;#39;, $string);
    return $slug;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;10-PHP获取客户端真实-IP-地址&#34;&gt;&lt;a href=&#34;#10-PHP获取客户端真实-IP-地址&#34; class=&#34;headerlink&#34; title=&#34;10. PHP获取客户端真实 IP 地址&#34;&gt;&lt;/a&gt;10. PHP获取客户端真实 IP 地址&lt;/h3&gt;&lt;p&gt;该函数将获取用户的真实 IP 地址，即便他使用代理服务器。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function getRealIpAddr()
&amp;#123;
    if (!emptyempty($_SERVER[&amp;#39;HTTP_CLIENT_IP&amp;#39;]))
    &amp;#123;
        $ip=$_SERVER[&amp;#39;HTTP_CLIENT_IP&amp;#39;];
    &amp;#125;
    elseif (!emptyempty($_SERVER[&amp;#39;HTTP_X_FORWARDED_FOR&amp;#39;]))
    //to check ip is pass from proxy
    &amp;#123;
        $ip=$_SERVER[&amp;#39;HTTP_X_FORWARDED_FOR&amp;#39;];
    &amp;#125;
    else
    &amp;#123;
        $ip=$_SERVER[&amp;#39;REMOTE_ADDR&amp;#39;];
    &amp;#125;
    return $ip;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;11-PHP强制性文件下载&#34;&gt;&lt;a href=&#34;#11-PHP强制性文件下载&#34; class=&#34;headerlink&#34; title=&#34;11. PHP强制性文件下载&#34;&gt;&lt;/a&gt;11. PHP强制性文件下载&lt;/h3&gt;&lt;p&gt;为用户提供强制性的文件下载功能。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/********************
*@file - path to file
*/
function force_download($file)
&amp;#123;
    if ((isset($file))&amp;amp;&amp;amp;(file_exists($file))) &amp;#123;
       header(&amp;quot;Content-length: &amp;quot;.filesize($file));
       header(&amp;#39;Content-Type: application/octet-stream&amp;#39;);
       header(&amp;#39;Content-Disposition: attachment; filename=&amp;quot;&amp;#39; . $file . &amp;#39;&amp;quot;&amp;#39;);
       readfile(&amp;quot;$file&amp;quot;);
    &amp;#125; else &amp;#123;
       echo &amp;quot;No file selected&amp;quot;;
    &amp;#125;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;12-PHP创建标签云&#34;&gt;&lt;a href=&#34;#12-PHP创建标签云&#34; class=&#34;headerlink&#34; title=&#34;12. PHP创建标签云&#34;&gt;&lt;/a&gt;12. PHP创建标签云&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;function getCloud( $data = array(), $minFontSize = 12, $maxFontSize = 30 )
&amp;#123;
    $minimumCount = min( array_values( $data ) );
    $maximumCount = max( array_values( $data ) );
    $spread       = $maximumCount - $minimumCount;
    $cloudHTML    = &amp;#39;&amp;#39;;
    $cloudTags    = array();  

    $spread == 0 &amp;amp;&amp;amp; $spread = 1;  

    foreach( $data as $tag =&amp;gt; $count )
    &amp;#123;
        $size = $minFontSize + ( $count - $minimumCount )
            * ( $maxFontSize - $minFontSize ) / $spread;
        $cloudTags[] = &amp;#39;&amp;lt;a style=&amp;quot;font-size: &amp;#39; . floor( $size ) . &amp;#39;px&amp;#39;
        . &amp;#39;&amp;quot; href=&amp;quot;#&amp;quot; title=&amp;quot;\&amp;#39;&amp;#39; . $tag  .
        &amp;#39;\&amp;#39; returned a count of &amp;#39; . $count . &amp;#39;&amp;quot;&amp;gt;&amp;#39;
        . htmlspecialchars( stripslashes( $tag ) ) . &amp;#39;&amp;lt;/a&amp;gt;&amp;#39;;
    &amp;#125;  

    return join( &amp;quot;\n&amp;quot;, $cloudTags ) . &amp;quot;\n&amp;quot;;
&amp;#125;
/**************************
****   Sample usage    ***/
$arr = Array(&amp;#39;Actionscript&amp;#39; =&amp;gt; 35, &amp;#39;Adobe&amp;#39; =&amp;gt; 22, &amp;#39;Array&amp;#39; =&amp;gt; 44, &amp;#39;Background&amp;#39; =&amp;gt; 43,
    &amp;#39;Blur&amp;#39; =&amp;gt; 18, &amp;#39;Canvas&amp;#39; =&amp;gt; 33, &amp;#39;Class&amp;#39; =&amp;gt; 15, &amp;#39;Color Palette&amp;#39; =&amp;gt; 11, &amp;#39;Crop&amp;#39; =&amp;gt; 42,
    &amp;#39;Delimiter&amp;#39; =&amp;gt; 13, &amp;#39;Depth&amp;#39; =&amp;gt; 34, &amp;#39;Design&amp;#39; =&amp;gt; 8, &amp;#39;Encode&amp;#39; =&amp;gt; 12, &amp;#39;Encryption&amp;#39; =&amp;gt; 30,
    &amp;#39;Extract&amp;#39; =&amp;gt; 28, &amp;#39;Filters&amp;#39; =&amp;gt; 42);
echo getCloud($arr, 12, 36);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;13-PHP寻找两个字符串的相似性&#34;&gt;&lt;a href=&#34;#13-PHP寻找两个字符串的相似性&#34; class=&#34;headerlink&#34; title=&#34;13. PHP寻找两个字符串的相似性&#34;&gt;&lt;/a&gt;13. PHP寻找两个字符串的相似性&lt;/h3&gt;&lt;p&gt;PHP 提供了一个极少使用的 similar_text 函数，但此函数非常有用，用于比较两个字符串并返回相似程度的百分比。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;similar_text($string1, $string2, $percent);
//$percent will have the percentage of similarity
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;14-PHP在应用程序中使用-Gravatar-通用头像&#34;&gt;&lt;a href=&#34;#14-PHP在应用程序中使用-Gravatar-通用头像&#34; class=&#34;headerlink&#34; title=&#34;14. PHP在应用程序中使用 Gravatar 通用头像&#34;&gt;&lt;/a&gt;14. PHP在应用程序中使用 Gravatar 通用头像&lt;/h3&gt;&lt;p&gt;随着 WordPress 越来越普及，Gravatar 也随之流行。由于 Gravatar 提供了易于使用的 API，将其纳入应用程序也变得十分方便。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/******************
*@email - Email address to show gravatar for
*@size - size of gravatar
*@default - URL of default gravatar to use
*@rating - rating of Gravatar(G, PG, R, X)
*/
function show_gravatar($email, $size, $default, $rating)
&amp;#123;
    echo &amp;#39;&amp;lt;img src=&amp;quot;http://www.gravatar.com/avatar.php?gravatar_id=&amp;#39;.md5($email).
        &amp;#39;&amp;amp;default=&amp;#39;.$default.&amp;#39;&amp;amp;size=&amp;#39;.$size.&amp;#39;&amp;amp;rating=&amp;#39;.$rating.&amp;#39;&amp;quot; width=&amp;quot;&amp;#39;.$size.&amp;#39;px&amp;quot;
        height=&amp;quot;&amp;#39;.$size.&amp;#39;px&amp;quot; /&amp;gt;&amp;#39;;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;15-PHP在字符断点处截断文字&#34;&gt;&lt;a href=&#34;#15-PHP在字符断点处截断文字&#34; class=&#34;headerlink&#34; title=&#34;15. PHP在字符断点处截断文字&#34;&gt;&lt;/a&gt;15. PHP在字符断点处截断文字&lt;/h3&gt;&lt;p&gt;所谓断字 (word break)，即一个单词可在转行时断开的地方。这一函数将在断字处截断字符串。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// Original PHP code by Chirp Internet: www.chirp.com.au
// Please acknowledge use of this code by including this header.
function myTruncate($string, $limit, $break=&amp;quot;.&amp;quot;, $pad=&amp;quot;...&amp;quot;) &amp;#123;
    // return with no change if string is shorter than $limit
    if(strlen($string) &amp;lt;= $limit)
        return $string;   

    // is $break present between $limit and the end of the string?
    if(false !== ($breakpoint = strpos($string, $break, $limit))) &amp;#123;
        if($breakpoint &amp;lt; strlen($string) - 1) &amp;#123;
            $string = substr($string, 0, $breakpoint) . $pad;
        &amp;#125;
    &amp;#125;
    return $string;
&amp;#125;
/***** Example ****/
$short_string=myTruncate($long_string, 100, &amp;#39; &amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;16-PHP文件-Zip-压缩&#34;&gt;&lt;a href=&#34;#16-PHP文件-Zip-压缩&#34; class=&#34;headerlink&#34; title=&#34;16. PHP文件 Zip 压缩&#34;&gt;&lt;/a&gt;16. PHP文件 Zip 压缩&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;/* creates a compressed zip file */
function create_zip($files = array(),$destination = &amp;#39;&amp;#39;,$overwrite = false) &amp;#123;
    //if the zip file already exists and overwrite is false, return false
    if(file_exists($destination) &amp;amp;&amp;amp; !$overwrite) &amp;#123; return false; &amp;#125;
    //vars
    $valid_files = array();
    //if files were passed in...
    if(is_array($files)) &amp;#123;
        //cycle through each file
        foreach($files as $file) &amp;#123;
            //make sure the file exists
            if(file_exists($file)) &amp;#123;
                $valid_files[] = $file;
            &amp;#125;
        &amp;#125;
    &amp;#125;
    //if we have good files...
    if(count($valid_files)) &amp;#123;
        //create the archive
        $zip = new ZipArchive();
        if($zip-&amp;gt;open($destination,$overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) &amp;#123;
            return false;
        &amp;#125;
        //add the files
        foreach($valid_files as $file) &amp;#123;
            $zip-&amp;gt;addFile($file,$file);
        &amp;#125;
        //debug
        //echo &amp;#39;The zip archive contains &amp;#39;,$zip-&amp;gt;numFiles,&amp;#39; files with a status of &amp;#39;,$zip-&amp;gt;status;  

        //close the zip -- done!
        $zip-&amp;gt;close();  

        //check to make sure the file exists
        return file_exists($destination);
    &amp;#125;
    else
    &amp;#123;
        return false;
    &amp;#125;
&amp;#125;
/***** Example Usage ***/
$files=array(&amp;#39;file1.jpg&amp;#39;, &amp;#39;file2.jpg&amp;#39;, &amp;#39;file3.gif&amp;#39;);
create_zip($files, &amp;#39;myzipfile.zip&amp;#39;, true);
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;17-PHP解压缩-Zip-文件&#34;&gt;&lt;a href=&#34;#17-PHP解压缩-Zip-文件&#34; class=&#34;headerlink&#34; title=&#34;17. PHP解压缩 Zip 文件&#34;&gt;&lt;/a&gt;17. PHP解压缩 Zip 文件&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;/**********************
*@file - path to zip file
*@destination - destination directory for unzipped files
*/
function unzip_file($file, $destination)&amp;#123;
    // create object
    $zip = new ZipArchive() ;
    // open archive
    if ($zip-&amp;gt;open($file) !== TRUE) &amp;#123;
        die (’Could not open archive’);
    &amp;#125;
    // extract contents to destination directory
    $zip-&amp;gt;extractTo($destination);
    // close archive
    $zip-&amp;gt;close();
    echo &amp;#39;Archive extracted to directory&amp;#39;;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;18-PHP为-URL-地址预设-http-字符串&#34;&gt;&lt;a href=&#34;#18-PHP为-URL-地址预设-http-字符串&#34; class=&#34;headerlink&#34; title=&#34;18. PHP为 URL 地址预设 http 字符串&#34;&gt;&lt;/a&gt;18. PHP为 URL 地址预设 http 字符串&lt;/h3&gt;&lt;p&gt;有时需要接受一些表单中的网址输入，但用户很少添加 http:// 字段，此代码将为网址添加该字段。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if (!preg_match(&amp;quot;/^(http|ftp):/&amp;quot;, $_POST[&amp;#39;url&amp;#39;])) &amp;#123;
   $_POST[&amp;#39;url&amp;#39;] = &amp;#39;http://&amp;#39;.$_POST[&amp;#39;url&amp;#39;];
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;19-PHP将网址字符串转换成超级链接&#34;&gt;&lt;a href=&#34;#19-PHP将网址字符串转换成超级链接&#34; class=&#34;headerlink&#34; title=&#34;19. PHP将网址字符串转换成超级链接&#34;&gt;&lt;/a&gt;19. PHP将网址字符串转换成超级链接&lt;/h3&gt;&lt;p&gt;该函数将 URL 和 E-mail 地址字符串转换为可点击的超级链接。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function makeClickableLinks($text) &amp;#123;
 $text = eregi_replace(&amp;#39;(((f|ht)&amp;#123;1&amp;#125;tp://)[-a-zA-Z0-9@:%_+.~#?&amp;amp;//=]+)&amp;#39;,
 &amp;#39;&amp;lt;a href=&amp;quot;\1&amp;quot;&amp;gt;\1&amp;lt;/a&amp;gt;&amp;#39;, $text);
 $text = eregi_replace(&amp;#39;([[:space:]()[&amp;#123;&amp;#125;])(www.[-a-zA-Z0-9@:%_+.~#?&amp;amp;//=]+)&amp;#39;,
 &amp;#39;\1&amp;lt;a href=&amp;quot;http://\2&amp;quot;&amp;gt;\2&amp;lt;/a&amp;gt;&amp;#39;, $text);
 $text = eregi_replace(&amp;#39;([_.0-9a-z-]+@([0-9a-z][0-9a-z-]+.)+[a-z]&amp;#123;2,3&amp;#125;)&amp;#39;,
 &amp;#39;&amp;lt;a href=&amp;quot;mailto:\1&amp;quot;&amp;gt;\1&amp;lt;/a&amp;gt;&amp;#39;, $text);  

return $text;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;20-PHP调整图像尺寸&#34;&gt;&lt;a href=&#34;#20-PHP调整图像尺寸&#34; class=&#34;headerlink&#34; title=&#34;20. PHP调整图像尺寸&#34;&gt;&lt;/a&gt;20. PHP调整图像尺寸&lt;/h3&gt;&lt;p&gt;创建图像缩略图需要许多时间，此代码将有助于了解缩略图的逻辑。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/**********************
*@filename - path to the image
*@tmpname - temporary path to thumbnail
*@xmax - max width
*@ymax - max height
*/
function resize_image($filename, $tmpname, $xmax, $ymax)
&amp;#123;
    $ext = explode(&amp;quot;.&amp;quot;, $filename);
    $ext = $ext[count($ext)-1];  

    if($ext == &amp;quot;jpg&amp;quot; || $ext == &amp;quot;jpeg&amp;quot;)
        $im = imagecreatefromjpeg($tmpname);
    elseif($ext == &amp;quot;png&amp;quot;)
        $im = imagecreatefrompng($tmpname);
    elseif($ext == &amp;quot;gif&amp;quot;)
        $im = imagecreatefromgif($tmpname);  

    $x = imagesx($im);
    $y = imagesy($im);  

    if($x &amp;lt;= $xmax &amp;amp;&amp;amp; $y &amp;lt;= $ymax)
        return $im;  

    if($x &amp;gt;= $y) &amp;#123;
        $newx = $xmax;
        $newy = $newx * $y / $x;
    &amp;#125;
    else &amp;#123;
        $newy = $ymax;
        $newx = $x / $y * $newy;
    &amp;#125;  

    $im2 = imagecreatetruecolor($newx, $newy);
    imagecopyresized($im2, $im, 0, 0, 0, 0, floor($newx), floor($newy), $x, $y);
    return $im2;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;21-PHP检测-Ajax-请求&#34;&gt;&lt;a href=&#34;#21-PHP检测-Ajax-请求&#34; class=&#34;headerlink&#34; title=&#34;21. PHP检测 Ajax 请求&#34;&gt;&lt;/a&gt;21. PHP检测 Ajax 请求&lt;/h3&gt;&lt;p&gt;大多数的 JavaScript 框架如 jQuery，Mootools 等，在发出 Ajax 请求时，都会发送额外的 HTTP_X_REQUESTED_WITH 头部信息，头当他们一个ajax请求，因此你可以在服务器端侦测到 Ajax 请求。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if(!emptyempty($_SERVER[&amp;#39;HTTP_X_REQUESTED_WITH&amp;#39;]) &amp;amp;&amp;amp; strtolower($_SERVER[&amp;#39;HTTP_X_REQUESTED_WITH&amp;#39;]) == &amp;#39;xmlhttprequest&amp;#39;)&amp;#123;
    //If AJAX Request Then
&amp;#125;else&amp;#123;
//something else
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;</content>
        <category term="php" />
        <category term="php服务器" />
        <category term="随笔" />
        <category term="php实例" />
        <updated>2014-12-29T14:07:00.000Z</updated>
    </entry>
</feed>