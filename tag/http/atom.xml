<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://erik.xyz</id>
    <title>艾瑞可erik • Posts by &#34;http&#34; tag • Posts by &#34;undefined&#34; categories</title>
    <link href="https://erik.xyz" />
    <updated>2019-07-17T16:20:00.000Z</updated>
    <category term="php扩展" />
    <category term="php技巧" />
    <category term="php类库" />
    <category term="php资源" />
    <category term="日志" />
    <category term="工具" />
    <category term="jquery" />
    <category term="jquery插件" />
    <category term="js" />
    <category term="css" />
    <category term="php" />
    <category term="web" />
    <category term="代码" />
    <category term="压缩" />
    <category term="php服务器" />
    <category term="随笔" />
    <category term="php实例" />
    <category term="说说" />
    <category term="趣闻" />
    <category term="转载" />
    <category term="nginx" />
    <category term="php库" />
    <category term="互联" />
    <category term="项目实战" />
    <category term="javascript" />
    <category term="漏洞" />
    <category term="php应用" />
    <category term="浮点" />
    <category term="http" />
    <category term="http服务器" />
    <category term="负载均衡" />
    <category term="kali" />
    <category term="kali安装" />
    <category term="农业系统" />
    <category term="系统设计" />
    <category term="克莱姆法则" />
    <category term="行列式" />
    <category term="n阶行列式" />
    <category term="centos" />
    <category term="linux" />
    <category term="支付系统" />
    <category term="支付" />
    <category term="apache优化" />
    <category term="apache隐藏index" />
    <category term="nginx优化" />
    <category term="nginx隐藏index" />
    <category term="日常" />
    <category term="seo" />
    <category term="优化" />
    <category term="摘要" />
    <category term="文章" />
    <category term="游记" />
    <category term="ca证书" />
    <category term="证书生成" />
    <category term="二战" />
    <category term="二战熊" />
    <category term="西伯利亚熊" />
    <category term="centos软件" />
    <category term="yum仓库" />
    <category term="软件" />
    <category term="centos安装chromium报错" />
    <category term="chromium安装报错" />
    <category term="svn" />
    <category term="代码提交" />
    <category term="deb" />
    <category term="deb/rpm互转" />
    <category term="deb转rpm" />
    <category term="rpm互转" />
    <category term="centos7安装steam" />
    <category term="centos安装steam" />
    <category term="centos安装吃鸡steam" />
    <category term="linux安装steam" />
    <category term="steam安装" />
    <category term="centos软件安装" />
    <category term="centos6.5" />
    <category term="linux系统" />
    <category term="centos7安装Redis Desktop Manager" />
    <category term="centos7安装redis桌面" />
    <category term="centos安装redis桌面" />
    <category term="linux安装centos7安装Redis Desktop Manager" />
    <category term="Redis Desktop Manager" />
    <category term="redis桌面" />
    <category term="centos7" />
    <category term="centos7-wine" />
    <category term="wine" />
    <category term="wine安装" />
    <category term="root密码" />
    <category term="root密码重置" />
    <category term="忘记root密码" />
    <category term="memcache" />
    <category term="memcached" />
    <category term="生活手记" />
    <category term="艾瑞可erik" />
    <category term="程序员" />
    <category term="开源云" />
    <category term="容器" />
    <category term="cncf" />
    <category term="监控" />
    <category term="composer" />
    <category term="composer部署" />
    <category term="内网部署composer" />
    <category term="cphalcon" />
    <category term="cphalcon报错" />
    <category term="css中的em" />
    <category term="响应式字体" />
    <category term="响应式布局样式" />
    <category term="proxy代理搭建" />
    <category term="代理服务器搭建" />
    <category term="proxy服务器" />
    <category term="查找" />
    <category term="排序" />
    <category term="快速排序" />
    <category term="冒泡排序" />
    <category term="二分查找" />
    <category term="datahub" />
    <category term="datahub安装" />
    <category term="deepin" />
    <category term="emergency" />
    <category term="emergency mode" />
    <category term="deepin黑屏" />
    <category term="开发语言" />
    <category term="开发" />
    <category term="清理系统" />
    <category term="清理c盘" />
    <category term="dns" />
    <category term="域名监测" />
    <category term="网站监测" />
    <category term="docker" />
    <category term="php安装" />
    <category term="杂谈" />
    <category term="ecshop" />
    <category term="框架" />
    <category term="beego数据分页" />
    <category term="分页" />
    <category term="elasticsearch" />
    <category term="elasticsearch搭建" />
    <category term="elasticsearch集群" />
    <category term="系统" />
    <category term="emm" />
    <category term="mdm" />
    <category term="phone" />
    <category term="手机" />
    <category term="新闻" />
    <category term="免费" />
    <category term="jenkis" />
    <category term="jenkis教程" />
    <category term="随笔吐槽" />
    <category term="算法" />
    <category term="ping" />
    <category term="ping服务器" />
    <category term="各大网站ping" />
    <category term="搜引擎ping服务器" />
    <category term="go获取ip" />
    <category term="im" />
    <category term="go中pdf生成" />
    <category term="go中限流" />
    <category term="go对接快递签名" />
    <category term="go时间获取" />
    <category term="go类型转换" />
    <category term="微服务" />
    <category term="go-zero" />
    <category term="rpc" />
    <category term="go加密" />
    <category term="go解密" />
    <category term="归" />
    <category term="吐槽" />
    <category term="hadoop" />
    <category term="hadoop2.8.0" />
    <category term="hadoop安装教程" />
    <category term="hadoop安装详细教程" />
    <category term="hadoop教程" />
    <category term="hadoop部署" />
    <category term="php大全" />
    <category term="php资料" />
    <category term="hadoop3" />
    <category term="hadoop配置" />
    <category term="log4j2" />
    <category term="数据库" />
    <category term="hbase安装教程" />
    <category term="hbase" />
    <category term="http1.1" />
    <category term="http2.0" />
    <category term="会话" />
    <category term="会话原理" />
    <category term="hyperf" />
    <category term="杂录" />
    <category term="新冠肺炎" />
    <category term="springboot" />
    <category term="springboot内网部署" />
    <category term="linux恢复" />
    <category term="linux误删" />
    <category term="linux命令" />
    <category term="linux命令汇总" />
    <category term="jenkins" />
    <category term="jetbtrains" />
    <category term="phpstorm" />
    <category term="搜索引擎" />
    <category term="图片" />
    <category term="素材" />
    <category term="jq" />
    <category term="jq侧边导航" />
    <category term="侧边导航" />
    <category term="js判断浏览器" />
    <category term="js判断浏览器版本" />
    <category term="判断浏览器" />
    <category term="浏览器版本判断" />
    <category term="获取浏览器信息" />
    <category term="kali右键汉化" />
    <category term="kali桌面右键汉化" />
    <category term="kali右键创建文件" />
    <category term="区块链" />
    <category term="lanmp" />
    <category term="php环境独立配置" />
    <category term="服务器" />
    <category term="劳动纠纷" />
    <category term="追缴工资" />
    <category term="申请仲裁" />
    <category term="flash" />
    <category term="表单" />
    <category term="linux报错" />
    <category term="linux中update-command-not-found" />
    <category term="linux运行命令报错" />
    <category term="web前端" />
    <category term="web优化" />
    <category term="蓝牙" />
    <category term="小程序蓝牙" />
    <category term="蓝牙连接" />
    <category term="撮合算法" />
    <category term="撮合" />
    <category term="php撮合算法" />
    <category term="maven搭建库" />
    <category term="maven" />
    <category term="maven内网库" />
    <category term="高级缓存配置" />
    <category term="mongodb" />
    <category term="mongodb权限" />
    <category term="mysql" />
    <category term="分库分表" />
    <category term="可穿戴设备" />
    <category term="mysql应对千万级" />
    <category term="mysql瓶颈" />
    <category term="mysql瓶颈解决办法" />
    <category term="redis" />
    <category term="数据一致性" />
    <category term="mysql消息" />
    <category term="mysql队列" />
    <category term="mysql高并发" />
    <category term="mysql存储" />
    <category term="mysql引擎" />
    <category term="mysql数据表设计选择" />
    <category term="mysql监控" />
    <category term="mysql性能" />
    <category term="内网支付" />
    <category term="内网穿透" />
    <category term="支付接口本地化开发" />
    <category term="本地挂网" />
    <category term="穿透" />
    <category term="go" />
    <category term="new和make的区别" />
    <category term="红包算法" />
    <category term="深圳劳动法服务部门" />
    <category term="非关系型数据库" />
    <category term="onethink" />
    <category term="oop" />
    <category term="php管理系统" />
    <category term="开放接口开发" />
    <category term="开源工具" />
    <category term="桌面共享工具" />
    <category term="openresty" />
    <category term="openvas" />
    <category term="openvas安装" />
    <category term="php架构" />
    <category term="php服务" />
    <category term="php服务设计" />
    <category term="php项目" />
    <category term="php架构设计" />
    <category term="php变量" />
    <category term="php超级全局变量" />
    <category term="php超级变量" />
    <category term="php基本类型" />
    <category term="php数据类型" />
    <category term="php设计模式" />
    <category term="php对接微信支付" />
    <category term="微信支付" />
    <category term="微信支付回调" />
    <category term="游戏" />
    <category term="php函数" />
    <category term="php随机数" />
    <category term="php获取闰年" />
    <category term="闰年.php时间" />
    <category term="php环境" />
    <category term="php集成环境" />
    <category term="服务器集成环境" />
    <category term="数组函数" />
    <category term="数组排序函数" />
    <category term="php数学函数" />
    <category term="php面试题" />
    <category term="php面向对象" />
    <category term="面向对象" />
    <category term="php-zookeeper" />
    <category term="zookeeper3.5.5" />
    <category term="php-zookeeper扩展" />
    <category term="php串口开发" />
    <category term="php倒计时" />
    <category term="php时间" />
    <category term="倒计时" />
    <category term="计算时间" />
    <category term="PHP数组" />
    <category term="字符串函数" />
    <category term="排序函数" />
    <category term="php的SPL" />
    <category term="SPL手册" />
    <category term="PHP算法" />
    <category term="php递归" />
    <category term="递归" />
    <category term="phpunit" />
    <category term="phpunit安装" />
    <category term="php过滤" />
    <category term="过滤" />
    <category term="foreach" />
    <category term="foreach报错" />
    <category term="php中foreach报错" />
    <category term="php中if" />
    <category term="php中if判断" />
    <category term="php的if" />
    <category term="php字符串" />
    <category term="php7中sphinx" />
    <category term="php7中sphinx扩展" />
    <category term="sphinx扩展" />
    <category term="plc" />
    <category term="python" />
    <category term="python库" />
    <category term="a标签" />
    <category term="a标签虚线" />
    <category term="虚线框" />
    <category term="R语言" />
    <category term="数据随机化" />
    <category term="redis总结" />
    <category term="redis命令" />
    <category term="redis监控" />
    <category term="redis锁" />
    <category term="redis分布式锁" />
    <category term="任意金额输入" />
    <category term="10元、5元、2元" />
    <category term="队列" />
    <category term="栈" />
    <category term="顺序表" />
    <category term="链表" />
    <category term="数据结构" />
    <category term="线性结构" />
    <category term="浏览器禁止操作视频" />
    <category term="禁止视频" />
    <category term="响应慢" />
    <category term="页面优化" />
    <category term="js编辑" />
    <category term="runjs" />
    <category term="在线编辑" />
    <category term="rust" />
    <category term="rust配置" />
    <category term="seajs" />
    <category term="session" />
    <category term="路由器烧录" />
    <category term="烧录" />
    <category term="极路由2烧录" />
    <category term="砖头烧录" />
    <category term="免费服务器" />
    <category term="空间" />
    <category term="资源" />
    <category term="深圳政府电话" />
    <category term="深圳电话" />
    <category term="特区电话" />
    <category term="居住证" />
    <category term="居住证签注" />
    <category term="深圳新居住证" />
    <category term="国庆骑行" />
    <category term="深圳珠海骑行" />
    <category term="骑行" />
    <category term="世界那么大" />
    <category term="css3" />
    <category term="css在线生成工具" />
    <category term="css工具" />
    <category term="php正则" />
    <category term="正则" />
    <category term="shodan" />
    <category term="黑谷歌" />
    <category term="黒帽搜素" />
    <category term="shopex" />
    <category term="可视化数据" />
    <category term="数据" />
    <category term="数据表" />
    <category term="socket通信" />
    <category term="socket多进程" />
    <category term="socket" />
    <category term="json" />
    <category term="json数组" />
    <category term="json解析" />
    <category term="大数据" />
    <category term="spark" />
    <category term="hive" />
    <category term="数据分析" />
    <category term="sql" />
    <category term="sql优化" />
    <category term="css3兼容360浏览器兼容模式" />
    <category term="css圆角" />
    <category term="结构体转map" />
    <category term="config" />
    <category term="thinkphp" />
    <category term="配置文件" />
    <category term="树" />
    <category term="二叉树" />
    <category term="js插件" />
    <category term="virtualbox" />
    <category term="hyper-v" />
    <category term="鸿蒙开发" />
    <category term="web自适应" />
    <category term="响应式布局" />
    <category term="响应式所有分辨率" />
    <category term="自适应布局" />
    <category term="自适应所有分辨率" />
    <category term="webman" />
    <category term="mysql设置超时，超时" />
    <category term="markdown" />
    <category term="wget" />
    <category term="wget抓取" />
    <category term="网站抓取" />
    <category term="我在" />
    <category term="wordpress" />
    <category term="wordpress标签" />
    <category term="wpscan" />
    <category term="usbrip" />
    <category term="域名合并" />
    <category term="无限极分类" />
    <category term="php无限极" />
    <category term="分类tree" />
    <category term="无限极分类树型" />
    <category term="xhprof" />
    <category term="laravel" />
    <category term="composer插件" />
    <category term="html" />
    <category term="响应式分辨率" />
    <category term="响应式调试" />
    <category term="自适应屏幕" />
    <category term="携程" />
    <category term="携程攻击" />
    <category term="携程网站瘫痪" />
    <category term="物理删除" />
    <category term="3D" />
    <category term="动画" />
    <category term="平台" />
    <category term="虚幻4引擎编辑" />
    <category term="生成唯一id" />
    <category term="生成id" />
    <category term="发邮件" />
    <category term="邮件函数" />
    <category term="储蓄卡免年费" />
    <category term="银行卡" />
    <category term="银行卡免年费" />
    <category term="composer安装" />
    <category term="composer配置" />
    <category term="项目创建composer" />
    <category term="mysql优化" />
    <category term="mysql读写优化" />
    <category term="数据库优化，mysql语句优化" />
    <category term="php加密" />
    <category term="php技术" />
    <category term="夕阳" />
    <category term="mysql函数" />
    <category term="php中mysql函数" />
    <category term="互联网时代" />
    <category term="开源技术" />
    <category term="web框架" />
    <category term="php抓取图片" />
    <category term="php批量抓取页面图片" />
    <category term="邮箱服务器" />
    <category term="正则表达式" />
    <category term="翻墙" />
    <category term="谷歌" />
    <category term="谷歌搜索" />
    <entry>
        <id>https://erik.xyz/2019/07/18/http1-1-and-http2-0/</id>
        <title>http1.1和http2.0的知识点</title>
        <link rel="alternate" href="https://erik.xyz/2019/07/18/http1-1-and-http2-0/"/>
        <content type="html">&lt;h3 id=&#34;Http1-1&#34;&gt;&lt;a href=&#34;#Http1-1&#34; class=&#34;headerlink&#34; title=&#34;Http1.1&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#Http1-1&#34; title=&#34;Http1.1&#34;&gt;&lt;/a&gt;Http1.1&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;缓存处理&lt;/p&gt;
&lt;p&gt; 引入了更多的缓存控制策略例如Entity tag，If-Unmodified-Since, If-Match, If-None-Match等更多可供选择的缓存头来控制缓存策略。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;带宽优化及网络连接的使用&lt;/p&gt;
&lt;p&gt;  在请求头引入了range头域，它允许只请求资源的某个部分，即返回码是206（Partial Content），这样就方便了开发者自由的选择以便于充分利用带宽和连接。&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;错误通知的管理&lt;/p&gt;
&lt;p&gt; 新增了24个错误状态响应码，如409（Conflict）表示请求的资源与资源的当前状态发生冲突；410（Gone）表示服务器上的某个资源被永久性的删除。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Host头处理&lt;/p&gt;
&lt;p&gt;  Http1.1的请求消息和响应消息都应支持Host头域，且请求消息中如果没有Host头域会报告一个错误（400 Bad Request）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;长连接&lt;/p&gt;
&lt;p&gt;  Http1.1支持长连接（PersistentConnection）和请求的流水线（Pipelining）处理，在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟，在HTTP1.1中默认开启Connection： keep-alive，一定程度上弥补了HTTP1.0每次请求都要创建连接的缺点。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;Http2-0&#34;&gt;&lt;a href=&#34;#Http2-0&#34; class=&#34;headerlink&#34; title=&#34;Http2.0&#34;&gt;&lt;/a&gt;Http2.0&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;完全采用二进制格式&lt;/li&gt;
&lt;li&gt;&lt;p&gt;多路复用&lt;/p&gt;
&lt;p&gt;   根据request的 id将request再归属到各自不同的服务端请求里面。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;header压缩&lt;/p&gt;
&lt;p&gt;   使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;服务端推送&lt;/p&gt;
&lt;p&gt;   server push功能。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;Http2-0的多路复用和Http1-X中的长连接复用有什么区别？&#34;&gt;&lt;a href=&#34;#Http2-0的多路复用和Http1-X中的长连接复用有什么区别？&#34; class=&#34;headerlink&#34; title=&#34;Http2.0的多路复用和Http1.X中的长连接复用有什么区别？&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#Http2-0的多路复用和Http1-X中的长连接复用有什么区别？&#34; title=&#34;Http2.0的多路复用和Http1.X中的长连接复用有什么区别？&#34;&gt;&lt;/a&gt;Http2.0的多路复用和Http1.X中的长连接复用有什么区别？&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;Http/1.* 一次请求-响应，建立一个连接，用完关闭；每一个请求都要建立一个连接；&lt;/li&gt;
&lt;li&gt;Http/1.1 Pipeling解决方式为，若干个请求排队串行化单线程处理，后面的请求等待前面请求的返回才能获得执行机会，一旦有某请求超时等，后续请求只能被阻塞，毫无办法，也就是人们常说的线头阻塞；&lt;/li&gt;
&lt;li&gt;Http/2多个请求可同时在一个连接上并行执行。某个请求任务耗时严重，不会影响到其它连接的正常执行；&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;服务器推送到底是什么？&#34;&gt;&lt;a href=&#34;#服务器推送到底是什么？&#34; class=&#34;headerlink&#34; title=&#34;服务器推送到底是什么？&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#服务器推送到底是什么？&#34; title=&#34;服务器推送到底是什么？&#34;&gt;&lt;/a&gt;服务器推送到底是什么？&lt;/h5&gt;&lt;p&gt;服务端推送能把客户端所需要的资源伴随着index.html一起发送到客户端，省去了客户端重复请求的步骤。正因为没有发起请求，建立连接等操作，所以静态资源通过服务端推送的方式可以极大地提升速度。&lt;/p&gt;
&lt;h5 id=&#34;为什么需要头部压缩？&#34;&gt;&lt;a href=&#34;#为什么需要头部压缩？&#34; class=&#34;headerlink&#34; title=&#34;为什么需要头部压缩？&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#为什么需要头部压缩？&#34; title=&#34;为什么需要头部压缩？&#34;&gt;&lt;/a&gt;为什么需要头部压缩？&lt;/h5&gt;&lt;p&gt;假定一个页面有100个资源需要加载（这个数量对于今天的Web而言还是挺保守的）, 而每一次请求都有1kb的消息头（这同样也并不少见，因为Cookie和引用等东西的存在）, 则至少需要多消耗100kb来获取这些消息头。HTTP2.0可以维护一个字典，差量更新HTTP头部，大大降低因头部传输产生的流量&lt;/p&gt;
&lt;h5 id=&#34;Http2-0多路复用有多好&#34;&gt;&lt;a href=&#34;#Http2-0多路复用有多好&#34; class=&#34;headerlink&#34; title=&#34;Http2.0多路复用有多好&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#Http2-0多路复用有多好&#34; title=&#34;Http2.0多路复用有多好&#34;&gt;&lt;/a&gt;Http2.0多路复用有多好&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;Http性能优化的关键并不在于高带宽，而是低延迟。TCP 连接会随着时间进行自我「调谐」，起初会限制连接的最大速度，如果数据成功传输，会随着时间的推移提高传输的速度。这种调谐则被称为 TCP 慢启动。由于这种原因，让原本就具有突发性和短时性的 HTTP 连接变的十分低效。&lt;/li&gt;
&lt;li&gt;Http/2 通过让所有数据流共用同一个连接，可以更有效地使用 TCP 连接，让高带宽也能真正的服务于 HTTP 的性能提升。&lt;/li&gt;
&lt;/ul&gt;
</content>
        <category term="web" />
        <category term="http" />
        <category term="http1.1" />
        <category term="http2.0" />
        <updated>2019-07-17T16:20:00.000Z</updated>
    </entry>
    <entry>
        <id>https://erik.xyz/2015/02/05/windows-shang-jing-tai-bian-yi-libevent-2-0-10-bing-shi-xian-yi-ge-jian-dan-http-fu-wu-qi/</id>
        <title>Windows 上静态编译 Libevent 2.0.10 并实现一个简单 HTTP 服务器</title>
        <link rel="alternate" href="https://erik.xyz/2015/02/05/windows-shang-jing-tai-bian-yi-libevent-2-0-10-bing-shi-xian-yi-ge-jian-dan-http-fu-wu-qi/"/>
        <content type="html">&lt;p&gt;[文章作者：张宴 ] 本文介绍了如何在 Windows 操作系统中，利用微软 Visual Studio 2005 编译生成 &lt;a href=&#34;http://monkey.org/%7Eprovos/libevent/&#34;&gt;Libevent&lt;/a&gt; 2.0.10 静态链接库，并利用 &lt;a href=&#34;http://monkey.org/%7Eprovos/libevent/&#34;&gt;Libevent&lt;/a&gt; 静态链接库，实现一个简单的 HTTP Web服务器程序：httpd.exe。 假设 Visual Studio 2005 的安装路径为“D:\Program Files\Microsoft Visual Studio 8\”，&lt;a href=&#34;http://monkey.org/%7Eprovos/libevent/&#34;&gt;Libevent&lt;/a&gt; 2.0.10 解压后的路径为“D:\libevent-2.0.10-stable”。&lt;br&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;一、编译生成 Libevent 2.0.10 静态链接库。&lt;/strong&gt; &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;修改“D:\libevent-2.0.10-stable\event_iocp.c”、“D:\libevent-2.0.10-stable \evthread_win32.c”、“D:\libevent-2.0.10-stable\listener.c”三个文件，在文件开头分别加上一 行：&lt;/p&gt;
&lt;h1 id=&#34;define-WIN32-WINNT-0x0500&#34;&gt;&lt;a href=&#34;#define-WIN32-WINNT-0x0500&#34; class=&#34;headerlink&#34; title=&#34;define _WIN32_WINNT 0x0500&#34;&gt;&lt;/a&gt;define _WIN32_WINNT 0x0500&lt;/h1&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;鼠标点击Windows左下角的【开始】-【所有程序】，找到【Microsoft Visual Studio 2005】，执行下图中的脚本： &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent1.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent1.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;按照下图中的方法编译Libevent 2.0.10：&lt;br&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent2.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent2.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;生成的“libevent.lib”、“libevent_core.lib”、“libevent_extras.lib”三个文件就是我们需要的 Libevent 静态链接库。&lt;br&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent3.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent3.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;二、利用 Libevent 静态链接库，实现一个简单的 HTTP Web服务器程序&lt;/strong&gt; &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;打开 Visual Studio 2005，新建一个项目&lt;br&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent4.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent4.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;选择在“d:\test”目录内创建一个“Win32 控制台应用程序”&lt;br&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent5.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent5.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;按照下图进行选择&lt;br&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent6.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent6.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;创建完成项目后，会自动生成“d:\test\httpd\”目录，在该目录内创建一个“httpd.c”文件，内容如下：&lt;br&gt; &lt;a href=&#34;http://zyan.cc/#&#34;&gt;view plain&lt;/a&gt;&lt;a href=&#34;http://zyan.cc/#&#34;&gt;print&lt;/a&gt;&lt;a href=&#34;http://zyan.cc/#&#34;&gt;?&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;  #include &amp;lt;stdio.h&amp;gt;

      #define WIN32\_LEAN\_AND_MEAN
     #include &amp;lt;windows.h&amp;gt;
      #include &amp;lt;winsock2.h&amp;gt;

      #include &amp;lt;event.h&amp;gt;
      #include &amp;lt;evhttp.h&amp;gt;

      void root_handler(struct evhttp_request *req, void *arg)
      &amp;#123;
          struct evbuffer *buf = evbuffer_new();
          if(!buf)&amp;#123;
              puts(&amp;quot;failed to create response buffer&amp;quot;);
              return;
          &amp;#125;

          evbuffer\_add\_printf(buf, &amp;quot;Hello: %s\\n&amp;quot;, evhttp\_request\_uri(req));
          evhttp\_send\_reply(req, HTTP_OK, &amp;quot;OK&amp;quot;, buf);
      &amp;#125;

      void generic_handler(struct evhttp_request *req, void *arg)
      &amp;#123;
          struct evbuffer *buf = evbuffer_new();
          if(!buf)&amp;#123;
              puts(&amp;quot;failed to create response buffer&amp;quot;);
              return;
          &amp;#125;

          evbuffer\_add\_printf(buf, &amp;quot;Requested: %s\\n&amp;quot;, evhttp\_request\_uri(req));
          evhttp\_send\_reply(req, HTTP_OK, &amp;quot;OK&amp;quot;, buf);
      &amp;#125;

      int main(int argc, wchar_t* argv\[\])
      &amp;#123;
        struct evhttp *httpd;

        WSADATA wsaData;
        DWORD Ret;
        if ((Ret = WSAStartup(MAKEWORD(2, 2), &amp;amp;wsaData)) != 0)  &amp;#123;
          printf(&amp;quot;WSAStartup failed with error %d\\n&amp;quot;, Ret);
          return -1;
        &amp;#125;

          event_init();

          httpd = evhttp_start(&amp;quot;0.0.0.0&amp;quot;, 8505);
          if(!httpd)&amp;#123;
          return 1;
        &amp;#125;

          evhttp\_set\_cb(httpd, &amp;quot;/&amp;quot;, root_handler, NULL);
          evhttp\_set\_gencb(httpd, generic_handler, NULL);

        printf(&amp;quot;httpd server start OK!\\n&amp;quot;);

          event_dispatch();

          evhttp_free(httpd);

        WSACleanup();
          return 0;
   &amp;#125;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5、回到 Visual Studio 2005，在左侧的【源文件】中选择【添加】-【现有项】，将上一步创建的“httpd.c”文件添加进来。&lt;/p&gt;
&lt;p&gt; &lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent7.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent7.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;6、在【解决方案“httpd”】上点击鼠标右键，选择【属性】 &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent8.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent8.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;7、将【配置】改为“Release”&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent9.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent9.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;8、将“D:\libevent-2.0.10-stable\include”整个目录复制到“D:\test\httpd\include”；将 “D:\libevent-2.0.10-stable\WIN32-Code”目录内的“tree.h”文件和“event2”子目录，复制到“D: \test\httpd\include\”内；将“D:\libevent-2.0.10-stable\”目录内的所有“*.h”头文件复制到“D: \test\httpd\include\”内。可以在Windows左下角的【开始】-【运行】中输入“cmd”回车，在命令行窗口中执行以下命令，完 成复制过程。&lt;/p&gt;
&lt;p&gt;mkdir D:\test\httpd\include\ xcopy /E /H /R D:\libevent-2.0.10-stable\include\&lt;em&gt; D:\test\httpd\include\ xcopy /E /H /R D:\libevent-2.0.10-stable\WIN32-Code\&lt;/em&gt; D:\test\httpd\include\ xcopy /E /H /R D:\libevent-2.0.10-stable\*.h D:\test\httpd\include\&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent10.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent10.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent11.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent11.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;9、回到 Visual Studio 2005，在左侧菜单中【解决方案“httpd”】下面一行【httpd】上点击鼠标邮件，选择【属性】，对每项内容进行修改。下图中红框内的数据即为修改后的数据。 &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent12.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent12.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent13.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent13.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent14.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent14.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent15.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent15.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;注：下图中，附加依赖项填写：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    ws2\_32.lib wsock32.lib libevent.lib libevent\_core.lib libevent_extras.lib
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;忽略特定库填写：&lt;/p&gt;
&lt;p&gt;libc.lib;msvcrt.lib;libcd.lib;libcmtd.lib;msvcrtd.lib&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent16.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent16.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;10、完成设置后，在【解决方案“httpd”】上点击鼠标右键，选择【生成解决方案】。如果是重新编译，可以选择【重新生成解决方案】。生成成功后，“d:\test\httpd\Release”目录内的“httpd.exe”即为生成的可执行文件。 &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent17.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent17.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;11、双击“httpd.exe”运行后，打开浏览器，访问“&lt;a href=&#34;http://127.0.0.1:8505/&#34;&gt;http://127.0.0.1:8505/&lt;/a&gt;”，则可以看到以下信息：一个简单的 HTTP Web Server 输出的内容。&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent18.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent18.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;12、如果你觉得像DOS程序一样的“httpd.exe”可执行文件图标不好看、没有显示版本信息，那么，你可以按照下图步骤，添加ICO图标文件。 &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent19.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent19.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent20.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent20.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;13、添加版本信息 &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent21.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent21.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent22.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent22.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;14、大功告成，下面显示的是带有自定义图标、版本信息的“httpd.exe”可执行程序。 &lt;a href=&#34;http://zyan.cc/attachment/201103/libevent/libevent23.png&#34;&gt;&lt;img src=&#34;http://zyan.cc/attachment/201103/libevent/libevent23.png&#34; alt=&#34;点击在新窗口中浏览此图片&#34; title=&#34;点击在新窗口中浏览此图片&#34;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;附1：编译好的 Libevent 2.0.10 静态链接库与 httpd 的 Visual Studio 2005 工程源代码下载&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://zyan.cc/template/RuiPai/images/download.gif&#34; alt=&#34;&#34;&gt;下载文件&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://blog.zyan.cc/attachment/201103/libevent/httpd.zip&#34;&gt;点击这里下载文件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;附2：ICO图标制作工具下载&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://zyan.cc/template/RuiPai/images/download.gif&#34; alt=&#34;&#34;&gt;下载文件&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://blog.zyan.cc/attachment/201103/libevent/iconxp.zip&#34;&gt;点击这里下载文件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;转载请注明原文链接：&lt;a href=&#34;http://blog.zyan.cc/libevent_windows/&#34;&gt;http://blog.zyan.cc/libevent_windows/&lt;/a&gt;&lt;/p&gt;
</content>
        <category term="php服务器" />
        <category term="http" />
        <category term="http服务器" />
        <updated>2015-02-05T15:51:00.000Z</updated>
    </entry>
</feed>