{
    "version": "https://jsonfeed.org/version/1",
    "title": "艾瑞可erik • All posts by \"转载\" tag • All posts by \"undefined\" categories",
    "description": "一只PHP开发的程序猿，偶尔做做运维、Goland、Python、Java、摄影、画画、写作、顺便睡觉，反正整站都搞过。",
    "home_page_url": "https://erik.xyz",
    "items": [
        {
            "id": "https://erik.xyz/2024/04/06/five-jenkis/",
            "url": "https://erik.xyz/2024/04/06/five-jenkis/",
            "title": "5分钟搞定Jenkis",
            "date_published": "2024-04-06T01:04:00.000Z",
            "content_html": "<h4 id=\"什么是持续集成\"><a href=\"#什么是持续集成\" class=\"headerlink\" title=\"什么是持续集成\"></a>什么是持续集成</h4><p>持续集成 Continuous integration ，简称CI随着软件开发复杂度的不断提高，团队开发成员间如何更好地协同工作以确保软件开发的质量已经慢慢成为开发过程中不可回避的问题。尤其是近些年来，敏捷（Agile） 在软件工程领域越来越红火，如何能在不断变化的需求中快速适应和保证软件的质量也显得尤其的重要。持续集成正是针对这一类问题的一种软件开发实践。它倡导团队开发成员必须经常集成他们的工作，甚至每天都可能发生多次集成。而每次的集成都是通过自动化的构建来验证，包括自动编译、发布和测试，从而尽快地发现集成错误，让团队能够更快的开发内聚的软件。<br><span id=\"more\"></span><br>持续集成具有的特点：</p>\n<ul>\n<li><p>它是一个自动化的周期性的集成测试过程，从检出代码、编译构建、运行测试、结果记录、测试统计等都是自动完成的，无需人工干预；</p>\n</li>\n<li><p>需要有专门的集成服务器来执行集成构建；</p>\n</li>\n<li>需要有代码托管工具支持，例如Git以及可视化界面Gogs的使用</li>\n</ul>\n<p>持续集成的作用：</p>\n<ul>\n<li>保证团队开发人员提交代码的质量，减轻了软件发布时的压力；</li>\n<li>持续集成中的任何一个环节都是自动完成的，无需太多的人工干预，有利于减少重复过程以节省时间、费用和工作量；</li>\n</ul>\n<h4 id=\"Jenkins简介\"><a href=\"#Jenkins简介\" class=\"headerlink\" title=\"Jenkins简介\"></a>Jenkins简介</h4><p>Jenkins，原名Hudson，2011年改为现在的名字，它是一个开源的实现持续集成的软件工具。官方网站：<a href=\"http://jenkins-ci.org/。\">http://jenkins-ci.org/。</a></p>\n<p>Jenkins 能实施监控集成中存在的错误，提供详细的日志文件和提醒功能，还能用图表的形式形象地展示项目构建的趋势和稳定性。</p>\n<p>特点：</p>\n<ul>\n<li>易安装：仅仅两个docker命令即可从官网下载直接运行，无需额外的安装，更无需安装数据库；</li>\n<li>易配置：提供友好的GUI配置界面；</li>\n<li>变更支持：Jenkins能从代码仓库（Subversion/CVS）中获取并产生代码更新列表并输出到编译输出信息中；</li>\n<li>支持永久链接：用户是通过web来访问Jenkins的，而这些web页面的链接地址都是永久链接地址，因此，你可以在各种文档中直接使用该链接；</li>\n<li>集成E-Mail/RSS/IM：当完成一次集成时，可通过这些工具实时告诉你集成结果（据我所知，构建一次集成需要花费一定时间，有了这个功能，你就可以在等待结果过程中，干别的事情）；</li>\n<li>JUnit/TestNG测试报告：也就是用以图表等形式提供详细的测试报表功能；</li>\n<li>支持分布式构建：Jenkins可以把集成构建等工作分发到多台计算机中完成；</li>\n<li>文件指纹信息：Jenkins会保存哪次集成构建产生了哪些jars文件，哪一次集成构建使用了哪个版本的jars文件等构建记录；</li>\n<li>支持第三方插件：使得 Jenkins 变得越来越强大Jenkins安装与启动（1）执行安装命令,下载jenkins</li>\n</ul>\n<h4 id=\"Jenkins安装与启动\"><a href=\"#Jenkins安装与启动\" class=\"headerlink\" title=\"Jenkins安装与启动\"></a>Jenkins安装与启动</h4><p>1）执行安装命令,下载jenkins<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull jenkins/jenkins</span><br></pre></td></tr></table></figure><br>（2）启动服务<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -p 8080:8080 -p 50000:50000 -v /mnt/data/jenkins:/var/jenkins_home --name &quot;jenkins&quot; jenkins/jenkins</span><br></pre></td></tr></table></figure><br><img src=\"/img/2024/20240411.jpeg\" alt=\"erik.xyz\"></p>\n<p>若报错如下:<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">touch: cannot touch ‘/var/jenkins_home/copy_reference_file.log’: Permission denied</span><br><span class=\"line\">Can not write to /var/jenkins_home/copy_reference_file.log. Wrong volume permissions?</span><br></pre></td></tr></table></figure></p>\n<p>需要修改下目录权限, 因为当映射本地数据卷时，/mnt/data/jenkins目录的拥有者为root用户，而容器中jenkins user的uid为1000<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo chown -R 1000:1000 /mnt/data/jenkins</span><br></pre></td></tr></table></figure><br>（3）访问链接 <a href=\"http://10.20.29.151:8080\">http://10.20.29.151:8080</a></p>\n<p>若密码忘记，可进入容器，执行<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /var/lib/jenkins/secrets/initialAdminPassword</span><br></pre></td></tr></table></figure><br>获取初始密码串。</p>\n<p>若目录不存在，可使用<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find / -name &quot;initialAdminPassword&quot; -depth -print</span><br></pre></td></tr></table></figure><br>命令查找。<br><img src=\"/img/2024/20240412.png\" alt=\"erik.xyz\"></p>\n<p>（4）安装插件<br><img src=\"/img/2024/20240413.png\" alt=\"erik.xyz\"><br><img src=\"/img/2024/20240414.png\" alt=\"erik.xyz\"></p>\n<p>（5）新建用户<br><img src=\"/img/2024/20240415.png\" alt=\"erik.xyz\"></p>\n<p>完成安装进入主界面<br><img src=\"/img/2024/20240416.png\" alt=\"erik.xyz\"></p>\n<h4 id=\"Jenkins插件安装\"><a href=\"#Jenkins插件安装\" class=\"headerlink\" title=\"Jenkins插件安装\"></a>Jenkins插件安装</h4><p>我们以安装maven插件为例，演示插件的安装</p>\n<p>（1）点击左侧的“系统管理”菜单 ,然后点击<br><img src=\"/img/2024/20240417.jpeg\" alt=\"erik.xyz\"></p>\n<p>（2）选择“可选插件”选项卡，搜索maven，在列表中选择Maven Integration ，点击“直接安装”按钮<br><img src=\"/img/2024/20240418.jpeg\" alt=\"erik.xyz\"></p>\n<p>看到如下图时，表示已经完成<br><img src=\"/img/2024/20240419.png\" alt=\"erik.xyz\"></p>\n<h5 id=\"全局工具配置\"><a href=\"#全局工具配置\" class=\"headerlink\" title=\"全局工具配置\"></a>全局工具配置</h5><p>选择系统管理，全局工具配置<br><img src=\"/img/2024/20240420.png\" alt=\"erik.xyz\"></p>\n<p><strong>自动安装</strong></p>\n<p>Jenkins提供了两种工具配置的方式，我们还是以maven为例<br><img src=\"/img/2024/20240421.png\" alt=\"erik.xyz\"></p>\n<p>第一种如上图，只需要选择自动安装和版本号就可以，同时Jenkins在右上角给出了一个解疑按键，可以通过该键看到说明和示例。</p>\n<p><strong>本地安装</strong><br>相较于第一种方式，第二种方式相对麻烦一些，但好处是可以在以后打包的时候不必重新下载，缩短打包的时间。</p>\n<p>下面就来教大家如何安装Maven与本地仓库：</p>\n<p>（1）将Maven压缩包上传至服务器（虚拟机）</p>\n<p>（2）解压<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar zxvf apache-maven-3.5.4-bin.tar.gz</span><br></pre></td></tr></table></figure><br>（3）移动目录<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv apache-maven-3.5.4 /usr/local/maven</span><br></pre></td></tr></table></figure><br>（4）编辑setting.xml配置文件vi /usr/local/maven/conf/settings.xml，配置本地仓库目录,内容如下<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;localRepository&gt;/usr/local/repository&lt;/localRepository&gt;</span><br></pre></td></tr></table></figure><br>（5）将开发环境的本地仓库上传至服务器（虚拟机）并移动到/usr/local/repository 。<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv reponsitory_boot /usr/local/repository</span><br></pre></td></tr></table></figure></p>\n<p>其他示例:</p>\n<p>（1）JDK配置<br><img src=\"/img/2024/20240422.png\" alt=\"erik.xyz\"></p>\n<p>设置javahome为 /usr/java/jdk1.8.0_171-amd64</p>\n<p>（2）Git配置 （本地已经安装了Git软件）<br><img src=\"/img/2024/20240423.png\" alt=\"erik.xyz\"></p>\n<p>（3）Maven配置<br><img src=\"/img/2024/20240424.png\" alt=\"erik.xyz\"></p>\n<p><strong>代码上传至Git服务器</strong></p>\n<p>步骤：</p>\n<p>（1）在本地安装git(Windows版本)</p>\n<p>（2）在IDEA中选择菜单 : File — settings , 在窗口中选择Version Control — Git<br><img src=\"/img/2024/20240425.png\" alt=\"erik.xyz\"></p>\n<p>（3）选择菜单VCS —&gt; Enable Version Control Integration…<br><img src=\"/img/2024/20240426.png\" alt=\"erik.xyz\"></p>\n<p>选择Git</p>\n<p>（4）设置远程地址: 右键点击工程选择菜单 Git —&gt; Repository —&gt;Remotes…<br><img src=\"/img/2024/20240427.png\" alt=\"erik.xyz\"><br><img src=\"/img/2024/20240428.png\" alt=\"erik.xyz\"></p>\n<p>(5）右键点击工程选择菜单 Git —&gt; Add</p>\n<p>（6）右键点击工程选择菜单 Git —&gt; Commit Directory…</p>\n<p>（7）右键点击工程选择菜单 Git —&gt; Repository —&gt; Push …</p>\n<p><strong>任务的创建与执行</strong></p>\n<p>我们以最火的Java项目和Go项目为例，给大家分别演示如何构建项目和执行</p>\n<p><strong>Go项目</strong></p>\n<p>（1）回到首页，点击新建按钮 .如下图，输入名称，选择创建一个自由风格的项目，点击OK<br><img src=\"/img/2024/20240429.png\" alt=\"erik.xyz\"><br>（2）General管理，可以添加项目描述和GitHub项目路径，以及一些配置<br><img src=\"/img/2024/20240430.png\" alt=\"erik.xyz\"><br>（3）源码管理，选择GitHub<br><img src=\"/img/2024/20240431.png\" alt=\"erik.xyz\"><br><img src=\"/img/2024/20240432.png\" alt=\"erik.xyz\"><br><img src=\"/img/2024/20240433.png\" alt=\"erik.xyz\"></p>\n<p>（4）构建触发器，配置触发规则，这里以定时和轮询为示例，配别设置为<br><img src=\"/img/2024/20240434.png\" alt=\"erik.xyz\"></p>\n<p>定时构建：定时构建1次任务</p>\n<p>轮询SCM:定时查看源码管理的代码是否更新，有更新则构建，否则不会构建</p>\n<p>如图所示，定时构建为每间隔10分钟定时构建一次，轮询SCM为每5分钟轮询检测一次。</p>\n<p><span style=\"color: #808080;\">时间*号规则为: 分 时 日 月 周</span></p>\n<p>（5）构建环境，配置控制台输出时间戳和指定Go语言版本<br><img src=\"/img/2024/20240435.png\" alt=\"erik.xyz\"><br>（6）构建，使用Shell脚本测试代码上传后的项目是否有效<br><img src=\"/img/2024/20240436.jpeg\" alt=\"erik.xyz\"></p>\n<p>Shell如下:<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export GOPATH=$WORKSPACE/../                    # 指定GOPATH路径，Go语言执行必须有GOPATH路径</span><br><span class=\"line\">export GOWORK=$GOPATH/src/github.com/Jenkins    # 创建项目执行时的目录依赖结构</span><br><span class=\"line\">cp -rf $WORKSPACE/* $GOWORK/                    # 使测试运行数据和源数据隔离</span><br><span class=\"line\">cd $GOWORK &amp;&amp; go build                          # 进入项目目录并执行</span><br></pre></td></tr></table></figure></p>\n<p>命令解说：<br><span style=\"color: #808080;\"><br>$GOPATH Go 运行需要指定 GOPATH 也即项目运行路径<br>$WORKSPACE /var/jenkins_home/workspace/Jenkins<br>GOWORK 创建符合代码依赖的执行目录<br>注:下载Go的插件在构建时，会自动为我们设置GOROOT,但不会指定GOPATH，因此需要指定\n</span><br>最后点击“保存”按钮</p>\n<p>（7）执行构建，控制台查看输出<br><img src=\"/img/2024/20240437.jpeg\" alt=\"erik.xyz\"><br><img src=\"/img/2024/20240438.jpeg\" alt=\"erik.xyz\"></p>\n<p>构建成功，也输出了WORKSPACE、GOPATH、GOROOT目录，说明配置生效。进入docker容器或是挂载目录查看是否有可执行文件：<br><img src=\"/img/2024/20240439.png\" alt=\"erik.xyz\"><br>除了上述方法，也可以通过shell配置docker等方式构建、部署、运行项目，还可以将项目配置到当前/其他服务器运行，更多配置方式就不一一陈述了，请自行挖掘。</p>\n<p><strong>JAVA项目</strong></p>\n<p>（1）回到首页，点击新建按钮 .如下图，输入名称，选择创建一个Maven项目，点击OK<br><img src=\"/img/2024/20240440.jpeg\" alt=\"erik.xyz\"></p>\n<p>（2）源码管理，选择Git<br><img src=\"/img/2024/20240441.png\" alt=\"erik.xyz\"><br>(3）Build<br><img src=\"/img/2024/20240442.png\" alt=\"erik.xyz\"></p>\n<p>命令:<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">clean package docker:build -DpushImage</span><br></pre></td></tr></table></figure><br>用于清除、打包，构建docker镜像</p>\n<p>最后点击“保存”按钮</p>\n<p>（4）执行任务</p>\n<p>后续请参照Go项目的执行步骤。</p>\n<p>转载自：<a href=\"https://mp.weixin.qq.com/s/PEupc5YIKuctZO1Tivy_ug\">架构师社区</a></p>\n",
            "tags": [
                "转载",
                "jenkis",
                "jenkis教程"
            ]
        },
        {
            "id": "https://erik.xyz/2022/12/16/in-guan-bingd-du/",
            "url": "https://erik.xyz/2022/12/16/in-guan-bingd-du/",
            "title": "新冠真就是流感而已么？我问了四个阳了的朋友。。。",
            "date_published": "2022-12-16T01:54:00.000Z",
            "content_html": "<p>这段时间，各地新冠感染人数都在暴增，<strong>大家出门记得戴口罩</strong>。</p>\n<p>这几天，咱编辑部也充满了风雨欲来的危机感，不过，办公室刚出现病例，咱们就迅速进行了一个居家办公，所以目前情况还不错。</p>\n<p>但即便如此，我们每天讨论最多的话题，仍然是新冠，不仅仅是编辑部，差评君在的大部分群聊里也是这个状况。</p>\n<p>“ 听说现在新冠跟流感一样了？”</p>\n<p>“ 抢到药了么？我咋到处买不到药？”</p>\n<p>“ 现在得新冠还会有啥后遗症么？”<br><span id=\"more\"></span><br>连花清瘟都快变 “ 硬通货 ” 了  ▼<br><img src=\"/img/202212/640.jpeg\" alt=\"erik.xyz\"></p>\n<p>随着开放，大家开始直面新冠，但大多数人对于新冠却还没有真正的了解，心里多少有一些担心。</p>\n<p>抱着一丝好奇，差评君翻阅了一些国内外的论文以及相关报道，并且抓着身边几位不幸中招的朋友们聊了一聊他们的「 新冠历程 」。</p>\n<p> 希望通过这篇文章，帮助大家迅速对新冠有个初步的了解。</p>\n<p>首先，<strong>还是先介绍下基本情况</strong>。</p>\n<p>从今年 1 月份开始，中国大部分地区流行的都是<strong>「 奥密克戎 」</strong>。</p>\n<p>不同地区流行的具体变异株不同，北京流行的变异株以 BF.7 为主，广州流行的以 BA 5.2 为主，它们都属于奥密克戎的不同分支，所以病毒毒性、致病力和传染性没有显著变化，<strong>不存在南北毒性不同，疾病表现不同可能是个体差异导致</strong>。</p>\n<p>至于那些 “ 丑的容易得，漂亮的不容易得 ” 的论调，要么咱听听就好<br> <img src=\"/img/202212/640.png\" alt=\"erik.xyz\"></p>\n<p>感染奥密克戎后主要是<strong>无症状</strong>和<strong>轻症</strong>。</p>\n<p>轻症的定义是：出现中低度发热、咽痛、鼻塞等上呼吸道感染症状，以及乏力、嗅（味）觉障碍等症状，但是没有肺炎表现。</p>\n<p> 所以，对于大部分人来说，奥密克戎并不可怕。</p>\n<p>但，注意，<strong>像老年人、有基础病的人、免疫力差的人</strong>容易出现重症。</p>\n<p>钟院士在内的多个专家表示，99% 的病人<strong>一周左右</strong>可以康复，而只要感染过，无论有无症状，3-6 个月内二次感染的概率极低。<br><img src=\"/img/202212/qwe21.png\" alt=\"erik.xyz\"></p>\n<p>这些数据看起来很生硬，<strong>所以差评君干脆联系了身边 4 位阳了的朋友，问了一下他们的生病感受</strong>。</p>\n<p>接下来是他们的讲述，为了方便阅读，差评君做了简单整理。</p>\n<h1 id=\"1-铁头-坐标北京\"><a href=\"#1-铁头-坐标北京\" class=\"headerlink\" title=\"1 铁头 坐标北京\"></a>1 铁头 坐标北京</h1><p>由于女朋友阳了，所以有预感自己也会。</p>\n<p>从开始到结束差不多是<strong>7天</strong>，第 1 天就嗓子微微不舒服，类似平时上火的感觉，有预感压不住第二天会发烧那种。</p>\n<p>第 2 天还是第 3 天开始，头晕发烧，不过这会测出来还是阴性，发烧 38.5°。</p>\n<p>接下来两三天一直在浑浑噩噩中度过，身上特别疼，就是健身后那种肌肉酸疼，咋待着都不舒服，感觉被打了一顿，脖子也疼，腰也疼，不能受力。</p>\n<p>后来就是比较常规的，咳嗽。</p>\n<p>到了第七天，就是嗓子什么有点不舒服。<br><img src=\"/img/202212/640qwe23.png\" alt=\"erik.xyz\"></p>\n<p>个人感受就是没啥食欲，每天没有胃口，就光喝水，也没有怎么吃药，全程就吃了一粒布洛芬。</p>\n<p>比较头疼的是，北京外卖很迟缓，可能是外卖员也都阳了吧，买点水，等一个小时，配送费是 30。</p>\n<p>建议就是拖时间 ，喝水，喝宝矿力，一定一定要多喝水。</p>\n<p>我对象比我先阳，也先好，现在已经开始上班了，整个生病的时间周期跟我差不多。<br><img src=\"/img/202212/342gfhhhhhhhht45.png\" alt=\"erik.xyz\"></p>\n<h1 id=\"2-导演-坐标北京\"><a href=\"#2-导演-坐标北京\" class=\"headerlink\" title=\"2 导演 坐标北京\"></a>2 导演 坐标北京</h1><p>我是上周日开始不舒服的，但是今天（周二）已经快好了。</p>\n<p>周日上午起来觉得身体有点迟钝，有点冷，腰酸脖子酸。吃完午饭就感觉自己快发烧了，下午直接烧到 39.5 度，来得很快。</p>\n<p>烧了估计有 24 个小时，都是接近 40 度，人基本也跟昏迷差不多了，除了喝水和躺着睡觉啥也干不了。<br><img src=\"/img/202212/dfg3415.png\" alt=\"erik.xyz\"></p>\n<p>周一下午开始有点退烧，到 38 度左右，开始能吃东西了。</p>\n<p>吃东西反正除了咸味，其他什么味道也吃不出来。朋友给我买了个黄桃罐头，吃那个味道还是有的。但是我吃饭时，刚咀嚼第一口整个口腔的肌肉特别酸痛，疼的嗷嗷叫。</p>\n<p>再之后就是烧开始慢慢退，但是身上的酸痛感也越来越严重，越来越普遍。</p>\n<p>今天起来（周二）彻底退烧，喉咙还有些疼，还有就是浑身像被人揍了一顿，稍微动一下就疼的厉害，不动也会疼，实在受不了了中午吃了颗布洛芬。</p>\n<p>今天吃了两顿饭，味觉基本恢复，大约下午 3 点多我感觉精神上也恢复得差不多了，身体虽然有点笨重，但不是很疼了，嗓子吞咽的时候稍稍有点感觉，但不明显，不良反应几乎是没有了。</p>\n<p>就感觉已经好的差不多可以继续打工了。。。<br><img src=\"/img/202212/123dfgyt55.png\" alt=\"erik.xyz\"></p>\n<h1 id=\"3-嘉嘉-坐标北京\"><a href=\"#3-嘉嘉-坐标北京\" class=\"headerlink\" title=\"3 嘉嘉 坐标北京\"></a>3 嘉嘉 坐标北京</h1><p>上周五睡觉的时候还正常的，周六凌晨突然烧的不行了，半夜被冻醒（实际是发烧），出汗出的衣服都湿透了，但还是感觉冷。</p>\n<p>没有体温计，不知道自己烧成啥也了，发烧之前就是感觉嗓子有点痒。</p>\n<p>从周六到现在（周二）就是头昏、咳嗽、恶心想吐以及流鼻涕，然后还有就是犯困，我没有全身疼。<br><img src=\"/img/202212/3678fh.png\" alt=\"erik.xyz\"></p>\n<p>我是一直有吃药的，拆开吃，疼就吃布洛芬，发热就连花清瘟，嗓子难受就头孢，一次吃一种，7小时后根据情况再吃（ 注，此处不构成医疗建议，仅为个人用药习惯 ），吃药的确会缓解一些难受。</p>\n<p>主要还是靠喝水吧，一天喝 4.5L 水，因为刚好是买的桶装水，所以水量特别清晰。</p>\n<p>生活没啥大影响，就是没有力气打游戏了，有人是吃东西没有味道，我是吃啥都觉得咸，麻辣烫就疯狂兑水。<br><img src=\"/img/202212/sfgr687.png\" alt=\"erik.xyz\"></p>\n<h1 id=\"4-徐哥-坐标广州\"><a href=\"#4-徐哥-坐标广州\" class=\"headerlink\" title=\"4 徐哥 坐标广州\"></a>4 徐哥 坐标广州</h1><p>自广州全面放开，大家似乎就也都放开了，我自己也有心理预期，觉得这事迟早要来，症状严重与否，纯粹看「 命 」，只不过没想到这么快。</p>\n<p>我是上周末开始的，目前第三天，整体对比网上相对轻微的。</p>\n<p>星期天白天嗓子略痒，但也不是很明显。到了晚上睡前全身酸痛无力、头很疼、全身发冷，广州盖了两床厚被子，穿了厚的秋衣裤，睡觉还是觉得冷。一整晚没怎么睡好。</p>\n<p>周一中午做了抗原，测出来阳了。这天的情况跟第一天一样，睡了一整天，吃不下饭，就啃了下馒头，有味的东西吃着就恶心。</p>\n<p>今天早上起来酸痛感、头疼感有舒缓，但下午感觉又严重了，但整体比第一天好，另外就是咳嗽、咳痰。</p>\n<p>目前为止还没发烧，所以吃药方面目前就是吃连花清瘟胶囊+消炎药，另外多喝水，泡 VC 泡腾片和电解质粉。<br><img src=\"/img/202212/werwe4389.png\" alt=\"erik.xyz\"></p>\n<p>以上就是他们的讲述。</p>\n<p>当然，这些个例不具有统计学意义，仅仅只是帮助大家了解一下如果你得了新冠，有可能会经历啥。</p>\n<p>接下来，也结合一些国外的论文，给大家聊聊<strong>「 再感染 」</strong>跟<strong>「 后遗症 」</strong>。</p>\n<p>根据英国官方的数据，奥密克戎的确会带来更多的再感染，在所有确定的再感染中，93.4% 发生在奥密克戎大流行期间。</p>\n<p>但，别着急，根据统计，<strong>只有不到 6.75% 的感染者发生了再感染</strong>。概率是很低的。<br><img src=\"/img/202212/fhtrry3455.png\" alt=\"erik.xyz\"></p>\n<p>一方面暴露在不同的毒株下，可能会重复感染，一方面即便是同一毒株上次感染形成的抗体浓度降低以后，也可能重复感染。<br><img src=\"/img/202212/sfer321.png\" alt=\"erik.xyz\"></p>\n<p> 关于「 后遗症 」，目前奥密克戎出现的时间太短，刚过一年，所以国内外对其后遗症的研究成果都比较有限。</p>\n<p>今年 5 月，有位印度学者研究了 53 位奥密克戎感染康复者，在这 53 位患者中，28.3% ，84.9% 和 56.6% 的人康复后分别经历了流鼻涕，发烧和喉咙痛，但是症状都没有持续超过两个月。</p>\n<p>根据@丁香园的报道，有研究指出奥密克戎毒株后遗症发生率仅是 Delta 毒株的 24～50%（接种疫苗的情况下）。由于该数据截至 2021 年末，当时还未进入奥密克戎大流行，目前以奥密克戎感染为主的情况下，新冠后遗症比例可能比研究中呈现的更低。</p>\n<p>最后，简单聊下，大家可以做一些什么预防新冠呢？</p>\n<p>勤洗手这些都算是老调常谈了，此外好好休息，可以考虑常备一些药物在家，具体的药物建议，可以参考人民日报发布的《<strong>新冠病毒感染者用药目录</strong>》。<br><img src=\"/img/202212/dgfgh67868.png\" alt=\"erik.xyz\"></p>\n<p>这里只强调一点，<strong>不要 “ 病急乱投医 ”，避免重复用药、超剂量用药等情况</strong>。</p>\n<p>举个栗子，很多人可能同时备有乙酰氨基酚跟布洛芬，这两种药尽量不要同时使用，否则有一定可能导致急性肝衰竭。再比如使用布洛芬退烧的时候，需要每次间隔 6 小时，等等。</p>\n<p> 用药禁忌可以查看北京协和医院等权威医疗机构发布的信息。</p>\n<p>其他的一些基本事项，可以参考官方《<strong>新冠病毒感染者居家指引</strong>》。<br><img src=\"/img/202212/qwe76867.png\" alt=\"erik.xyz\"><br><img src=\"/img/202212/fghgffffffft7686.png\" alt=\"erik.xyz\"></p>\n<p>基本上相关信息网络上都能获取，大家注意找权威、靠谱的信息来源就行。</p>\n<p>最后，多喝热水。。。</p>\n<font color=red>\n备注：\n1. 本文只是一个帮助大家了解新冠的窗口，不构成任何医疗建议。\n2. 尽管对于大多数人来说，新冠并不可怕，但个体免疫力有差异，一旦病情严重，务必及时就医。\n  </font>\n\n\n<p>  转载自：<a href=\"https://mp.weixin.qq.com/s/hpheu-C8ZiwyCuI9GdSTQA\">https://mp.weixin.qq.com/s/hpheu-C8ZiwyCuI9GdSTQA</a></p>\n",
            "tags": [
                "转载",
                "杂录",
                "新冠肺炎"
            ]
        },
        {
            "id": "https://erik.xyz/2019/12/03/docker-long/",
            "url": "https://erik.xyz/2019/12/03/docker-long/",
            "title": "容器发展史",
            "date_published": "2019-12-03T15:52:00.000Z",
            "content_html": "<p>一、缘起</p>\n<p>1.1、鸿蒙</p>\n<p>在上古时期，天地初开，一群称之为 “运维” 的人们每天在一种叫作 “服务器” 的神秘盒子中创造属于他们的世界；他们在这个世界中每日劳作，一遍又一遍的写入他们的历史，比如搭建一个 nginx、布署一个 java web 应用…</p>\n<p>大多数人其实并没有那么聪明，他们所 “创造” 的事实上可能是有人已经创造过的东西，他们可能每天都在做着重复的劳动；久而久之，一些人厌倦了、疲惫了…又过了一段时间，一些功力深厚的老前辈创造了一些批量布署工具来帮助人们做一些重复性的劳动，这些工具被起名为 “Asible”、”Chef”、”Puppet” 等等…<br><span id=\"more\"></span><br>而随着时代的发展，”世界” 变得越来越复杂，运维们需要处理的事情越来越多，比如各种网络、磁盘环境的隔离，各种应用服务的高可用…在时代的洪流下，运维们急需要一种简单高效的布署工具，既能有一定的隔离性，又能方便使用，并且最大程度降低重复劳动来提升效率。</p>\n<p>1.2、创世</p>\n<p>在时代洪流的冲击下，一位名为 “Solomon Hykes” 的人异军突起，他创造了一个称之为 Docker 的工具，Docker 被创造以后就以灭世之威向运维们展示了它的强大；一个战斗力只有 5 的运维只需要学习 Docker 很短时间就可以完成资深运维们才能完成的事情，在某些情况下以前需要 1 天才能完成的工作使用 Docker 后几分钟就可以完成；此时运维们已经意识到 “新的时代” 开启了，接下来 Docker 开源并被整个运维界人们使用，Docker 也不断地完善增加各种各样的功能，此后世界正式进入 “容器纪元”。</p>\n<p>二、纷争</p>\n<p>2.1、发展</p>\n<p>随着 Docker 的日益成熟，一些人开始在 Docker 之上创造更加强大的工具，一些人开始在 Docker 之下为其提供更稳定的运行环境…</p>\n<p>其中一个叫作 Google 的公司在 Docker 之上创建了名为 “Kuberentes” 的工具，Kubernetes 操纵 Docker 完成更加复杂的任务；Kubernetes 的出现更加印证了 Docker 的强大，以及 “容器纪元” 的发展正确性。</p>\n<p>2.2、野心</p>\n<p>当然这是一个充满利益的世界，Google 公司创造 Kubernetes 是可以为他们带来利益的，比如他们可以让 Kubernetes 深度适配他们的云平台，以此来增加云平台的销量等；此时 Docker 创始人也成立了一个公司，提供 Docker 的付费服务以及深度定制等；不过值得一提的是 Docker 公司提供的付费服务始终没有 Kubernetes 为 Google 公司带来的利益高，所以在利益的驱使下，Docker 公司开始动起了歪心思: 创造一个 Kubernetes 的替代品，利用用户粘度复制 Kubernetes 的成功，从 Google 嘴里抢下这块蛋糕！此时 Docker 公司只想把蛋糕抢过来，但是他们根本没有在意到暗中一群人创造了一个叫 “rkt” 的东西也在妄图夺走他们嘴里的蛋糕。</p>\n<p>2.3、冲突</p>\n<p>在一段时间的沉默后，Docker 公司又创造了 “Swarm” 这个工具，妄图夺走 Google 公司利用 Kubernetes 赢来的蛋糕；当然，Google 这个公司极其庞大，人数众多，而且在这个社会有很大的影响地位…</p>\n<p>终于，巨人苏醒了，Google 联合了 Redhat、Microsoft、IBM、Intel、Cisco 等公司决定对这个爱动歪脑筋的 Docker 公司进行制裁；当然制裁的手段不能过于暴力，那样会让别人落下把柄，成为别人的笑料，被人所不耻；最总他们决定制订规范，成立组织，明确规定 Docker 的角色，以及它应当拥有的能力，这些规范包括但不限于 CRI、CNI 等；自此之后各大公司宣布他们容器相关的工具只兼容 CRI 等相关标准，无论是 Docker 还是 rkt 等工具，只要实现了这些标准，就可以配合这些容器工具进行使用。</p>\n<p>三、成败</p>\n<p>自此之后，Docker 跌下神坛，各路大神纷纷创造满足 CRI 等规范的工具用来取代 Docker，Docker 丢失了往日一家独大的场面，最终为了顺应时代发展，拆分自己成为模块化组件；这些模块化组件被放置在 mobyproject 中方便其他人重复利用。</p>\n<p>时至今日，虽然 Docker 已经不负以前，但是仍然是容器化首选工具，因为 Docker 是一个完整的产品，它可以提供除了满足 CRI 等标准以外更加方便的功能；但是制裁并非没有结果，Google 公司借此创造了 cri-o 用来满足 CRI 标准，其他公司也相应创建了对应的 CRI 实现；为了进一步分化 Docker 势力，一个叫作 Podman 的工具被创建，它以 cri-o 为基础，兼容大部份 Docker 命令的方式开始抢夺 Dcoker 用户；到目前为止 Podman 已经可以在大部份功能上替代 Docker。</p>\n<p>原文地址：<a href=\"https://mritd.me/2019/06/26/podman-history-of-container\">https://mritd.me/2019/06/26/podman-history-of-container</a></p>\n",
            "tags": [
                "转载",
                "杂谈"
            ]
        },
        {
            "id": "https://erik.xyz/2019/08/16/ca-zheng-shu-sheng-cheng/",
            "url": "https://erik.xyz/2019/08/16/ca-zheng-shu-sheng-cheng/",
            "title": "ca证书生成",
            "date_published": "2019-08-16T06:09:00.000Z",
            "content_html": "<p>想要从商业 CA 获取数字证书需要向其支付一定的金钱，不过我们不用那么破费，可以自己成为 root CA，为自己发布证书。</p>\n<p>在本实验中，我们将成为 root CA，并为该 CA 生成证书。不像其他 CA 需要被另外的 CA 认证， root CA 的证书是自己为自己认证的，一般 Root CA 的证书都已事先加载在大多数操作系统，浏览器或者依赖 PKI 的软件之中了。Root CA 的证书是被无条件信任的。<br><span id=\"more\"></span></p>\n<p>配置文件：openssl.conf</p>\n<p>为了使用 openssl 生成证书，我们首先需要进行配置，配置文件扩展名为.cnf。openssl 的 ca， req， x509 命令常常会用到这份配置文件。你可以从 /usr/lib/ssl/openssl.cnf 获得一份拷贝。将文件拷贝到工作目录后，创建以下在配置文件中指定的子文件夹（详情查看配置文件[CA default]处）<br>首先我们新建一个工作目录：</p>\n<p>$ cd /home/shiyanlou</p>\n<p>$ mkdir openssl</p>\n<p>$ cd openssl</p>\n<p>需要的文件夹和文件配置在 openssl.cnf 中都能找到：<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dir = ./demoCA # Where everything is kept</span><br><span class=\"line\">certs = $dir/certs # Where the issued certs are kept</span><br><span class=\"line\">crl_dir = $dir/crl # Where the issued crl are kept</span><br><span class=\"line\">new_certs_dir = $dir/newcerts # default place for new certs.</span><br><span class=\"line\">database = $dir/index.txt # database index file.</span><br><span class=\"line\">serial = $dir/serial # The current serial number</span><br></pre></td></tr></table></figure><br>openssl.cnf 中相关配置截图：</p>\n<p><img src=\"/img/201907/ca1.png\" alt=\"ca截图\"></p>\n<p>在工作目录下我们需要创建如下这些文件夹和文件，这里给出文件目录树：<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">|-- demoCA</span><br><span class=\"line\">|   |-- certs</span><br><span class=\"line\">|   |-- crl</span><br><span class=\"line\">|   |-- index.txt</span><br><span class=\"line\">|   |-- newcerts</span><br><span class=\"line\">|   `-- serial</span><br><span class=\"line\">`-- openssl.cnf</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p>index.txt 只要创建空文件就行，至于 serial 文件，内容必须是字符串格式的数字（比如 1000）<br>具体执行命令如下：<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo cp /usr/lib/ssl/openssl.cnf .  </span><br><span class=\"line\">$ mkdir demoCA                                                                                 </span><br><span class=\"line\">$ cd demoCA                                              </span><br><span class=\"line\">$ mkdir certs crl newcerts                                                                     </span><br><span class=\"line\">$ touch index.txt                                                           </span><br><span class=\"line\">$ echo &#x27;1000&#x27; &gt; serial                                                       </span><br><span class=\"line\">$ cd ..</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"/img/201907/ca2.png\" alt=\"ca截图\"><br>一旦你设置好 openssl.cnf 就可以创建和发布证书了。</p>\n<p>数字证书认证机构（CA）<br>我们需要为自己的 CA 生成自签名证书。这意味着该机构是被信任的，而它的证书会作为 root 证书。你可以运行以下命令为 CA 生成自签名证书：<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ openssl req -new -x509 -keyout ca.key -out ca.crt -config openssl.cnf</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p>它要求你提供信息和密码，可千万别忘记密码了（我这里输入的密码是 shiyanlou），因为每次为别人签证书的时候你都需要用到密码。信息包括城市名，通用名等等。命令的输出存储在两个文件中：ca.key 与 ca.crt 中。文件 ca.key 包括 CA 的私钥，而 ca.crt 包含了公钥证书。<br><img src=\"/img/201907/ca3.png\" alt=\"ca截图\"></p>\n<p>现在，我们是 root CA 了，我们已经准备好为我们的客户签数字证书，我们的第一个客户是叫作 PKILabServer.com 的公司，这家公司从 CA 获取数字证书需要 3 个步骤：</p>\n<ul>\n<li>生成公开/私有密钥对</li>\n</ul>\n<p>该公司首先需要生成它自己的公开/私有密钥对。我们运行以下命令来生成 RSA 密钥对。你同时需要提供一个密码来保护你的密钥（我这里设置的密码是 pkilab）。密钥会被保存在 server.key 文件中。<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ openssl genrsa -des3 -out server.key 1024</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p><img src=\"/img/201907/ca4.png\" alt=\"ca截图\"></p>\n<ul>\n<li>生成证书签名请求</li>\n</ul>\n<p>一旦公司拥有了密钥文件，它应当生成证书签名请求（CSR）。CSR 将被发送给 CA，CA 会为该请求生成证书（通常在确认 CSR 中的身份信息匹配后）。请将 PKILabServer.com 作为证书请求的通用名，并且请记住自己都输了些啥。<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">$ openssl req -new -key server.key -out server.csr -config openssl.cnf</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p>最开始输入的密码就是我们上面设置的密码（pkilab）<br><img src=\"/img/201907/ca5.png\" alt=\"ca截图\"></p>\n<ul>\n<li>生成证书</li>\n</ul>\n<p>生成证书。CSR 文件需要拥有 CA 的签名来构成证书。在现实世界中，CSR 文件常常被发送给可信任的 CA 签名。本实验中，我们将使用我们自己的 CA 来生成证书：<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ openssl ca -in server.csr -out server.crt -cert ca.crt -keyfile ca.key -config openssl.cnf</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<p>输入的密码是我们在第一步设置的密码（shiyanlou）<br><img src=\"/img/201907/ca6.png\" alt=\"ca截图\"></p>\n<p>如果 OpenSSL 拒绝生成证书，那很可能是因为你请求中的名字与 CA 所持有的不匹配。匹配规则在配置文件中指定([policy match]处)，你可以更改名字也可以更改规则。都做到这了，就改规则吧。<br>此时的目录结构如下：<br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">|-- ca.crt</span><br><span class=\"line\">|-- ca.key</span><br><span class=\"line\">|-- demoCA</span><br><span class=\"line\">|   |-- certs</span><br><span class=\"line\">|   |-- crl</span><br><span class=\"line\">|   |-- index.txt</span><br><span class=\"line\">|   |-- newcerts</span><br><span class=\"line\">|   `-- serial</span><br><span class=\"line\">|-- openssl.cnf</span><br><span class=\"line\">|-- server.crt</span><br><span class=\"line\">|-- server.csr</span><br><span class=\"line\">`-- server.key</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></p>\n<h1 id=\"本文来源于实验楼\"><a href=\"#本文来源于实验楼\" class=\"headerlink\" title=\"本文来源于实验楼\"></a><a href=\"#本文来源于实验楼\" title=\"本文来源于实验楼\"></a>本文来源于<a href=\"https://www.shiyanlou.com\">实验楼</a></h1>",
            "tags": [
                "转载",
                "ca证书",
                "证书生成"
            ]
        },
        {
            "id": "https://erik.xyz/2019/03/27/zui-quan-de-zheng-ze-biao-da-shi/",
            "url": "https://erik.xyz/2019/03/27/zui-quan-de-zheng-ze-biao-da-shi/",
            "title": "最全的常用正则表达式大全",
            "date_published": "2019-03-27T11:05:00.000Z",
            "content_html": "<p>很多不太懂正则的朋友，在遇到需要用正则校验数据时，往往是在网上去找很久，结果找来的还是不很符合要求。所以我最近把开发中常用的一些正则表达式整理了一下，包括校验数字、字符、一些特殊的需求等等。给自己留个底，也给朋友们做个参考。<br><span id=\"more\"></span></p>\n<p><strong>一、校验数字的表达式</strong><br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*   数字：^[0-9]*$</span><br><span class=\"line\">*   n位的数字：^d&#123;n&#125;$</span><br><span class=\"line\">*   至少n位的数字：^d&#123;n,&#125;$</span><br><span class=\"line\">*   m-n位的数字：^d&#123;m,n&#125;$</span><br><span class=\"line\">*   零和非零开头的数字：^(0|[1-9][0-9]*)$</span><br><span class=\"line\">*   非零开头的最多带两位小数的数字：^([1-9][0-9]*)+(.[0-9]&#123;1,2&#125;)?$</span><br><span class=\"line\">*   带1-2位小数的正数或负数：^(-)?d+(.d&#123;1,2&#125;)?$</span><br><span class=\"line\">*   正数、负数、和小数：^(-|+)?d+(.d+)?$</span><br><span class=\"line\">*   有两位小数的正实数：^[0-9]+(.[0-9]&#123;2&#125;)?$</span><br><span class=\"line\">*   有1~3位小数的正实数：^[0-9]+(.[0-9]&#123;1,3&#125;)?$</span><br><span class=\"line\">*   非零的正整数：^[1-9]d_$ 或 ^([1-9][0-9]_)&#123;1,3&#125;$ 或 ^+?[1-9][0-9]*$</span><br><span class=\"line\">*   非零的负整数：^-[1-9][]0-9″_$ 或 ^-[1-9]d_$</span><br><span class=\"line\">*   非负整数：^d+$ 或 ^[1-9]d*|0$</span><br><span class=\"line\">*   非正整数：^-[1-9]d*|0$ 或 ^((-d+)|(0+))$</span><br><span class=\"line\">*   非负浮点数：^d+(.d+)?$ 或 ^[1-9]d_.d_|0.d_[1-9]d_|0?.0+|0$</span><br><span class=\"line\">*   非正浮点数：^((-d+(.d+)?)|(0+(.0+)?))$ 或 ^(-([1-9]d_.d_|0.d_[1-9]d_))|0?.0+|0$</span><br><span class=\"line\">*   正浮点数：^[1-9]d_.d_|0.d_[1-9]d_$ 或 ^(([0-9]+.[0-9]_[1-9][0-9]_)|([0-9]_[1-9][0-9]_.[0-9]+)|([0-9]_[1-9][0-9]_))$</span><br><span class=\"line\">*   负浮点数：^-([1-9]d_.d_|0.d_[1-9]d_)$ 或 ^(-(([0-9]+.[0-9]_[1-9][0-9]_)|([0-9]_[1-9][0-9]_.[0-9]+)|([0-9]_[1-9][0-9]_)))$</span><br><span class=\"line\">*   浮点数：^(-?d+)(.d+)?$ 或 ^-?([1-9]d_.d_|0.d_[1-9]d_|0?.0+|0)$</span><br></pre></td></tr></table></figure><br><strong>二、校验字符的表达式</strong><br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*   汉字：^[一-龥]&#123;0,&#125;$</span><br><span class=\"line\">*   英文和数字：^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]&#123;4,40&#125;$</span><br><span class=\"line\">*   长度为3-20的所有字符：^.&#123;3,20&#125;$</span><br><span class=\"line\">*   由26个英文字母组成的字符串：^[A-Za-z]+$</span><br><span class=\"line\">*   由26个大写英文字母组成的字符串：^[A-Z]+$</span><br><span class=\"line\">*   由26个小写英文字母组成的字符串：^[a-z]+$</span><br><span class=\"line\">*   由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$</span><br><span class=\"line\">*   由数字、26个英文字母或者下划线组成的字符串：^w+$ 或 ^w&#123;3,20&#125;$</span><br><span class=\"line\">*   中文、英文、数字包括下划线：^[一-龥A-Za-z0-9_]+$</span><br><span class=\"line\">*   中文、英文、数字但不包括下划线等符号：^[一-龥A-Za-z0-9]+$ 或 ^[一-龥A-Za-z0-9]&#123;2,20&#125;$</span><br><span class=\"line\">*   可以输入含有^%&amp;’,;=?$”等字符：[^%&amp;’,;=?$”]+</span><br><span class=\"line\">*   禁止输入含有&lt;del&gt;的字符：[^&lt;/del&gt;“]+</span><br></pre></td></tr></table></figure><br><strong>三、特殊需求表达式</strong><br><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">*   Email地址：^w+([-+.]w+)_@w+([-.]w+)_.w+([-.]w+)*$</span><br><span class=\"line\">*   域名：[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/.?</span><br><span class=\"line\">*   InternetURL：[a-zA-z]+://[^s]* 或 ^http://([w-]+.)+[w-]+(/[w-./?%&amp;=]*)?$</span><br><span class=\"line\">*   手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])d&#123;8&#125;$</span><br><span class=\"line\">*   电话号码(“XXX-XXXXXXX”、”XXXX-XXXXXXXX”、”XXX-XXXXXXX”、”XXX-XXXXXXXX”、”XXXXXXX”和”XXXXXXXX)：^($$d&#123;3,4&#125;-)|d&#123;3.4&#125;-)?d&#123;7,8&#125;$</span><br><span class=\"line\">*   国内电话号码(0511-4405222、021-87888822)：d&#123;3&#125;-d&#123;8&#125;|d&#123;4&#125;-d&#123;7&#125;</span><br><span class=\"line\">*   身份证号(15位、18位数字)：^d&#123;15&#125;|d&#123;18&#125;$</span><br><span class=\"line\">*   短身份证号码(数字、字母x结尾)：^([0-9])&#123;7,18&#125;(x|X)?$ 或 ^d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$</span><br><span class=\"line\">*   帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</span><br><span class=\"line\">*   密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]w&#123;5,17&#125;$</span><br><span class=\"line\">*   强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?=._d)(?=._[a-z])(?=.*[A-Z]).&#123;8,10&#125;$</span><br><span class=\"line\">*   日期格式：^d&#123;4&#125;-d&#123;1,2&#125;-d&#123;1,2&#125;</span><br><span class=\"line\">*   一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</span><br><span class=\"line\">*   一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$</span><br><span class=\"line\">*   钱的输入格式：</span><br><span class=\"line\"></span><br><span class=\"line\">        *   有四种钱的表示形式我们可以接受:”10000.00″ 和 “10,000.00″, 和没有 “分” 的 “10000″ 和 “10,000″：^[1-9][0-9]*$</span><br><span class=\"line\">    *   这表示任意一个不以0开头的数字，但是，这也意味着一个字符”0″不通过，所以我们采用下面的形式：^(0|[1-9][0-9]*)$</span><br><span class=\"line\"></span><br><span class=\"line\">                *   一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$</span><br><span class=\"line\">    *   这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉，因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$</span><br><span class=\"line\">    *   必须说明的是，小数点后面至少应该有1位数，所以”10.”是不通过的，但是 “10″ 和 “10.2″ 是通过的：^[0-9]+(.[0-9]&#123;2&#125;)?$</span><br><span class=\"line\">    *   这样我们规定小数点后面必须有两位，如果你认为太苛刻了，可以这样：^[0-9]+(.[0-9]&#123;1,2&#125;)?$</span><br><span class=\"line\">    *   这样就允许用户只写一位小数。下面我们该考虑数字中的逗号了，我们可以这样：^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$</span><br><span class=\"line\">    *   1到3个数字，后面跟着任意个 逗号+3个数字，逗号成为可选，而不是必须：^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$</span><br><span class=\"line\">    *   备注：这就是最终结果了，别忘了”+”可以用”*”替代。如果你觉得空字符串也可以接受的话(奇怪，为什么?)最后，别忘了在用函数时去掉去掉那个反斜杠，一般的错误都在这里</span><br><span class=\"line\">*   xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+.[x|X][m|M][l|L]$</span><br><span class=\"line\">*   中文字符的正则表达式：[一-龥]</span><br><span class=\"line\">*   双字节字符：[^-ÿ] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</span><br><span class=\"line\">*   空白行的正则表达式：s* (可以用来删除空白行)</span><br><span class=\"line\">*   HTML标记的正则表达式：``&lt;(S_?)[^&gt;]_&gt;._?&lt;/&gt;|&lt;._? /&gt;`` (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)</span><br><span class=\"line\">*   首尾空白字符的正则表达式：^s_|s_$或(^s_)|(s_$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</span><br><span class=\"line\">*   腾讯QQ号：[1-9][0-9]&#123;4,&#125; (腾讯QQ号从10000开始)</span><br><span class=\"line\">*   中国邮政编码：[1-9]d&#123;5&#125;(?!d) (中国邮政编码为6位数字)</span><br><span class=\"line\">*   IP地址：d+.d+.d+.d+ (提取IP地址时有用)</span><br><span class=\"line\">*   IP地址：((?:(?:25[0-5]|2[0-4]d|[01]?d?d).)&#123;3&#125;(?:25[0-5]|2[0-4]d|[01]?d?d)) (由@飞龙三少 提供，感谢共享)</span><br></pre></td></tr></table></figure><br>作者：zxin</p>\n",
            "tags": [
                "转载",
                "正则",
                "正则表达式"
            ]
        },
        {
            "id": "https://erik.xyz/2018/04/17/r-yu-yan-hui-zhi-shi-jie-hang-ban-xian-lu-tu/",
            "url": "https://erik.xyz/2018/04/17/r-yu-yan-hui-zhi-shi-jie-hang-ban-xian-lu-tu/",
            "title": "利用R语言绘制世界航班路线图",
            "date_published": "2018-04-17T11:03:00.000Z",
            "content_html": "<p><strong>作者简介Introduction</strong></p>\n<p><strong>taoyan：</strong>伪码农，R语言爱好者，爱开源。 个人博客: <a href=\"https://ytlogos.github.io/\">https://ytlogos.github.io/</a> <strong>、</strong></p>\n<p><img src=\"http://mmbiz.qpic.cn/mmbiz_gif/y2fhgP4leThJiaFzTDexmxpianqLyez0XSGmbKia8GfeJutxnAkGiciaevwnP89eqI8icjVCYia0GG98ribmFhhGrKemtQ/640?wx_fmt=gif&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1\" alt=\"\" title=\"烟花\"></p>\n<p><img src=\"http://mmbiz.qpic.cn/mmbiz_png/y2fhgP4leTgLwP9BJYtDFtibfby9doVLqwWicgVQzvia8NvwesibRu3UXCV4ib88icOd6Y3EFjUsaVMk9eGEZTicdtOag/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1\" alt=\"\"><strong><br>一、 简介</strong></p>\n<p>本文基于NASA的夜间地图（<a href=\"https://www.nasa.gov/specials/blackmarble/2016/globalmaps/BlackMarble\\_2016\\_01deg.jpg）的基础上进行世界航班路线可视化，参考多篇博客以及可视化案例。\">https://www.nasa.gov/specials/blackmarble/2016/globalmaps/BlackMarble_2016_01deg.jpg）的基础上进行世界航班路线可视化，参考多篇博客以及可视化案例。</a> <strong>1. 包加载</strong> 本博客使用的包较多，利用pacman包里的<strong>p_load()</strong>函数进行加载。<span id=\"more\"></span></p>\n<blockquote>\n<p>library(pacman) p_load(tidyverse, data.table, geosphere, grid, jpeg, plyr)</p>\n</blockquote>\n<p>  <strong>2. 数据准备</strong> 使用的数据来自于OpenFlights.org（<a href=\"https://openflights.org/data.html）。\">https://openflights.org/data.html）。</a> <strong>3.数据下载</strong></p>\n<blockquote>\n<p>download.file(“<a href=\"https://raw.githubusercontent.com/jpatokal/openflights/master/data/airlines.dat\">https://raw.githubusercontent.com/jpatokal/openflights/master/data/airlines.dat”,destfile</a> = “airlines.dat”, mode = “wb”) download.file(“<a href=\"https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat\">https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat”,destfile</a> = “airports.dat”, mode = “wb”) download.file(“<a href=\"https://raw.githubusercontent.com/jpatokal/openflights/master/data/routes.dat\">https://raw.githubusercontent.com/jpatokal/openflights/master/data/routes.dat”,destfile</a> = “routes.dat”, mode = “wb”)</p>\n</blockquote>\n<p><strong>4.数据导入</strong></p>\n<blockquote>\n<p>airlines &lt;- fread(“airlines.dat”, sep = “,”, skip = 1) airports &lt;- fread(“airports.dat”, sep = “,”) routes &lt;- fread(“routes.dat”, sep = “,”)</p>\n</blockquote>\n<p><strong>5. 数据整理</strong></p>\n<blockquote>\n<h1 id=\"添加列名colnames-airlines-lt-c-“airline-id”-“name”-“alias”-“iata”-“icao”-“callisign”-“country”-“active”-colnames-airports-lt-c-“airport-id”-“name”-“city”-“country”-”iata”-“icao”-“latitude”-“longitude”-”altitude”-“timezone”-”dst”-”tz-database-time-zone”-”type”-“source”-colnames-routes-lt-c-“airline”-“airline-id”-“source-airport”-“source-airport-id”-”destination-airport”-”destination-airport-id”-”codeshare”-“stops”-”equipment”\"><a href=\"#添加列名colnames-airlines-lt-c-“airline-id”-“name”-“alias”-“iata”-“icao”-“callisign”-“country”-“active”-colnames-airports-lt-c-“airport-id”-“name”-“city”-“country”-”iata”-“icao”-“latitude”-“longitude”-”altitude”-“timezone”-”dst”-”tz-database-time-zone”-”type”-“source”-colnames-routes-lt-c-“airline”-“airline-id”-“source-airport”-“source-airport-id”-”destination-airport”-”destination-airport-id”-”codeshare”-“stops”-”equipment”\" class=\"headerlink\" title=\"添加列名colnames(airlines) &lt;- c(“airline_id”, “name”, “alias”, “iata”, “icao”, “callisign”, “country”, “active”) colnames(airports) &lt;- c(“airport_id”, “name”, “city”, “country”,”iata”, “icao”, “latitude”, “longitude”,”altitude”, “timezone”,”dst”,”tz_database_time_zone”,”type”, “source”) colnames(routes) &lt;- c(“airline”, “airline_id”, “source_airport”, “source_airport_id”,”destination_airport”,”destination_airport_id”,”codeshare”, “stops”,”equipment”)\"></a>添加列名colnames(airlines) &lt;- c(“airline_id”, “name”, “alias”, “iata”, “icao”, “callisign”, “country”, “active”) colnames(airports) &lt;- c(“airport_id”, “name”, “city”, “country”,”iata”, “icao”, “latitude”, “longitude”,”altitude”, “timezone”,”dst”,”tz_database_time_zone”,”type”, “source”) colnames(routes) &lt;- c(“airline”, “airline_id”, “source_airport”, “source_airport_id”,”destination_airport”,”destination_airport_id”,”codeshare”, “stops”,”equipment”)</h1><h1 id=\"类型转换-routes-airline-id-lt-as-numeric-routes-airline-id\"><a href=\"#类型转换-routes-airline-id-lt-as-numeric-routes-airline-id\" class=\"headerlink\" title=\"类型转换 routes$airline_id &lt;- as.numeric(routes$airline_id)\"></a>类型转换 routes$airline_id &lt;- as.numeric(routes$airline_id)</h1><h1 id=\"airlines与routes数据融合-flights-lt-left-join-routes-airlines-by-”airline-id”\"><a href=\"#airlines与routes数据融合-flights-lt-left-join-routes-airlines-by-”airline-id”\" class=\"headerlink\" title=\"airlines与routes数据融合 flights &lt;- left_join(routes, airlines, by=”airline_id”)\"></a>airlines与routes数据融合 flights &lt;- left_join(routes, airlines, by=”airline_id”)</h1><h1 id=\"flights与airports数据融合-airports-orig-lt-airports-c-5-7-8-colnames-airports-orig-lt-c-“source-airport”-”source-airport-lat”-“source-airport-long”-airports-dest-lt-airports-c-5-7-8-colnames-airports-dest-lt-c-“destination-airport”-“destination-airport-lat”-“destination-airport-long”-flights-lt-left-join-flights-airports-orig-by-“source-airport”-flights-lt-left-join-flights-airports-dest-by-“destination-airport”\"><a href=\"#flights与airports数据融合-airports-orig-lt-airports-c-5-7-8-colnames-airports-orig-lt-c-“source-airport”-”source-airport-lat”-“source-airport-long”-airports-dest-lt-airports-c-5-7-8-colnames-airports-dest-lt-c-“destination-airport”-“destination-airport-lat”-“destination-airport-long”-flights-lt-left-join-flights-airports-orig-by-“source-airport”-flights-lt-left-join-flights-airports-dest-by-“destination-airport”\" class=\"headerlink\" title=\"flights与airports数据融合 airports_orig &lt;- airports[,c(5,7,8)] colnames(airports_orig) &lt;- c(“source_airport”,”source_airport_lat”, “source_airport_long”) airports_dest &lt;- airports[, c(5, 7, 8)] colnames(airports_dest) &lt;- c(“destination_airport”, “destination_airport_lat”, “destination_airport_long”) flights &lt;- left_join(flights, airports_orig, by = “source_airport”) flights &lt;- left_join(flights, airports_dest, by = “destination_airport”)\"></a>flights与airports数据融合 airports_orig &lt;- airports[,c(5,7,8)] colnames(airports_orig) &lt;- c(“source_airport”,”source_airport_lat”, “source_airport_long”) airports_dest &lt;- airports[, c(5, 7, 8)] colnames(airports_dest) &lt;- c(“destination_airport”, “destination_airport_lat”, “destination_airport_long”) flights &lt;- left_join(flights, airports_orig, by = “source_airport”) flights &lt;- left_join(flights, airports_dest, by = “destination_airport”)</h1><h1 id=\"剔除缺失值-flights-lt-na-omit-flights-cols-c-“source-airport-long”-“source-airport-lat”-“destination-airport-long”-“destination-airport-lat”\"><a href=\"#剔除缺失值-flights-lt-na-omit-flights-cols-c-“source-airport-long”-“source-airport-lat”-“destination-airport-long”-“destination-airport-lat”\" class=\"headerlink\" title=\"剔除缺失值 flights &lt;- na.omit(flights, cols = c(“source_airport_long”, “source_airport_lat”, “destination_airport_long”, “destination_airport_lat”))\"></a>剔除缺失值 flights &lt;- na.omit(flights, cols = c(“source_airport_long”, “source_airport_lat”, “destination_airport_long”, “destination_airport_lat”))</h1><h1 id=\"最后数据如下-head-flights-c-1-5\"><a href=\"#最后数据如下-head-flights-c-1-5\" class=\"headerlink\" title=\"最后数据如下 head(flights[,c(1:5)])\"></a>最后数据如下 head(flights[,c(1:5)])</h1></blockquote>\n<p>  <strong>6. 下面就是准备地理信息数据</strong> 本文主要是可视化地理信息上的点与点之间的连接，这可以通过geosphere包里的函数gcIntermediate()很轻松实现。具体使用方法可以参考这里（<a href=\"http://flowingdata.com/2011/05/11/how-to-map-connections-with-great-circles/）。\">http://flowingdata.com/2011/05/11/how-to-map-connections-with-great-circles/）。</a></p>\n<blockquote>\n<h1 id=\"按航空公司拆分数据集-flights-split-lt-split-flights-flights-name\"><a href=\"#按航空公司拆分数据集-flights-split-lt-split-flights-flights-name\" class=\"headerlink\" title=\"按航空公司拆分数据集 flights_split &lt;- split(flights, flights$name)\"></a>按航空公司拆分数据集 flights_split &lt;- split(flights, flights$name)</h1><h1 id=\"Calculate-intermediate-points-between-each-two-locations-flights-all-lt-lapply-flights-split-function-x-gcIntermediate-x-c-“source-airport-long”-“source-airport-lat”-x-c-“destination-airport-long”-“destination-airport-lat”-n-100-breakAtDateLine-FALSE-addStartEnd-TRUE-sp-TRUE\"><a href=\"#Calculate-intermediate-points-between-each-two-locations-flights-all-lt-lapply-flights-split-function-x-gcIntermediate-x-c-“source-airport-long”-“source-airport-lat”-x-c-“destination-airport-long”-“destination-airport-lat”-n-100-breakAtDateLine-FALSE-addStartEnd-TRUE-sp-TRUE\" class=\"headerlink\" title=\"Calculate intermediate points between each two locations flights_all &lt;- lapply(flights_split, function(x) gcIntermediate(x[, c(“source_airport_long”, “source_airport_lat”)], x[, c(“destination_airport_long”, “destination_airport_lat”)], n=100, breakAtDateLine = FALSE, addStartEnd = TRUE, sp = TRUE))\"></a>Calculate intermediate points between each two locations flights_all &lt;- lapply(flights_split, function(x) gcIntermediate(x[, c(“source_airport_long”, “source_airport_lat”)], x[, c(“destination_airport_long”, “destination_airport_lat”)], n=100, breakAtDateLine = FALSE, addStartEnd = TRUE, sp = TRUE))</h1><h1 id=\"转换为数据框-flights-fortified-lt-lapply-flights-all-function-x-ldply-x-lines-fortify\"><a href=\"#转换为数据框-flights-fortified-lt-lapply-flights-all-function-x-ldply-x-lines-fortify\" class=\"headerlink\" title=\"转换为数据框 flights_fortified &lt;- lapply(flights_all, function(x) ldply(x@lines, fortify))\"></a>转换为数据框 flights_fortified &lt;- lapply(flights_all, function(x) ldply(x@lines, fortify))</h1><h1 id=\"Unsplit-lists-flights-fortified-lt-do-call-“rbind”-flights-fortified\"><a href=\"#Unsplit-lists-flights-fortified-lt-do-call-“rbind”-flights-fortified\" class=\"headerlink\" title=\"Unsplit lists flights_fortified &lt;- do.call(“rbind”, flights_fortified)\"></a>Unsplit lists flights_fortified &lt;- do.call(“rbind”, flights_fortified)</h1><h1 id=\"Add-and-clean-column-with-airline-names-flights-fortified-name-lt-rownames-flights-fortified-flights-fortified-name-lt-gsub-“-”-“”-flights-fortified-name\"><a href=\"#Add-and-clean-column-with-airline-names-flights-fortified-name-lt-rownames-flights-fortified-flights-fortified-name-lt-gsub-“-”-“”-flights-fortified-name\" class=\"headerlink\" title=\"Add and clean column with airline names flights_fortified$name &lt;- rownames(flights_fortified) flights_fortified$name &lt;- gsub(“..*”, “”, flights_fortified$name)\"></a>Add and clean column with airline names flights_fortified$name &lt;- rownames(flights_fortified) flights_fortified$name &lt;- gsub(“..*”, “”, flights_fortified$name)</h1><h1 id=\"Extract-first-and-last-observations-for-plotting-source-and-destination-points-i-e-airports-flights-points-lt-flights-fortified-gt-group-by-group-gt-filter-row-number-1-row-number-n\"><a href=\"#Extract-first-and-last-observations-for-plotting-source-and-destination-points-i-e-airports-flights-points-lt-flights-fortified-gt-group-by-group-gt-filter-row-number-1-row-number-n\" class=\"headerlink\" title=\"Extract first and last observations for plotting source and destination points (i.e., airports) flights_points &lt;- flights_fortified %&gt;% group_by(group) %&gt;% filter(row_number() == 1 | row_number() == n())\"></a>Extract first and last observations for plotting source and destination points (i.e., airports) flights_points &lt;- flights_fortified %&gt;% group_by(group) %&gt;% filter(row_number() == 1 | row_number() == n())</h1></blockquote>\n<p>  <strong>二、 可视化</strong> 接下来就是进行可视化了，前面讲了我们只是在NASA提供的夜间地球图上面进行数据映射，所以第一我们需要获取该背景地图。 <strong>1. 图片获取并渲染</strong></p>\n<blockquote>\n<h1 id=\"下载图片-download-file-“https-www-nasa-gov-specials-blackmarble-2016-globalmaps-BlackMarble-2016-01deg-jpg”-destfile-“BlackMarble-2016-01deg-jpg”-mode-“wb”\"><a href=\"#下载图片-download-file-“https-www-nasa-gov-specials-blackmarble-2016-globalmaps-BlackMarble-2016-01deg-jpg”-destfile-“BlackMarble-2016-01deg-jpg”-mode-“wb”\" class=\"headerlink\" title=\"下载图片 download.file(“https://www.nasa.gov/specials/blackmarble/2016/globalmaps/BlackMarble_2016_01deg.jpg”,destfile = “BlackMarble_2016_01deg.jpg”, mode = “wb”)\"></a>下载图片 download.file(“<a href=\"https://www.nasa.gov/specials/blackmarble/2016/globalmaps/BlackMarble\\_2016\\_01deg.jpg\">https://www.nasa.gov/specials/blackmarble/2016/globalmaps/BlackMarble_2016_01deg.jpg”,destfile</a> = “BlackMarble_2016_01deg.jpg”, mode = “wb”)</h1><h1 id=\"加载并渲染图片-earth-lt-readJPEG-“BlackMarble-2016-01deg-jpg”-native-TRUE-earth-lt-rasterGrob-earth-interpolate-TRUE\"><a href=\"#加载并渲染图片-earth-lt-readJPEG-“BlackMarble-2016-01deg-jpg”-native-TRUE-earth-lt-rasterGrob-earth-interpolate-TRUE\" class=\"headerlink\" title=\"加载并渲染图片 earth &lt;- readJPEG(“BlackMarble_2016_01deg.jpg”, native = TRUE) earth &lt;- rasterGrob(earth, interpolate = TRUE)\"></a>加载并渲染图片 earth &lt;- readJPEG(“BlackMarble_2016_01deg.jpg”, native = TRUE) earth &lt;- rasterGrob(earth, interpolate = TRUE)</h1></blockquote>\n<p><strong>2. 数据映射</strong> 由于航空公司十分多，就挑选几个有名的航空公司进行可视化。 <strong>(1) Lufthansa(德国汉莎航空公司)</strong></p>\n<blockquote>\n<p>ggplot() + annotation_custom(earth, xmin = -180, xmax = 180, ymin = -90, ymax = 90) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.0, size = 0.0, data = flights_fortified) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.2, size = 0.3, color = “#f9ba00”, data = flights_fortified[flights_fortified$name == “Lufthansa”, ]) + geom_point(data = flights_points[flights_points$name == “Lufthansa”, ], aes(long, lat), alpha = 0.8, size = 0.1, colour = “white”) + theme(panel.background = element_rect(fill = “#05050f”, colour = “#05050f”),panel.grid.major = element_blank(),panel.grid.minor = element_blank(),axis.title = element_blank(),axis.text = element_blank(),axis.ticks.length = unit(0, “cm”),legend.position = “none”) +annotate(“text”, x = -150, y = -18, hjust = 0, size = 14,label = paste(“Lufthansa”), color = “#f9ba00”, family = “Helvetica Black”) + annotate(“text”, x = -150, y = -26, hjust = 0, size = 8, label = paste(“Flight routes”), color = “white”) + annotate(“text”, x = -150, y = -30, hjust = 0, size = 7, label = paste(“ytlogos.github.io || NASA.gov || OpenFlights.org”), color = “white”, alpha = 0.5) + coord_equal()</p>\n</blockquote>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"\"> <strong>(2) Emirates(阿联酋航空公司)</strong></p>\n<blockquote>\n<p>ggplot() + annotation_custom(earth, xmin = -180, xmax = 180, ymin = -90, ymax = 90) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.0, size = 0.0, data = flights_fortified) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.2, size = 0.3, color = “#ff0000”, data = flights_fortified[flights_fortified$name == “Emirates”, ]) + geom_point(data = flights_points[flights_points$name == “Emirates”, ], aes(long, lat), alpha = 0.8, size = 0.1, colour = “white”) + theme(panel.background = element_rect(fill = “#05050f”, colour = “#05050f”), panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.title = element_blank(), axis.text = element_blank(), axis.ticks.length = unit(0, “cm”), legend.position = “none”) + annotate(“text”, x = -150, y = -18, hjust = 0, size = 14, label = paste(“Emirates”), color = “#ff0000”, family = “Fontin”) + annotate(“text”, x = -150, y = -26, hjust = 0, size = 8, label = paste(“Flight routes”), color = “white”) + annotate(“text”, x = -150, y = -30, hjust = 0, size = 7, label = paste(“ytlogos.github.io || NASA.gov || OpenFlights.org”), color = “white”, alpha = 0.5) + coord_equal()</p>\n</blockquote>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"\"> <strong>(3) British Airways(英国航空公司)</strong></p>\n<blockquote>\n<p>ggplot() + annotation_custom(earth, xmin = -180, xmax = 180, ymin = -90, ymax = 90) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.0, size = 0.0, data = flights_fortified) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.2, size = 0.3, color = “#075aaa”, data = flights_fortified[flights_fortified$name == “British Airways”, ]) + geom_point(data = flights_points[flights_points$name == “British Airways”, ], aes(long, lat), alpha = 0.8, size = 0.1, colour = “white”) + theme(panel.background = element_rect(fill = “#05050f”, colour = “#05050f”), panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.title = element_blank(), axis.text = element_blank(), axis.ticks.length = unit(0, “cm”), legend.position = “none”) + annotate(“text”, x = -150, y = -18, hjust = 0, size = 14, label = paste(“BRITISH AIRWAYS”), color = “#075aaa”, family = “Baker Signet Std”) + annotate(“text”, x = -150, y = -26, hjust = 0, size = 8, label = paste(“Flight routes”), color = “white”) + annotate(“text”, x = -150, y = -30, hjust = 0, size = 7, label = paste(“ytlogos.github.io || NASA.gov || OpenFlights.org”), color = “white”, alpha = 0.5) + coord_equal()</p>\n</blockquote>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"\"> <strong>(4) Air China(中国国航)</strong></p>\n<blockquote>\n<p>ggplot() + annotation_custom(earth, xmin = -180, xmax = 180, ymin = -90, ymax = 90) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.0, size = 0.0, data = flights_fortified) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.2, size = 0.3, color = “#F70C15”, data = flights_fortified[flights_fortified$name == “Air China”, ]) + geom_point(data = flights_points[flights_points$name == “Air China”, ], aes(long, lat), alpha = 0.8, size = 0.1, colour = “white”) + theme(panel.background = element_rect(fill = “#05050f”, colour = “#05050f”), panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.title = element_blank(), axis.text = element_blank(), axis.ticks.length = unit(0, “cm”), legend.position = “none”) + annotate(“text”, x = -150, y = -18, hjust = 0, size = 14, label = paste(“Air China”), color = “#F70C15”, family = “Times New Roman”) + annotate(“text”, x = -150, y = -26, hjust = 0, size = 8, label = paste(“Flight routes”), color = “white”) + annotate(“text”, x = -150, y = -30, hjust = 0, size = 7, label = paste(“ytlogos.github.io || NASA.gov || OpenFlights.org”), color = “white”, alpha = 0.5) + coord_equal()</p>\n</blockquote>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"\"> <strong>(5) China Southern Airlines(中国南航)</strong></p>\n<blockquote>\n<p>ggplot() + annotation_custom(earth, xmin = -180, xmax = 180, ymin = -90, ymax = 90) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.0, size = 0.0, data = flights_fortified) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.2, size = 0.3, color = “#004D9D”, data = flights_fortified[flights_fortified$name == “China Southern Airlines”, ]) + geom_point(data = flights_points[flights_points$name == “China Southern Airlines”, ], aes(long, lat), alpha = 0.8, size = 0.1, colour = “white”) + theme(panel.background = element_rect(fill = “#05050f”, colour = “#05050f”), panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.title = element_blank(), axis.text = element_blank(), axis.ticks.length = unit(0, “cm”), legend.position = “none”) + annotate(“text”, x = -150, y = -18, hjust = 0, size = 14, label = paste(“China Southern Airlines”), color = “#004D9D”, family = “Times New Roman”) + annotate(“text”, x = -150, y = -26, hjust = 0, size = 8, label = paste(“Flight routes”), color = “white”) + annotate(“text”, x = -150, y = -30, hjust = 0, size = 7, label = paste(“ytlogos.github.io || NASA.gov || OpenFlights.org”), color = “white”, alpha = 0.5) + coord_equal()</p>\n</blockquote>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"\"> <strong>(6) 一次性映射多家航空公司航行路线</strong></p>\n<blockquote>\n<h1 id=\"抽取数据集-flights-subset-lt-c-“Lufthansa”-“Emirates”-“British-Airways”-flights-subset-lt-flights-fortified-flights-fortified-name-in-flights-subset-flights-subset-points-lt-flights-subset-gt-group-by-group-gt-filter-row-number-1-row-number-n\"><a href=\"#抽取数据集-flights-subset-lt-c-“Lufthansa”-“Emirates”-“British-Airways”-flights-subset-lt-flights-fortified-flights-fortified-name-in-flights-subset-flights-subset-points-lt-flights-subset-gt-group-by-group-gt-filter-row-number-1-row-number-n\" class=\"headerlink\" title=\"抽取数据集 flights_subset &lt;- c(“Lufthansa”, “Emirates”, “British Airways”) flights_subset &lt;- flights_fortified[flights_fortified$name %in% flights_subset, ] flights_subset_points &lt;- flights_subset%&gt;% group_by(group)%&gt;% filter(row_number()==1|row_number()==n())\"></a>抽取数据集 flights_subset &lt;- c(“Lufthansa”, “Emirates”, “British Airways”) flights_subset &lt;- flights_fortified[flights_fortified$name %in% flights_subset, ] flights_subset_points &lt;- flights_subset%&gt;% group_by(group)%&gt;% filter(row_number()==1|row_number()==n())</h1><h1 id=\"可视化-ggplot-annotation-custom-earth-xmin-180-xmax-180-ymin-90-ymax-90-geom-path-aes-long-lat-group-id-color-name-alpha-0-2-size-0-3-data-flights-subset-geom-point-data-flights-subset-points-aes-long-lat-alpha-0-8-size-0-1-colour-“white”-scale-color-manual-values-c-“-f9ba00”-“-ff0000”-“-075aaa”-theme-panel-background-element-rect-fill-“-05050f”-colour-“-05050f”-panel-grid-major-element-blank-panel-grid-minor-element-blank-axis-title-element-blank-axis-text-element-blank-axis-ticks-length-unit-0-“cm”-legend-position-“none”-annotate-“text”-x-150-y-4-hjust-0-size-14-label-paste-“Lufthansa”-color-“-f9ba00”-family-“Helvetica-Black”-annotate-“text”-x-150-y-11-hjust-0-size-14-label-paste-“Emirates”-color-“-ff0000”-family-“Fontin”-annotate-“text”-x-150-y-18-hjust-0-size-14-label-paste-“BRITISH-AIRWAYS”-color-“-075aaa”-family-“Baker-Signet-Std”-annotate-“text”-x-150-y-30-hjust-0-size-8-label-paste-“Flight-routes”-color-“white”-annotate-“text”-x-150-y-34-hjust-0-size-7-label-paste-“ytlogos-github-io-NASA-gov-OpenFlights-org”-color-“white”-alpha-0-5-coord-equal\"><a href=\"#可视化-ggplot-annotation-custom-earth-xmin-180-xmax-180-ymin-90-ymax-90-geom-path-aes-long-lat-group-id-color-name-alpha-0-2-size-0-3-data-flights-subset-geom-point-data-flights-subset-points-aes-long-lat-alpha-0-8-size-0-1-colour-“white”-scale-color-manual-values-c-“-f9ba00”-“-ff0000”-“-075aaa”-theme-panel-background-element-rect-fill-“-05050f”-colour-“-05050f”-panel-grid-major-element-blank-panel-grid-minor-element-blank-axis-title-element-blank-axis-text-element-blank-axis-ticks-length-unit-0-“cm”-legend-position-“none”-annotate-“text”-x-150-y-4-hjust-0-size-14-label-paste-“Lufthansa”-color-“-f9ba00”-family-“Helvetica-Black”-annotate-“text”-x-150-y-11-hjust-0-size-14-label-paste-“Emirates”-color-“-ff0000”-family-“Fontin”-annotate-“text”-x-150-y-18-hjust-0-size-14-label-paste-“BRITISH-AIRWAYS”-color-“-075aaa”-family-“Baker-Signet-Std”-annotate-“text”-x-150-y-30-hjust-0-size-8-label-paste-“Flight-routes”-color-“white”-annotate-“text”-x-150-y-34-hjust-0-size-7-label-paste-“ytlogos-github-io-NASA-gov-OpenFlights-org”-color-“white”-alpha-0-5-coord-equal\" class=\"headerlink\" title=\"可视化 ggplot() + annotation_custom(earth, xmin = -180, xmax = 180, ymin = -90, ymax = 90) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.2, size = 0.3, data = flights_subset) + geom_point(data = flights_subset_points, aes(long, lat), alpha = 0.8, size = 0.1, colour = “white”) + scale_color_manual(values = c(“#f9ba00”, “#ff0000”, “#075aaa”)) + theme(panel.background = element_rect(fill = “#05050f”, colour = “#05050f”), panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.title = element_blank(), axis.text = element_blank(), axis.ticks.length = unit(0, “cm”), legend.position = “none”) + annotate(“text”, x = -150, y = -4, hjust = 0, size = 14, label = paste(“Lufthansa”), color = “#f9ba00”, family = “Helvetica Black”) + annotate(“text”, x = -150, y = -11, hjust = 0, size = 14, label = paste(“Emirates”), color = “#ff0000”, family = “Fontin”) + annotate(“text”, x = -150, y = -18, hjust = 0, size = 14, label = paste(“BRITISH AIRWAYS”), color = “#075aaa”, family = “Baker Signet Std”) + annotate(“text”, x = -150, y = -30, hjust = 0, size = 8, label = paste(“Flight routes”), color = “white”) + annotate(“text”, x = -150, y = -34, hjust = 0, size = 7, label = paste(“ytlogos.github.io || NASA.gov || OpenFlights.org”), color = “white”, alpha = 0.5) + coord_equal()\"></a>可视化 ggplot() + annotation_custom(earth, xmin = -180, xmax = 180, ymin = -90, ymax = 90) + geom_path(aes(long, lat, group = id, color = name), alpha = 0.2, size = 0.3, data = flights_subset) + geom_point(data = flights_subset_points, aes(long, lat), alpha = 0.8, size = 0.1, colour = “white”) + scale_color_manual(values = c(“#f9ba00”, “#ff0000”, “#075aaa”)) + theme(panel.background = element_rect(fill = “#05050f”, colour = “#05050f”), panel.grid.major = element_blank(), panel.grid.minor = element_blank(), axis.title = element_blank(), axis.text = element_blank(), axis.ticks.length = unit(0, “cm”), legend.position = “none”) + annotate(“text”, x = -150, y = -4, hjust = 0, size = 14, label = paste(“Lufthansa”), color = “#f9ba00”, family = “Helvetica Black”) + annotate(“text”, x = -150, y = -11, hjust = 0, size = 14, label = paste(“Emirates”), color = “#ff0000”, family = “Fontin”) + annotate(“text”, x = -150, y = -18, hjust = 0, size = 14, label = paste(“BRITISH AIRWAYS”), color = “#075aaa”, family = “Baker Signet Std”) + annotate(“text”, x = -150, y = -30, hjust = 0, size = 8, label = paste(“Flight routes”), color = “white”) + annotate(“text”, x = -150, y = -34, hjust = 0, size = 7, label = paste(“ytlogos.github.io || NASA.gov || OpenFlights.org”), color = “white”, alpha = 0.5) + coord_equal()</h1></blockquote>\n<p><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"\"> <strong>三、 SessionInfo</strong></p>\n<blockquote>\n<p>sessionInfo()&gt; R version 3.4.3 (2017-11-30) Platform: x86_64-w64-mingw32/x64 (64-bit) Running under: Windows &gt;= 8 x64 (build 9200) Matrix products: default locale: [1] LC_COLLATE=Chinese (Simplified)_China.936  LC_CTYPE=Chinese (Simplified)_China.936 [3] LC_MONETARY=Chinese (Simplified)_China.936 LC_NUMERIC=C [5] LC_TIME=Chinese (Simplified)_China.936 attached base packages: [1] grid      stats     graphics  grDevices utils     datasets  methods   base other attached packages: [1] plyr_1.8.4          jpeg_0.1-8          geosphere_1.5-7     data.table_1.10.4-3 [5] forcats_0.2.0       stringr_1.2.0       dplyr_0.7.4         purrr_0.2.4 [9] readr_1.1.1         tidyr_0.8.0         tibble_1.4.2        ggplot2_2.2.1.9000 [13] tidyverse_1.2.1     pacman_0.4.6 loaded via a namespace (and not attached): [1] Rcpp_0.12.15      cellranger_1.1.0  pillar_1.1.0      compiler_3.4.3    bindr_0.1 [6] tools_3.4.3       lubridate_1.7.1   jsonlite_1.5      nlme_3.1-131      gtable_0.2.0 [11] lattice_0.20-35   pkgconfig_2.0.1   rlang_0.1.6       psych_1.7.8       cli_1.0.0 [16] rstudioapi_0.7    yaml_2.1.16       parallel_3.4.3    haven_1.1.1       bindrcpp_0.2 [21] xml2_1.2.0        httr_1.3.1        knitr_1.19        hms_0.4.1         glue_1.2.0 [26] R6_2.2.2          readxl_1.0.0      foreign_0.8-69    sp_1.2-7          modelr_0.1.1 [31] reshape2_1.4.3    magrittr_1.5      scales_0.5.0.9000 rvest_0.3.2     assertthat_0.2.0 [36] mnormt_1.5-5      colorspace_1.3-2  stringi_1.1.6     lazyeval_0.2.1    munsell_0.4.3 [41] broom_0.4.3       crayon_1.3.4</p>\n</blockquote>\n",
            "tags": [
                "转载",
                "R语言"
            ]
        },
        {
            "id": "https://erik.xyz/2018/04/11/fu-li-ye-bian-he-la-pu-si-bian-de-wu-li-jie-shi-ji-qu-bie/",
            "url": "https://erik.xyz/2018/04/11/fu-li-ye-bian-he-la-pu-si-bian-de-wu-li-jie-shi-ji-qu-bie/",
            "title": "傅里叶变换和拉普拉斯变换的物理解释及区别",
            "date_published": "2018-04-11T11:07:00.000Z",
            "content_html": "<blockquote>\n<p>傅里叶变换在物理学、数论、组合数学、信号处理、概率论、统计学、密码学、声学、光学、海洋学、结构动力学等领域都有着广泛的应用（例如在信号处理中，傅里叶变换的典型用途是将信号分解成幅值分量和频率分量）。<span id=\"more\"></span></p>\n</blockquote>\n<p>傅里叶变换能将满足一定条件的某个函数表示成三角函数（正弦和/或余弦函数）或者它们的积分的线性组合。在不同的研究领域，傅里叶变换具有多种不同的变体形式，如连续傅里叶变换和离散傅里叶变换。 </p>\n<blockquote>\n</blockquote>\n<p>傅里叶变换是一种解决问题的方法，一种工具，一种看待问题的角度。理解的关键是：一个连续的信号可以看作是一个个小信号的叠加，从时域叠加与从频域叠加都可以组成原来的信号，将信号这么分解后有助于处理。 </p>\n<blockquote>\n</blockquote>\n<p>我们原来对一个信号其实是从时间的角度去理解的，不知不觉中，其实是按照时间把信号进行分割，每一部分只是一个时间点对应一个信号值，一个信号是一组这样的分量的叠加。</p>\n<blockquote>\n</blockquote>\n<p>傅里叶变换后，其实还是个叠加问题，只不过是从频率的角度去叠加，只不过每个小信号是一个时间域上覆盖整个区间的信号，但他确有固定的周期，或者说，给了一个周期，我们就能画出一个整个区间上的分信号，那么给定一组周期值（或频率值），我们就可以画出其对应的曲线，就像给出时域上每一点的信号值一样，不过如果信号是周期的话 ，频域的更简单，只需要几个甚至一个就可以了，时域则需要整个时间轴上每一点都映射出一个函数值。 </p>\n<blockquote>\n<p>傅里叶变换就是将一个信号的时域表示形式映射到一个频域表示形式；逆傅里叶变换恰好相反。这都是一个信号的不同表示形式。它的公式会用就可以，当然把证明看懂了更好。</p>\n</blockquote>\n<p>对一个信号做傅里叶变换，可以得到其频域特性，包括幅度和相位两个方面。幅度是表示这个频率分量的大小，那么相位呢，它有什么物理意义？频域的相位与时域的相位有关系吗？信号前一段的相位（频域）与后一段的相位的变化是否与信号的频率成正比关系。 傅里叶变换就是把一个信号，分解成无数的正弦波（或者余弦波）信号。也就是说，用无数的正弦波，可以合成任何你所需要的信号。 </p>\n<blockquote>\n</blockquote>\n<p>想一想这个问题：给你很多正弦信号，你怎样才能合成你需要的信号呢？答案是要两个条件，一个是每个正弦波的幅度，另一个就是每个正弦波之间的相位差。所以现在应该明白了吧，频域上的相位，就是每个正弦波之间的相位。 傅里叶变换用于信号的频率域分析，一般我们把电信号描述成时间域的数学模型，而数字信号处理对信号的频率特性更感兴趣，而通过傅立叶变换很容易得到信号的频率域特性。</p>\n<blockquote>\n</blockquote>\n<p>傅里叶变换简单通俗理解就是把看似杂乱无章的信号考虑成由一定振幅、相位、频率的基本正弦（余弦）信号组合而成，傅里叶变换的目的就是找出这些基本正弦（余弦）信号中振幅较大（能量较高）信号对应的频率，从而找出杂乱无章的信号中的主要振动频率特点。如减速机故障时，通过傅里叶变换做频谱分析，根据各级齿轮转速、齿数与杂音频谱中振幅大的对比，可以快速判断哪级齿轮损伤。 </p>\n<blockquote>\n</blockquote>\n<p>拉普拉斯变换，是工程数学中常用的一种积分变换。它是为简化计算而建立的实变量函数和复变量函数间的一种函数变换。对一个实变量函数作拉普拉斯变换，并在复数域中作各种运算，再将运算结果作拉普拉斯反变换来求得实数域中的相应结果，往往比直接在实数域中求出同样的结果在计算上容易得多。拉普拉斯变换的这种运算步骤对于求解线性微分方程尤为有效，它可把微分方程化为容易求解的代数方程来处理，从而使计算简化。在经典控制理论中，对控制系统的分析和综合，都是建立在拉普拉斯变换的基础上的。 </p>\n<blockquote>\n</blockquote>\n<p>引入拉普拉斯变换的一个主要优点，是可采用传递函数代替微分方程来描述系统的特性。这就为采用直观和简便的图解方法来确定控制系统的整个特性（见信号流程图、动态结构图）、分析控制系统的运动过程（见奈奎斯特稳定判据、根轨迹法），以及综合控制系统的校正装置（见控制系统校正方法）提供了可能性。</p>\n<blockquote>\n<p>拉普拉斯变换在工程学上的应用：应用拉普拉斯变换解常变量齐次微分方程，可以将微分方程化为代数方程，使问题得以解决。</p>\n</blockquote>\n<p>在工程学上，拉普拉斯变换的重大意义在于：将一个信号从时域上，转换为复频域（s域）上来表示；在线性系统，控制自动化上都有广泛的应用。 在数字信号处理中，Z变换是一种非常重要的分析工具。但在通常的应用中，我们往往只需要分析信号或系统的频率响应，也即是说通常只需要进行傅里叶变换即可。那么，为什么还要引进Z变换呢？ Z变换和傅里叶变换之间有存在什么样的关系呢？傅里叶变换的物理意义非常清晰：将通常在时域表示的信号，分解为多个正弦信号的叠加。每个正弦信号用幅度、频率、相位就可以完全表征。</p>\n<blockquote>\n</blockquote>\n<p>傅里叶变换之后的信号通常称为频谱，频谱包括幅度谱和相位谱，分别表示幅度随频率的分布及相位随频率的分布。在自然界，频率是有明确的物理意义的，比如说声音信号，男同胞声音低沉雄浑，这主要是因为男声中低频分量更多；女同胞多高亢清脆，这主要是因为女声中高频分量更多。 </p>\n<blockquote>\n</blockquote>\n<p>对一个信号来说，就包含的信息量来讲，时域信号及其相应的傅里叶变换之后的信号是完全一样的。那傅里叶变换有什么作用呢？因为有的信号主要在时域表现其特性，如电容充放电的过程；而有的信号则主要在频域表现其特性，如机械的振动，人类的语音等。若信号的特征主要在频域表示的话，则相应的时域信号看起来可能杂乱无章，但在频域则解读非常方便。</p>\n<blockquote>\n<p>在实际中，当我们采集到一段信号之后，在没有任何先验信息的情况下，直觉是试图在时域能发现一些特征，如果在时域无所发现的话，很自然地将信号转换到频域再看看能有什么特征。信号的时域描述与频域描述，就像一枚硬币的两面，看起来虽然有所不同，但实际上都是同一个东西。正因为如此，在通常的信号与系统的分析过程中，我们非常关心傅里叶变换。</p>\n</blockquote>\n<p>既然人们只关心信号的频域表示，那么Z变换又是怎么回事呢？要说到Z变换，可能还要先追溯到拉普拉斯变换。拉普拉斯变换是以法国数学家拉普拉斯命名的一种变换方法，主要是针对连续信号的分析。拉普拉斯和傅里叶都是同时代的人，他们所处的时代在法国是处于拿破仑时代，国力鼎盛。在科学上也取代英国成为当时世界的中心，在当时众多的科学大师中，拉普拉斯、拉格朗日、傅里叶就是他们中间最为璀璨的三颗星。</p>\n<blockquote>\n</blockquote>\n<p>傅里叶关于信号可以分解为正弦信号叠加的论文，其评审人即包括拉普拉斯和拉格朗日。 回到正题，傅里叶变换虽然好用，而且物理意义明确，但有一个最大的问题是其存在的条件比较苛刻，比如时域内绝对可积的信号才可能存在傅里叶变换。拉普拉斯变换可以说是推广了这以概念。</p>\n<blockquote>\n</blockquote>\n<p>在自然界，指数信号exp(-x)是衰减最快的信号之一，对信号乘上指数信号之后，很容易满足绝对可积的条件。因此将原始信号乘上指数信号之后一般都能满足傅里叶变换的条件，这种变换就是拉普拉斯变换。这种变换能将微分方程转化为代数方程，在18世纪计算机还远未发明的时候，意义非常重大。 从上面的分析可以看出，傅里叶变换可以看做是拉普拉斯的一种特殊形式，即所乘的指数信号为exp(0)。</p>\n<blockquote>\n</blockquote>\n<p>也即是说拉普拉斯变换是傅里叶变换的推广，是一种更普遍的表达形式。在进行信号与系统的分析过程中，可以先得到拉普拉斯变换这种更普遍的结果，然后再得到傅里叶变换这种特殊的结果。这种由普遍到特殊的解决办法，已经证明在连续信号与系统的分析中能够带来很大的方便。</p>\n<blockquote>\n</blockquote>\n<p>Z变换可以说是针对离散信号和系统的拉普拉斯变换，由此我们就很容易理解Z变换的重要性，也很容易理解Z变换和傅里叶变换之间的关系。</p>\n<blockquote>\n</blockquote>\n<p>Z变换中的Z平面与拉普拉斯中的S平面存在映射的关系，z=exp(Ts)。在Z变换中，单位圆上的结果即对应离散时间傅里叶变换的结果。 本文来源于CSDN网kevinhg的博客</p>\n",
            "tags": [
                "转载",
                "算法"
            ]
        },
        {
            "id": "https://erik.xyz/2018/04/05/xiang-jie-quan-pai-lie-suan-fa/",
            "url": "https://erik.xyz/2018/04/05/xiang-jie-quan-pai-lie-suan-fa/",
            "title": "详解全排列算法",
            "date_published": "2018-04-05T11:07:00.000Z",
            "content_html": "<h5 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a><a href=\"#简介\" title=\"简介\"></a><strong>简介</strong></h5><p>给定 {1, 2, 3, , , n}，其全排列为 n! 个，这是最基础的高中组合数学知识。我们以 n=4 为例，其全部排列如下图（以字典序树形式来呈现）： <strong><img src=\"http://mmbiz.qpic.cn/mmbiz_jpg/QtPIxk7nOVeuubKtEibM6oB480VFniccK5af8JucQelsiaaZGdebJ5Tw2Fuzia4cyuX95Hl2iawtq6DFQoTTnv089WA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1\" alt=\"\"></strong> 我们很容易想到用递归来求出它的所有全排列。 仔细观察上图， 以 1 开头，下面跟着 {2, 3, 4} 的全排列； 以 2 开头，下面跟着 {1, 3, 4} 的全排列； 以 3 开头，下面跟着 {1, 2, 4} 的全排列； 以 4 开头，下面跟着 {1, 2, 3} 的全排列。<span id=\"more\"></span> <strong>代码如下：</strong></p>\n<blockquote>\n<p>/<em>* </em> <em> author : 刘毅（Limer） </em> date   : 2017-05-31 <em> mode   : C++ </em>/   #include<iostream> #include<algorithm>   using namespacestd;   voidFullPermutation(intarray[],intleft,intright) { if(left == right) { for(inti = 0;i &lt; 4;i++) cout &lt;&lt; array[i] &lt;&lt; “ “; cout &lt;&lt; endl; } else { for(inti = left;i &lt;= right;i++) { swap(array[i],array[left]); FullPermutation(array,left + 1,right); swap(array[i],array[left]); } } }   intmain() {   intarray[4] = {1,2,3,4};   FullPermutation(array,0,3);   return0; }</algorithm></iostream></p>\n</blockquote>\n<p><strong>运行如下：</strong> <strong><img src=\"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==\" alt=\"\"></strong> 咦~ 递归写出的全排列有点不完美，它并不严格遵循字典序。但是熟悉 C++ 的朋友肯定知道另一种更简单，更完美的全排列方法。 定义于文件 <algorithm> 内的两个算法函数： 1、next_permutation，对于当前的排列，如果在字典序中还存在下一个排列，返回真，并且把当前排列调整为下一个排列；如果不存在，就把当前排列调整为字典序中的第一个排列（即递增排列），返回假。 2、prev_permutation，对于当前的排列，如果在字典序中还存在上一个排列，返回真，并且把当前排列调整为上一个排列；如果不存在，就把当前排列调整为字典序中的最后一个排列（即递减排列），返回假。</algorithm></p>\n<blockquote>\n<p>/<em>* </em> <em> author : 刘毅（Limer） </em> date   : 2017-05-31 <em> mode   : C++ </em>/   #include<iostream> #include<algorithm>   using namespacestd;   voidFullPermutation(intarray[]) { do { for(inti = 0;i &lt; 4;i++) cout &lt;&lt; array[i] &lt;&lt; “ “; cout &lt;&lt; endl; }while(next_permutation(array,array + 4)); }   intmain() {   intarray[4] = {1,2,3,4};   FullPermutation(array);   return0; }</algorithm></iostream></p>\n</blockquote>\n<p>运行截图省略。输出结果正好符合字典序。 那这个 “轮子” 是怎么做的呢？（摘自侯捷的《STL 源码剖析》） 1、next_permutation，首先，从最尾端开始往前寻找两个相邻元素，令第一元素为<em>i，第二元素为</em>ii，且满足<em>i &lt; </em>ii，找到这样一组相邻元素后，再从最尾端开始往前检验，找出第一个大于<em>i的元素，令为</em>j，将 i，j 元素对调，再将 ii 之后的所有元素颠倒排列，此即所求之 “下一个” 排列组合。 2、prev_permutation，首先，从最尾端开始往前寻找两个相邻元素，令第一元素为<em>i，第二元素为</em>ii，且满足<em>i &gt; </em>ii，找到这样一组相邻元素后，再从最尾端开始往前检验，找出第一个小于<em>i的元素，令为</em>j，将 i，j 元素对调，再将 ii 之后的所有元素颠倒排列，此即所求之 “上一个” 排列组合。 <strong>代码如下：</strong></p>\n<blockquote>\n<p>boolnext<em>permutation(int <em> first,int </em> last) { if(first == last)returnfalse;// 空区间 int <em> i = first;     ++i; if(i == last)returnfalse;// 只有一个元素 i = last;     –i;   for(;;) { int </em> ii = i;         –i; if(_i &lt; <em>ii) { int </em> j = last; while(!(_i &lt; </em>–j))// 由尾端往前找，直到遇上比 <em>i 大的元素 ; swap(_i, _j); reverse(ii,last); returntrue; } }   if(i == first)// 当前排列为字典序的最后一个排列 { reverse(first,last);// 全部逆向排列，即为升序 returnfalse; } }   boolprev_premutation(int </em> first,int <em> last) { if(first == last)returnfalse;// 空区间 int </em> i = first;     ++i; if(i == last)returnfalse;// 只有一个元素 i = last;     –i;   for(;;) { int <em> ii = i;         –i; if(_i &gt; _ii) { int </em> j = last; while(!(<em>i &gt; </em>–j))// 由尾端往前找，直到遇上比 <em>i 大的元素 ; swap(_i, </em>j); reverse(ii,last); returntrue; } }   if(i == first)// 当前排列为字典序的第一个排列 { reverse(first,last);// 全部逆向排列，即为降序 returnfalse; } }</p>\n</blockquote>\n<p><strong>结后语</strong> 这篇文章主要介绍了解决不重复序列的全排列问题的两个方法：<strong>递归和字典序法</strong>。</p>\n",
            "tags": [
                "转载",
                "算法"
            ]
        },
        {
            "id": "https://erik.xyz/2018/03/26/6-ge-kai-yuan-de-jia-ting-zi-dong-hua-gong-ju/",
            "url": "https://erik.xyz/2018/03/26/6-ge-kai-yuan-de-jia-ting-zi-dong-hua-gong-ju/",
            "title": "6 个开源的家庭自动化工具 | Linux 中国",
            "date_published": "2018-03-26T11:08:00.000Z",
            "content_html": "<p><img src=\"http://mmbiz.qpic.cn/mmbiz_jpg/W9DqKgFsc68kmQVHxs2R2utqYWLOiaHYDEddFzdT4eicGgUKvt59X7syh7JNtwDmB0V0WUG1aNRbPhlUMBEsDkfg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1\" alt=\"\"></p>\n<p>用这些开源软件解决方案构建一个更智能的家庭。</p>\n<p>— Jason Baker</p>\n<p>有用的原文链接</p>\n<p>请访问文末的“原文链接”获得可点击的文内链接、全尺寸原图和相关文章。</p>\n<p>致谢<br><span id=\"more\"></span></p>\n<p>编译自　|　<a href=\"https://opensource.com/life/17/12/home-automation-tools\">https://opensource.com/life/17/12/home-automation-tools</a> 作者　|　Jason Baker 译者　|　qhwdw ? ? ? ? ? 共计翻译：87 篇 贡献时间：124 天</p>\n<blockquote>\n<p>用这些开源软件解决方案构建一个更智能的家庭。</p>\n</blockquote>\n<p>物联网[1] 不仅是一个时髦词，在现实中，自 2016 年我们发布了一篇关于家庭自动化工具的评论文章以来，它也在迅速占领着我们的生活。在 2017，26.5% 的美国家庭[2] 已经使用了一些智能家居技术；预计五年内，这一数字还将翻倍。 随着这些数量持续增加的各种设备的使用，可以帮助你实现对家庭的自动化管理、安保、和监视，在家庭自动化方面，从来没有像现在这样容易和更加吸引人过。不论你是要远程控制你的 HVAC 系统，集成一个家庭影院，保护你的家免受盗窃、火灾、或是其它威胁，还是节省能源或只是控制几盏灯，现在都有无数的设备可以帮到你。 但同时，还有许多用户担心安装在他们家庭中的新设备带来的安全和隐私问题 —— 这是一个很现实也很 严肃的问题[3]。他们想要去控制有谁可以接触到这个重要的系统，这个系统管理着他们的应用程序，记录了他们生活中的点点滴滴。这种想法是可以理解的：毕竟在一个连你的冰箱都是智能设备的今天，你不想要一个基本的保证吗？甚至是如果你授权了设备可以与外界通讯，它是否是仅被授权的人访问它呢？ 对安全的担心[4] 是为什么开源对我们将来使用的互联设备至关重要的众多理由之一。由于源代码运行在他们自己的设备上，完全可以去搞明白控制你的家庭的程序，也就是说你可以查看它的代码，如果必要的话甚至可以去修改它。 虽然联网设备通常都包含它们专有的组件，但是将开源引入家庭自动化的第一步是确保你的设备和这些设备可以共同工作 —— 它们为你提供一个接口 —— 并且是开源的。幸运的是，现在有许多解决方案可供选择，从 PC 到树莓派，你可以在它们上做任何事情。 这里有几个我比较喜欢的。</p>\n<p>Calaos</p>\n<p>Calaos[5] 是一个设计为全栈的家庭自动化平台，包含一个服务器应用程序、触摸屏界面、Web 应用程序、支持 iOS 和 Android 的原生移动应用、以及一个运行在底层的预配置好的 Linux 操作系统。Calaos 项目出自一个法国公司，因此它的支持论坛以法语为主，不过大量的介绍资料和文档都已经翻译为英语了。 Calaos 使用的是 GPL[6] v3 的许可证，你可以在 GitHub 上查看它的源代码。</p>\n<p>Domoticz</p>\n<p>Domoticz[8] 是一个有大量设备库支持的家庭自动化系统，在它的项目网站上有大量的文档，从气象站到远程控制的烟雾探测器，以及大量的第三方 集成软件[9] 。它使用一个 HTML5 前端，可以从桌面浏览器或者大多数现代的智能手机上访问它，它是一个轻量级的应用，可以运行在像树莓派这样的低功耗设备上。 Domoticz 是用 C++ 写的，使用 GPLv3[10] 许可证。它的 源代码[11] 在 GitHub 上。</p>\n<p>Home Assistant</p>\n<p>Home Assistant[12] 是一个开源的家庭自动化平台，它可以轻松部署在任何能运行 Python 3 的机器上，从树莓派到网络存储（NAS），甚至可以使用 Docker 容器轻松地部署到其它系统上。它集成了大量的开源和商业的产品，允许你去连接它们，比如，IFTTT、天气信息、或者你的 Amazon Echo 设备，去控制从锁到灯的各种硬件。 Home Assistant 以 MIT 许可证[13] 发布，它的源代码可以从 GitHub[14] 上下载。</p>\n<p>MisterHouse</p>\n<p>从 2016 年起，MisterHouse[15] 取得了很多的进展，我们把它作为一个“可以考虑的另外选择”列在这个清单上。它使用 Perl 脚本去监视任何东西，它可以通过一台计算机来查询或者控制任何可以远程控制的东西。它可以响应语音命令，查询当前时间、天气、位置、以及其它事件，比如去打开灯、唤醒你、记下你喜欢的电视节目、通报呼入的来电、开门报警、记录你儿子上了多长时间的网、如果你女儿汽车超速它也可以告诉你等等。它可以运行在 Linux、macOS、以及 Windows 计算机上，它可以读/写很多的设备，包括安全系统、气象站、来电显示、路由器、机动车位置系统等等。 MisterHouse 使用 GPLv2[16] 许可证，你可以在 GitHub[17] 上查看它的源代码。</p>\n<p>OpenHAB</p>\n<p>OpenHAB[18]（开放家庭自动化总线的简称）是在开源爱好者中所熟知的家庭自动化工具，它拥有大量用户的社区以及支持和集成了大量的设备。它是用 Java 写的，OpenHAB 非常轻便，可以跨大多数主流操作系统使用，它甚至在树莓派上也运行的很好。支持成百上千的设备，OpenHAB 被设计为与设备无关的，这使开发者在系统中添加他们的设备或者插件很容易。OpenHAB 也支持通过 iOS 和 Android 应用来控制设备以及设计工具，因此，你可以为你的家庭系统创建你自己的 UI。 你可以在 GitHub 上找到 OpenHAB 的 源代码[19]，它使用 Eclipse 公共许可证[20]。</p>\n<p>OpenMotics</p>\n<p>OpenMotics[21] 是一个开源的硬件和软件家庭自动化系统。它的设计目标是为控制设备提供一个综合的系统，而不是从不同的供应商处将各种设备拼接在一起。不像其它的系统主要是为了方便改装而设计的，OpenMotics 专注于硬件解决方案。更多资料请查阅来自 OpenMotics 的后端开发者 Frederick Ryckbosch的 完整文章[22] 。 OpenMotics 使用 GPLv2[16] 许可证，它的源代码可以从 GitHub 上下载。 当然了，我们的选择不仅有这些。许多家庭自动化爱好者使用不同的解决方案，甚至是他们自己动手做。其它用户选择使用单独的智能家庭设备而无需集成它们到一个单一的综合系统中。 如果上面的解决方案并不能满足你的需求，下面还有一些潜在的替代者可以去考虑：</p>\n<p>◈ EventGhost[24] 是一个开源的（GPL v2[25]）家庭影院自动化工具，它只能运行在 Microsoft Windows PC 上。它允许用户去控制多媒体电脑和连接的硬件，它通过触发宏指令的插件或者定制的 Python 脚本来使用。</p>\n<p>◈ ioBroker[26] 是一个基于 JavaScript 的物联网平台，它能够控制灯、锁、空调、多媒体、网络摄像头等等。它可以运行在任何可以运行 Node.js 的硬件上，包括 Windows、Linux、以及 macOS，它使用 MIT 许可证[27]。</p>\n<p>◈ Jeedom[28] 是一个由开源软件（GPL v2[25]）构成的家庭自动化平台，它可以控制灯、锁、多媒体等等。它包含一个移动应用程序（Android 和 iOS），并且可以运行在 Linux PC 上；该公司也销售 hub，它为配置家庭自动化提供一个现成的解决方案。</p>\n<p>◈ LinuxMCE[29] 标称它是你的多媒体与电子设备之间的“数字粘合剂”。它运行在 Linux（包括树莓派）上，它基于 Pluto 开源 许可证[30] 发布，它可以用于家庭安全、电话（VoIP 和语音信箱）、A/V 设备、家庭自动化、以及玩视频游戏。</p>\n<p>◈ OpenNetHome[31]，和这一类中的其它解决方案一样，是一个控制灯、报警、应用程序等等的一个开源软件。它基于 Java 和 Apache Maven，可以运行在 Windows、macOS、以及 Linux —— 包括树莓派，它以 GPLv3[32] 许可证发布。</p>\n<p>◈ Smarthomatic[33] 是一个专注于硬件设备和软件的开源家庭自动化框架，而不仅是用户界面。它基于 GPLv3[34] 许可证，它可用于控制灯、电器、以及空调、检测温度、提醒给植物浇水。</p>\n<p>现在该轮到你了：你已经准备好家庭自动化系统了吗？或者正在研究去设计一个。你对家庭自动化的新手有什么建议，你会推荐什么样的系统</p>\n",
            "tags": [
                "工具",
                "转载"
            ]
        }
    ]
}