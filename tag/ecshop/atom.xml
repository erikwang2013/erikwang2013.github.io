<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://erik.xyz</id>
    <title>艾瑞可erik • Posts by &#34;ecshop&#34; tag • Posts by &#34;undefined&#34; categories</title>
    <link href="https://erik.xyz" />
    <updated>2014-11-05T10:35:00.000Z</updated>
    <category term="日志" />
    <category term="工具" />
    <category term="php扩展" />
    <category term="php技巧" />
    <category term="php类库" />
    <category term="php资源" />
    <category term="jquery" />
    <category term="jquery插件" />
    <category term="js" />
    <category term="css" />
    <category term="php" />
    <category term="web" />
    <category term="代码" />
    <category term="压缩" />
    <category term="说说" />
    <category term="趣闻" />
    <category term="php服务器" />
    <category term="随笔" />
    <category term="php实例" />
    <category term="nginx" />
    <category term="转载" />
    <category term="php库" />
    <category term="互联" />
    <category term="项目实战" />
    <category term="javascript" />
    <category term="漏洞" />
    <category term="php应用" />
    <category term="浮点" />
    <category term="http" />
    <category term="http服务器" />
    <category term="负载均衡" />
    <category term="kali" />
    <category term="kali安装" />
    <category term="农业系统" />
    <category term="系统设计" />
    <category term="克莱姆法则" />
    <category term="行列式" />
    <category term="n阶行列式" />
    <category term="支付系统" />
    <category term="支付" />
    <category term="centos" />
    <category term="linux" />
    <category term="apache优化" />
    <category term="apache隐藏index" />
    <category term="nginx优化" />
    <category term="nginx隐藏index" />
    <category term="日常" />
    <category term="seo" />
    <category term="优化" />
    <category term="摘要" />
    <category term="文章" />
    <category term="游记" />
    <category term="ca证书" />
    <category term="证书生成" />
    <category term="二战" />
    <category term="二战熊" />
    <category term="西伯利亚熊" />
    <category term="centos软件" />
    <category term="yum仓库" />
    <category term="软件" />
    <category term="centos安装chromium报错" />
    <category term="chromium安装报错" />
    <category term="svn" />
    <category term="代码提交" />
    <category term="deb" />
    <category term="deb/rpm互转" />
    <category term="deb转rpm" />
    <category term="rpm互转" />
    <category term="centos7安装steam" />
    <category term="centos安装steam" />
    <category term="centos安装吃鸡steam" />
    <category term="linux安装steam" />
    <category term="steam安装" />
    <category term="centos软件安装" />
    <category term="centos6.5" />
    <category term="linux系统" />
    <category term="centos7安装Redis Desktop Manager" />
    <category term="centos7安装redis桌面" />
    <category term="centos安装redis桌面" />
    <category term="linux安装centos7安装Redis Desktop Manager" />
    <category term="Redis Desktop Manager" />
    <category term="redis桌面" />
    <category term="centos7" />
    <category term="centos7-wine" />
    <category term="wine" />
    <category term="wine安装" />
    <category term="root密码" />
    <category term="root密码重置" />
    <category term="忘记root密码" />
    <category term="memcache" />
    <category term="memcached" />
    <category term="生活手记" />
    <category term="艾瑞可erik" />
    <category term="程序员" />
    <category term="开源云" />
    <category term="容器" />
    <category term="cncf" />
    <category term="监控" />
    <category term="composer" />
    <category term="composer部署" />
    <category term="内网部署composer" />
    <category term="cphalcon" />
    <category term="cphalcon报错" />
    <category term="css中的em" />
    <category term="响应式字体" />
    <category term="响应式布局样式" />
    <category term="proxy代理搭建" />
    <category term="代理服务器搭建" />
    <category term="proxy服务器" />
    <category term="查找" />
    <category term="排序" />
    <category term="快速排序" />
    <category term="冒泡排序" />
    <category term="二分查找" />
    <category term="datahub" />
    <category term="datahub安装" />
    <category term="deepin" />
    <category term="emergency" />
    <category term="emergency mode" />
    <category term="deepin黑屏" />
    <category term="清理系统" />
    <category term="清理c盘" />
    <category term="dns" />
    <category term="域名监测" />
    <category term="网站监测" />
    <category term="docker" />
    <category term="php安装" />
    <category term="杂谈" />
    <category term="ecshop" />
    <category term="框架" />
    <category term="beego数据分页" />
    <category term="分页" />
    <category term="elasticsearch" />
    <category term="elasticsearch搭建" />
    <category term="elasticsearch集群" />
    <category term="系统" />
    <category term="emm" />
    <category term="mdm" />
    <category term="phone" />
    <category term="手机" />
    <category term="新闻" />
    <category term="免费" />
    <category term="jenkis" />
    <category term="jenkis教程" />
    <category term="随笔吐槽" />
    <category term="算法" />
    <category term="ping" />
    <category term="ping服务器" />
    <category term="各大网站ping" />
    <category term="搜引擎ping服务器" />
    <category term="go获取ip" />
    <category term="im" />
    <category term="go中pdf生成" />
    <category term="go中限流" />
    <category term="go对接快递签名" />
    <category term="go时间获取" />
    <category term="go类型转换" />
    <category term="微服务" />
    <category term="go-zero" />
    <category term="rpc" />
    <category term="go加密" />
    <category term="go解密" />
    <category term="归" />
    <category term="吐槽" />
    <category term="php大全" />
    <category term="php资料" />
    <category term="hadoop" />
    <category term="hadoop2.8.0" />
    <category term="hadoop安装教程" />
    <category term="hadoop安装详细教程" />
    <category term="hadoop教程" />
    <category term="hadoop部署" />
    <category term="hadoop3" />
    <category term="hadoop配置" />
    <category term="log4j2" />
    <category term="数据库" />
    <category term="hbase安装教程" />
    <category term="hbase" />
    <category term="http1.1" />
    <category term="http2.0" />
    <category term="会话" />
    <category term="会话原理" />
    <category term="hyperf" />
    <category term="杂录" />
    <category term="新冠肺炎" />
    <category term="springboot" />
    <category term="springboot内网部署" />
    <category term="linux恢复" />
    <category term="linux误删" />
    <category term="linux命令" />
    <category term="linux命令汇总" />
    <category term="jenkins" />
    <category term="jetbtrains" />
    <category term="phpstorm" />
    <category term="搜索引擎" />
    <category term="图片" />
    <category term="素材" />
    <category term="jq" />
    <category term="jq侧边导航" />
    <category term="侧边导航" />
    <category term="js判断浏览器" />
    <category term="js判断浏览器版本" />
    <category term="判断浏览器" />
    <category term="浏览器版本判断" />
    <category term="获取浏览器信息" />
    <category term="kali右键汉化" />
    <category term="kali桌面右键汉化" />
    <category term="kali右键创建文件" />
    <category term="区块链" />
    <category term="lanmp" />
    <category term="php环境独立配置" />
    <category term="服务器" />
    <category term="劳动纠纷" />
    <category term="追缴工资" />
    <category term="申请仲裁" />
    <category term="flash" />
    <category term="表单" />
    <category term="linux报错" />
    <category term="linux中update-command-not-found" />
    <category term="linux运行命令报错" />
    <category term="web前端" />
    <category term="web优化" />
    <category term="撮合算法" />
    <category term="撮合" />
    <category term="php撮合算法" />
    <category term="maven搭建库" />
    <category term="maven" />
    <category term="maven内网库" />
    <category term="高级缓存配置" />
    <category term="mongodb" />
    <category term="mongodb权限" />
    <category term="可穿戴设备" />
    <category term="mysql" />
    <category term="分库分表" />
    <category term="mysql应对千万级" />
    <category term="mysql瓶颈" />
    <category term="mysql瓶颈解决办法" />
    <category term="redis" />
    <category term="数据一致性" />
    <category term="mysql消息" />
    <category term="mysql队列" />
    <category term="mysql高并发" />
    <category term="mysql存储" />
    <category term="mysql引擎" />
    <category term="mysql数据表设计选择" />
    <category term="mysql监控" />
    <category term="mysql性能" />
    <category term="内网支付" />
    <category term="内网穿透" />
    <category term="支付接口本地化开发" />
    <category term="本地挂网" />
    <category term="穿透" />
    <category term="go" />
    <category term="new和make的区别" />
    <category term="红包算法" />
    <category term="深圳劳动法服务部门" />
    <category term="非关系型数据库" />
    <category term="onethink" />
    <category term="oop" />
    <category term="php管理系统" />
    <category term="开放接口开发" />
    <category term="开源工具" />
    <category term="桌面共享工具" />
    <category term="openresty" />
    <category term="openvas" />
    <category term="openvas安装" />
    <category term="php变量" />
    <category term="php超级全局变量" />
    <category term="php超级变量" />
    <category term="php基本类型" />
    <category term="php数据类型" />
    <category term="php设计模式" />
    <category term="php对接微信支付" />
    <category term="微信支付" />
    <category term="微信支付回调" />
    <category term="游戏" />
    <category term="php函数" />
    <category term="php随机数" />
    <category term="php获取闰年" />
    <category term="闰年.php时间" />
    <category term="php环境" />
    <category term="php集成环境" />
    <category term="服务器集成环境" />
    <category term="数组函数" />
    <category term="数组排序函数" />
    <category term="php数学函数" />
    <category term="php面试题" />
    <category term="php面向对象" />
    <category term="面向对象" />
    <category term="php-zookeeper" />
    <category term="zookeeper3.5.5" />
    <category term="php-zookeeper扩展" />
    <category term="php串口开发" />
    <category term="php倒计时" />
    <category term="php时间" />
    <category term="倒计时" />
    <category term="计算时间" />
    <category term="PHP数组" />
    <category term="字符串函数" />
    <category term="排序函数" />
    <category term="php的SPL" />
    <category term="SPL手册" />
    <category term="PHP算法" />
    <category term="php递归" />
    <category term="递归" />
    <category term="phpunit" />
    <category term="phpunit安装" />
    <category term="php过滤" />
    <category term="过滤" />
    <category term="foreach" />
    <category term="foreach报错" />
    <category term="php中foreach报错" />
    <category term="php中if" />
    <category term="php中if判断" />
    <category term="php的if" />
    <category term="php字符串" />
    <category term="php7中sphinx" />
    <category term="php7中sphinx扩展" />
    <category term="sphinx扩展" />
    <category term="python" />
    <category term="python库" />
    <category term="a标签" />
    <category term="a标签虚线" />
    <category term="虚线框" />
    <category term="R语言" />
    <category term="数据随机化" />
    <category term="redis总结" />
    <category term="redis命令" />
    <category term="redis监控" />
    <category term="redis锁" />
    <category term="redis分布式锁" />
    <category term="任意金额输入" />
    <category term="10元、5元、2元" />
    <category term="队列" />
    <category term="栈" />
    <category term="顺序表" />
    <category term="链表" />
    <category term="数据结构" />
    <category term="线性结构" />
    <category term="浏览器禁止操作视频" />
    <category term="禁止视频" />
    <category term="响应慢" />
    <category term="页面优化" />
    <category term="js编辑" />
    <category term="runjs" />
    <category term="在线编辑" />
    <category term="rust" />
    <category term="rust配置" />
    <category term="seajs" />
    <category term="session" />
    <category term="路由器烧录" />
    <category term="烧录" />
    <category term="极路由2烧录" />
    <category term="砖头烧录" />
    <category term="免费服务器" />
    <category term="空间" />
    <category term="资源" />
    <category term="深圳政府电话" />
    <category term="深圳电话" />
    <category term="特区电话" />
    <category term="居住证" />
    <category term="居住证签注" />
    <category term="深圳新居住证" />
    <category term="国庆骑行" />
    <category term="深圳珠海骑行" />
    <category term="骑行" />
    <category term="世界那么大" />
    <category term="css3" />
    <category term="css在线生成工具" />
    <category term="css工具" />
    <category term="php正则" />
    <category term="正则" />
    <category term="shodan" />
    <category term="黑谷歌" />
    <category term="黒帽搜素" />
    <category term="shopex" />
    <category term="可视化数据" />
    <category term="数据" />
    <category term="数据表" />
    <category term="socket通信" />
    <category term="socket多进程" />
    <category term="socket" />
    <category term="json" />
    <category term="json数组" />
    <category term="json解析" />
    <category term="sql" />
    <category term="sql优化" />
    <category term="css3兼容360浏览器兼容模式" />
    <category term="css圆角" />
    <category term="结构体转map" />
    <category term="config" />
    <category term="thinkphp" />
    <category term="配置文件" />
    <category term="树" />
    <category term="二叉树" />
    <category term="js插件" />
    <category term="web自适应" />
    <category term="响应式布局" />
    <category term="响应式所有分辨率" />
    <category term="自适应布局" />
    <category term="自适应所有分辨率" />
    <category term="webman" />
    <category term="mysql设置超时，超时" />
    <category term="markdown" />
    <category term="wget" />
    <category term="wget抓取" />
    <category term="网站抓取" />
    <category term="我在" />
    <category term="wordpress" />
    <category term="wordpress标签" />
    <category term="域名合并" />
    <category term="wpscan" />
    <category term="usbrip" />
    <category term="无限极分类" />
    <category term="php无限极" />
    <category term="分类tree" />
    <category term="无限极分类树型" />
    <category term="xhprof" />
    <category term="laravel" />
    <category term="composer插件" />
    <category term="html" />
    <category term="响应式分辨率" />
    <category term="响应式调试" />
    <category term="自适应屏幕" />
    <category term="携程" />
    <category term="携程攻击" />
    <category term="携程网站瘫痪" />
    <category term="物理删除" />
    <category term="3D" />
    <category term="动画" />
    <category term="平台" />
    <category term="虚幻4引擎编辑" />
    <category term="生成唯一id" />
    <category term="生成id" />
    <category term="发邮件" />
    <category term="邮件函数" />
    <category term="储蓄卡免年费" />
    <category term="银行卡" />
    <category term="银行卡免年费" />
    <category term="composer安装" />
    <category term="composer配置" />
    <category term="项目创建composer" />
    <category term="mysql优化" />
    <category term="mysql读写优化" />
    <category term="数据库优化，mysql语句优化" />
    <category term="php加密" />
    <category term="php技术" />
    <category term="夕阳" />
    <category term="mysql函数" />
    <category term="php中mysql函数" />
    <category term="互联网时代" />
    <category term="开源技术" />
    <category term="web框架" />
    <category term="php抓取图片" />
    <category term="php批量抓取页面图片" />
    <category term="邮箱服务器" />
    <category term="正则表达式" />
    <category term="翻墙" />
    <category term="谷歌" />
    <category term="谷歌搜索" />
    <category term="php架构" />
    <category term="php服务" />
    <category term="php服务设计" />
    <entry>
        <id>https://erik.xyz/2014/11/05/ecshop-hou-tai-guan-li-yuan-deng-lu-xian-shi-shang-pin-lie-biao-jia-ge-bu-tong/</id>
        <title>ecshop后台管理员登陆显示商品列表价格不同</title>
        <link rel="alternate" href="https://erik.xyz/2014/11/05/ecshop-hou-tai-guan-li-yuan-deng-lu-xian-shi-shang-pin-lie-biao-jia-ge-bu-tong/"/>
        <content type="html">&lt;p&gt;文件 goods_list.htm privilege.php privilege.php找到set_admin_session($row[‘user_id’], $row[‘user_name’], $row[‘action_list’], $row[‘last_login’]);在其上下分别添加 $admin_zk=explode(“||”,$row[‘adminzk’ ]);上 $_SESSION[‘adminzk’] = $admin_zk[2];下 在查找 if(!empty($ec_salt))把sql预计加上字段adminzk 在goods_list.htm查找 {$goods.shop_price} 把 {$goods.shop_price} 改为{if $goods.shop_price=$goods.shop_price*$smarty.session.adminzk/100} {$goods.shop_price} {/if} 其中折扣adminzk在管理员列表里格式###|###|###|###|###||###||###&lt;/p&gt;
</content>
        <category term="ecshop" />
        <category term="框架" />
        <updated>2014-11-05T10:35:00.000Z</updated>
    </entry>
    <entry>
        <id>https://erik.xyz/2014/11/03/ecshop-hou-tai-hui-yuan-you-xiang-yan-zheng-gai-wei-guan-li-yuan-ke-kong-zhi-yan-zheng-tong-guo/</id>
        <title>ecshop后台会员邮箱验证改为管理员可控制验证通过</title>
        <link rel="alternate" href="https://erik.xyz/2014/11/03/ecshop-hou-tai-hui-yuan-you-xiang-yan-zheng-gai-wei-guan-li-yuan-ke-kong-zhi-yan-zheng-tong-guo/"/>
        <content type="html">&lt;p&gt;登陆后管理员查看会员列表会发现邮箱验证这块必须客户验证才有效果，不过大多数客户不愿意去验证，就改为管理员可操作吧 因为邮箱验证时判断客户验证状态0或1来选择显示图片对和错的，也刚好想到，在商品列表里有上架、下架，是否新品……刚好可以吧代码复制过来作参考 从商品列表里获知是js验证传输数据的，直接找到js文件，从中打印一下看看路径。根据路径在会员文件里更改数据 商品列表代码&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;elseif ($\_REQUEST\[&amp;#x27;act&amp;#x27;\] == &amp;#x27;toggle\_on\_sale&amp;#x27;) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;check\_authz\_json(&amp;#x27;goods\_manage&amp;#x27;); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$goods\_id = intval($\_POST\[&amp;#x27;id&amp;#x27;\]); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$on\_sale = intval($\_POST\[&amp;#x27;val&amp;#x27;\]); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;if ($exc-&amp;gt;edit(&amp;quot;is\_on\_sale = &amp;#x27;$on\_sale&amp;#x27;, last\_update=&amp;quot; .gmtime(), $goods\_id)) &amp;#123; clear\_cache\_files(); make\_json\_result($on\_sale); &amp;#125; &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;根据这写代码，复制到会员文件里，进行更改。 更改后&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;elseif ($\_REQUEST\[&amp;#x27;act&amp;#x27;\] == &amp;#x27;toggle\_validated&amp;#x27;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$user\_id = intval($\_REQUEST\[&amp;#x27;id&amp;#x27;\]);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$is\_validated = intval($\_REQUEST\[&amp;#x27;val&amp;#x27;\]);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$exc = new exchange($ecs-&amp;gt;table(&amp;#x27;users&amp;#x27;), $db, &amp;#x27;user\_id&amp;#x27;, &amp;#x27;user\_name&amp;#x27;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;if ($exc-&amp;gt;edit(&amp;quot;is\_validated = &amp;#x27;$is\_validated&amp;#x27;&amp;quot;, $user\_id)) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;clear\_cache\_files(); make\_json\_result(stripslashes($is\_validated));&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;另外要注意htm文件也要更改，仿照商品表里的即可。&lt;/p&gt;
</content>
        <category term="ecshop" />
        <category term="框架" />
        <updated>2014-11-03T00:43:00.000Z</updated>
    </entry>
    <entry>
        <id>https://erik.xyz/2014/10/30/zai-ecshop-yong-hu-zhong-xin-wo-de-ding-dan-lie-biao-zhong-xian-shi-shang-pin-suo-lve-tu/</id>
        <title>在ecshop用户中心我的订单列表中显示商品缩略图</title>
        <link rel="alternate" href="https://erik.xyz/2014/10/30/zai-ecshop-yong-hu-zhong-xin-wo-de-ding-dan-lie-biao-zhong-xian-shi-shang-pin-suo-lve-tu/"/>
        <content type="html">&lt;p&gt;在/includes/lib_transaction.php找到&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$arr\[\] = array(&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;order\_id&amp;#x27;       =&amp;gt; $row\[&amp;#x27;order\_id&amp;#x27;\],&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;order\_sn&amp;#x27;       =&amp;gt; $row\[&amp;#x27;order\_sn&amp;#x27;\], &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;order\_time&amp;#x27;     =&amp;gt; local\_date($GLOBALS\[&amp;#x27;\_CFG&amp;#x27;\]\[&amp;#x27;time\_format&amp;#x27;\], $row\[&amp;#x27;add\_time&amp;#x27;\]), &amp;#x27;order\_status&amp;#x27;   =&amp;gt; $row\[&amp;#x27;order\_status&amp;#x27;\], &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;total\_fee&amp;#x27;      =&amp;gt; price\_format($row\[&amp;#x27;total\_fee&amp;#x27;\], false),&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;handler&amp;#x27;        =&amp;gt; $row\[&amp;#x27;handler&amp;#x27;\]); &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;br&gt;修改为&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$arr\[\] = array(&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;order\_id&amp;#x27;       =&amp;gt; $row\[&amp;#x27;order\_id&amp;#x27;\],&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;order\_sn&amp;#x27;       =&amp;gt; $row\[&amp;#x27;order\_sn&amp;#x27;\], &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;order\_time&amp;#x27;     =&amp;gt; local\_date($GLOBALS\[&amp;#x27;\_CFG&amp;#x27;\]\[&amp;#x27;time\_format&amp;#x27;\], $row\[&amp;#x27;add\_time&amp;#x27;\]), &amp;#x27;order\_status&amp;#x27;   =&amp;gt; $row\[&amp;#x27;order\_status&amp;#x27;\],&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;total\_fee&amp;#x27;      =&amp;gt; price\_format($row\[&amp;#x27;total\_fee&amp;#x27;\], false), &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27;handler&amp;#x27;        =&amp;gt; $row\[&amp;#x27;handler&amp;#x27;\], &amp;#x27;thumb&amp;#x27;          =&amp;gt; $row\[&amp;#x27;thumb&amp;#x27;\]); &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;并在其前面添加&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$row\[&amp;#x27;thumb&amp;#x27;\] =$GLOBALS\[&amp;#x27;db&amp;#x27;\] -&amp;gt;getOne(&amp;quot;select goods\_thumb from&amp;quot;. $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;quot;goods&amp;quot;). &amp;quot;where goods\_id =(select min(goods\_id) from&amp;quot;. $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;quot;order\_goods&amp;quot;). &amp;quot;where order\_id=&amp;quot;.$row\[&amp;#x27;order\_id&amp;#x27;\].&amp;quot;)&amp;quot;); &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;在themes/default/user_transaction.dwt中 找到&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;td bgcolor=&amp;quot;#ffffff&amp;quot;&amp;gt;&amp;#123;$lang.order\_addtime&amp;#125;&amp;lt;/td&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;在其前面添加&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;td bgcolor=&amp;quot;#ffffff&amp;quot;&amp;gt;缩略图&amp;lt;/td&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;再找到&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;td align=&amp;quot;center&amp;quot; bgcolor=&amp;quot;#ffffff&amp;quot;&amp;gt;&amp;#123;$item.order\_time&amp;#125;&amp;lt;/td&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;在其前面添加&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;td  align=center bgcolor=&amp;quot;#ffffff&amp;quot;&amp;gt;&amp;lt;img src=&amp;quot;&amp;#123;$item.thumb&amp;#125;&amp;quot; class=&amp;quot;img_sstb&amp;quot;/&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
        <category term="ecshop" />
        <category term="框架" />
        <updated>2014-10-30T02:16:00.000Z</updated>
    </entry>
    <entry>
        <id>https://erik.xyz/2014/10/30/echsop-gou-wu-che-ding-dan-ti-jiao-xiang-xi-ye-shang-pin-suo-lve-tu/</id>
        <title>echsop购物车、订单提交详细页商品缩略图</title>
        <link rel="alternate" href="https://erik.xyz/2014/10/30/echsop-gou-wu-che-ding-dan-ti-jiao-xiang-xi-ye-shang-pin-suo-lve-tu/"/>
        <content type="html">&lt;p&gt;ecshop不提供商品缩略图展示功能， 找到include/lib_order.php库文件中的cart_goods()函数 在其中添加红色部分&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;foreach ($arr as $key =&amp;gt; $value) &amp;#123;     /\* LONGHTML 增加是否在购物车里显示商品图 */    &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  if (($GLOBALS\[&amp;#x27;\_CFG&amp;#x27;\]\[&amp;#x27;show\_goods\_in\_cart&amp;#x27;\] == &amp;quot;2&amp;quot; || $GLOBALS\[&amp;#x27;\_CFG&amp;#x27;\]\[&amp;#x27;show\_goods\_in\_cart&amp;#x27;\] == &amp;quot;3&amp;quot;) &amp;amp;&amp;amp; $row\[&amp;#x27;extension\_code&amp;#x27;\] != &amp;#x27;package\_buy&amp;#x27;)      &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  $goods\_thumb = $GLOBALS\[&amp;#x27;db&amp;#x27;\]-&amp;gt;getOne(&amp;quot;SELECT \`goods\_thumb\` FROM &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;goods&amp;#x27;) . &amp;quot; WHERE \`goods\_id\`=&amp;quot;.$arr\[$key\]\[&amp;#x27;goods\_id&amp;#x27;\]);          &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  $arr\[$key\]\[&amp;#x27;goods\_thumb&amp;#x27;\] = get\_image\_path($arr\[$key\]\[&amp;#x27;goods\_id&amp;#x27;\], $goods_thumb, true);        &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125; // END &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  $arr\[$key\]\[&amp;#x27;formated\_market\_price&amp;#x27;\] = price\_format($value\[&amp;#x27;market\_price&amp;#x27;\], false);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  $arr\[$key\]\[&amp;#x27;formated\_goods\_price&amp;#x27;\]  = price\_format($value\[&amp;#x27;goods\_price&amp;#x27;\], false);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  $arr\[$key\]\[&amp;#x27;formated\_subtotal&amp;#x27;\]     = price\_format($value\[&amp;#x27;subtotal&amp;#x27;\], false); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  if ($value\[&amp;#x27;extension\_code&amp;#x27;\] == &amp;#x27;package\_buy&amp;#x27;) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  $arr\[$key\]\[&amp;#x27;package\_goods\_list&amp;#x27;\] = get\_package\_goods($value\[&amp;#x27;goods\_id&amp;#x27;\]); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;&lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;br&gt;修改修改themes/defalut/flow.dwt文件 中找到67行左右在{$goods.goods_name}前添加&lt;img width=&#34;100&#34; height=&#34;100&#34; src=&#34;{$goods.goods\_thumb}&#34; border=&#34;0&#34; /&gt;购物车显示缩略图 中找到564行左右在{$goods.goods_name}前添加&lt;img width=&#34;100&#34; height=&#34;100&#34; src=&#34;{$goods.goods_thumb}&#34; border=&#34;0&#34; /&gt;订单提交页面显示缩略图&lt;/p&gt;
</content>
        <category term="ecshop" />
        <category term="框架" />
        <updated>2014-10-30T02:13:00.000Z</updated>
    </entry>
    <entry>
        <id>https://erik.xyz/2014/10/29/excel-biao-ge-dao-chu-ecshop-ding-dan-xiang-qing-ye-dao-chu/</id>
        <title>excel表格导出，ecshop订单详情页导出。</title>
        <link rel="alternate" href="https://erik.xyz/2014/10/29/excel-biao-ge-dao-chu-ecshop-ding-dan-xiang-qing-ye-dao-chu/"/>
        <content type="html">&lt;p&gt;最近被excel 导出困扰了，终于解决了大部分为题，在这里分享一下 方法1 首先下载PHPexcel插件包 &lt;a href=&#34;http://download.csdn.net/detail/w15875510692/7747765&#34;&gt;http://download.csdn.net/detail/w15875510692/7747765&lt;/a&gt; 以下是ecshop订单详细页的导出代码 目前没找到直接能到处网站空间的图片（超链接地址的图片），只能到处本地网站的图片。。 htm页面代码 &lt;span id=&#34;more&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;script language=&amp;quot;JavaScript&amp;quot;&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;function check() &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  var snArray = new Array(); var eles = document.forms\[&amp;#x27;listForm&amp;#x27;\].elements; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  for (var i=0; i&amp;lt;eles.length; i++) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    if (eles\[i\].tagName == &amp;#x27;INPUT&amp;#x27; &amp;amp;&amp;amp; eles\[i\].type == &amp;#x27;hidden&amp;#x27; &amp;amp;&amp;amp; eles\[i\].checked &amp;amp;&amp;amp; eles\[i\].value != &amp;#x27;on&amp;#x27;) &amp;#123; snArray.push(eles\[i\].value);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  if (snArray.length == 0) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  	return false; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125; else &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  	eles\[&amp;#x27;order\_id&amp;#x27;\].value = snArray.toString(); return true; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;form action=&amp;quot;order.php?act=operate&amp;quot; method=&amp;quot;post&amp;quot; name=&amp;quot;listForm&amp;quot;  onsubmit=&amp;quot;return check()&amp;quot;&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;div class=&amp;quot;div\_excel&amp;quot;&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;checkboxes&amp;quot;checked=&amp;quot;checked&amp;quot;  value=&amp;quot;&amp;#123;$order.order\_sn&amp;#125;&amp;quot; /&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;input name=&amp;quot;export&amp;quot; type=&amp;quot;submit&amp;quot; id=&amp;quot;btnSubmit5&amp;quot; value=&amp;quot;导出&amp;quot; class=&amp;quot;button&amp;quot;   onclick=&amp;quot;this.form.target = &amp;#x27;\_blank&amp;#x27;&amp;quot; onclick=&amp;quot;window.open(&amp;#x27;order.php?act=operate&amp;#x27;)&amp;quot; onsubmit=&amp;quot;return check()&amp;quot;/&amp;gt; &amp;lt;input name=&amp;quot;order\_id&amp;quot; type=&amp;quot;hidden&amp;quot; value=&amp;quot;&amp;#123;$order.order\_sn&amp;#125;&amp;quot; /&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;/form&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;  php文件代码 /*******************excel导出*************/&lt;br&gt;  &lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;elseif (isset($\_POST\[&amp;#x27;export&amp;#x27;\])) &amp;#123; /* 赋值公用信息 */ require\_once ROOT\_PATH.&amp;#x27;salesmans/Classes/PHPExcel.php&amp;#x27;; require\_once ROOT\_PATH.&amp;#x27;salesmans/Classes/PHPExcel/IOFactory.php&amp;#x27;; // Create new PHPExcel object $objPHPExcel = new PHPExcel(); // Set properties $objPHPExcel-&amp;gt;getProperties()-&amp;gt;setCreator(&amp;quot;DizzyLion&amp;quot;) -&amp;gt;setLastModifiedBy(&amp;quot;DizzyLion&amp;quot;) -&amp;gt;setSubject(&amp;quot;Orders output Document&amp;quot;); $filepaths= ROOT\_PATH.&amp;quot;data/&amp;quot;.date(&amp;quot;Y-m&amp;quot;).&amp;#x27;.xls&amp;#x27;; $filename = date(&amp;quot;Y-m&amp;quot;).&amp;#x27;.xls&amp;#x27;; $rowix = 1; error\_reporting(E\_ALL); date\_default\_timezone\_set(&amp;#x27;Europe/London&amp;#x27;); $objPHPExcel-&amp;gt;getProperties()-&amp;gt;setCreator(&amp;quot;wdz&amp;quot;)-&amp;gt;setLastModifiedBy(&amp;quot;wdz&amp;quot;)-&amp;gt;setTitle(&amp;quot; 我的订单&amp;quot;)-&amp;gt;setSubject(&amp;quot;我的订单&amp;quot;)-&amp;gt;setDescription(date(&amp;#x27;Y/m/d H:i:s&amp;#x27;) . &amp;quot;导出的订单&amp;quot;)-&amp;gt;setKeywords(&amp;quot;我的订单&amp;quot;)-&amp;gt;setCategory(&amp;quot;Test result file&amp;quot;); /*设置标题属性*/ //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;A1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;A1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;A&amp;#x27;)-&amp;gt;setWidth(20); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;A1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;A1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); /////////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;B1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;B1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;B&amp;#x27;)-&amp;gt;setWidth(20); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;B1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;B1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); //////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;C1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;C1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;C&amp;#x27;)-&amp;gt;setWidth(30); //表格高度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getRowDimension(&amp;#x27;2&amp;#x27;)-&amp;gt;setRowHeight(75); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getRowDimension(&amp;#x27;3&amp;#x27;)-&amp;gt;setRowHeight(75); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getRowDimension(&amp;#x27;4&amp;#x27;)-&amp;gt;setRowHeight(75); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getRowDimension(&amp;#x27;5&amp;#x27;)-&amp;gt;setRowHeight(75); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getRowDimension(&amp;#x27;6&amp;#x27;)-&amp;gt;setRowHeight(75); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getRowDimension(&amp;#x27;7&amp;#x27;)-&amp;gt;setRowHeight(75); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getRowDimension(&amp;#x27;8&amp;#x27;)-&amp;gt;setRowHeight(75); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;C1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;C1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); /////////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;D1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;D1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;D&amp;#x27;)-&amp;gt;setWidth(30); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;D1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;D1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); //////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;E1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;E1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;E&amp;#x27;)-&amp;gt;setWidth(30); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;E1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;E1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); //////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;F1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;F1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;F&amp;#x27;)-&amp;gt;setWidth(80); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;F1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;F1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); //////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;G1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;G1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;G&amp;#x27;)-&amp;gt;setWidth(10); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;G1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;G1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); //////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;H1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;H1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;H&amp;#x27;)-&amp;gt;setWidth(10); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;H1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;H1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); //////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;I1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;I1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;I&amp;#x27;)-&amp;gt;setWidth(10); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;I1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;I1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); //////////////////// //字体大小 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;J1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setSize(16); //加粗 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;J1&amp;#x27;)-&amp;gt;getFont()-&amp;gt;setBold(true); //表格宽度 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getColumnDimension(&amp;#x27;J&amp;#x27;)-&amp;gt;setWidth(15); //垂直居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;J1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setVertical(PHPExcel\_Style\_Alignment::VERTICAL\_CENTER); //水平居中 $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;getStyle(&amp;#x27;J1&amp;#x27;)-&amp;gt;getAlignment()-&amp;gt;setHorizontal(PHPExcel\_Style\_Alignment::HORIZONTAL\_CENTER); //////////////////// echo date(&amp;#x27;H:i:s&amp;#x27;) . &amp;quot; Add some data\\n&amp;quot;; $objPHPExcel-&amp;gt;setActiveSheetIndex(0); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;A1&amp;#x27;, &amp;#x27;订货日期&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;B1&amp;#x27;, &amp;#x27;订单号&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;C1&amp;#x27;, &amp;#x27;商品图&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;D1&amp;#x27;, &amp;#x27;款号&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;E1&amp;#x27;, &amp;#x27;商品名称&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;F1&amp;#x27;, &amp;#x27;属性&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;G1&amp;#x27;, &amp;#x27;数量&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;H1&amp;#x27;, &amp;#x27;价格&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;I1&amp;#x27;, &amp;#x27;合计&amp;#x27;); $objPHPExcel-&amp;gt;getActiveSheet()-&amp;gt;setCellValue(&amp;#x27;J1&amp;#x27;, &amp;#x27;应付金额&amp;#x27;); $rowix++; $i=0; $list = array(); //         $order\_id = intval($\_REQUEST\[&amp;#x27;order\_id&amp;#x27;\]); $order\_sn\_list = explode(&amp;#x27;,&amp;#x27;, $\_POST\[&amp;#x27;order\_id&amp;#x27;\]); foreach ($order\_sn\_list as $order\_sn) &amp;#123; /* 取得订单信息 */ $sql = &amp;quot;select * from &amp;quot;.$GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;order\_info&amp;#x27;).&amp;quot; o  join &amp;quot;.$GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;users&amp;#x27;).&amp;quot; u on o.user\_id =u.user\_id where order\_sn=&amp;#x27;$order\_sn&amp;#x27;&amp;quot;; $row = $db-&amp;gt;getRow($sql); $goods= $db-&amp;gt;getAll(&amp;quot;select goods\_name,goods\_id,goods\_number,goods\_price,goods\_price,goods\_attr\_id,goods\_attr \*goods\_number as je,goods\_sn from &amp;quot;.$GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;order\_goods&amp;#x27;).&amp;quot; where order\_id = &amp;#x27;&amp;quot;.$row\[&amp;#x27;order\_id&amp;#x27;\].&amp;quot;&amp;#x27;&amp;quot;); if($goods)&amp;#123; foreach($goods as $k=&amp;gt;$v)&amp;#123; $temp    = array(); $v\[&amp;#x27;img&amp;#x27;\] = $db-&amp;gt;getOne(&amp;quot;select goods\_thumb from &amp;quot;.$GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;goods&amp;#x27;).&amp;quot; where goods\_id=&amp;#x27;&amp;quot;.$v\[&amp;#x27;goods\_id&amp;#x27;\].&amp;quot;&amp;#x27;&amp;quot;); $temp\[&amp;#x27;goods&amp;#x27;\] = $v; $temp\[&amp;#x27;order\_info&amp;#x27;\] = $row; $list\[$row\[&amp;#x27;order\_id&amp;#x27;\]\]\[\] = $temp; &amp;#125; &amp;#125; &amp;#125; foreach ($list as $key =&amp;gt; $t) &amp;#123; foreach($t as $k1=&amp;gt;$value)&amp;#123; $objPHPExcel-&amp;gt;setActiveSheetIndex(0) -&amp;gt;setCellValue(&amp;#x27;B&amp;#x27;.$rowix ,  $value\[&amp;#x27;order\_info&amp;#x27;\]\[&amp;#x27;order\_sn&amp;#x27;\]) -&amp;gt;setCellValue(&amp;#x27;D&amp;#x27;.$rowix ,  $value\[&amp;#x27;goods&amp;#x27;\]\[&amp;#x27;img&amp;#x27;\]) -&amp;gt;setCellValue(&amp;#x27;D&amp;#x27;.$rowix ,  $value\[&amp;#x27;goods&amp;#x27;\]\[&amp;#x27;goods\_sn&amp;#x27;\]) -&amp;gt;setCellValue(&amp;#x27;E&amp;#x27;.$rowix ,  $value\[&amp;#x27;goods&amp;#x27;\]\[&amp;#x27;goods\_name&amp;#x27;\]) -&amp;gt;setCellValue(&amp;#x27;F&amp;#x27;.$rowix ,  $value\[&amp;#x27;goods&amp;#x27;\]\[&amp;#x27;goods\_attr\_id&amp;#x27;\]) -&amp;gt;setCellValue(&amp;#x27;G&amp;#x27;.$rowix ,  $value\[&amp;#x27;goods&amp;#x27;\]\[&amp;#x27;goods\_number&amp;#x27;\]) -&amp;gt;setCellValue(&amp;#x27;H&amp;#x27;.$rowix ,  $value\[&amp;#x27;goods&amp;#x27;\]\[&amp;#x27;goods\_price&amp;#x27;\]) -&amp;gt;setCellValue(&amp;#x27;A&amp;#x27;.$rowix ,  local\_date(&amp;quot;Y-m-d&amp;quot;,$value\[&amp;#x27;order\_info&amp;#x27;\]\[&amp;#x27;add\_time&amp;#x27;\])) -&amp;gt;setCellValue(&amp;#x27;I&amp;#x27;.$rowix ,  $value\[&amp;#x27;order\_info&amp;#x27;\]\[&amp;#x27;goods\_amount&amp;#x27;\]) -&amp;gt;setCellValue(&amp;#x27;J&amp;#x27;.$rowix ,  $value\[&amp;#x27;order\_info&amp;#x27;\]\[&amp;#x27;order\_amount&amp;#x27;\]); $objDrawing = new PHPExcel\_Worksheet\_Drawing();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$objDrawing-&amp;gt;setName(&amp;#x27;ZealImg&amp;#x27;); $objDrawing-&amp;gt;setDescription(&amp;#x27;Image&amp;#x27;); &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;$objDrawing-&amp;gt;setPath(&amp;#x27;../images/img\_excel/img10.jpg&amp;#x27;); $objDrawing-&amp;gt;setHeight(&amp;#x27;92px&amp;#x27;);//照片高度 $objDrawing-&amp;gt;setWidth(&amp;#x27;90px&amp;#x27;); //照片宽度 $objDrawing-&amp;gt;setCoordinates(&amp;#x27;C&amp;#x27;.$rowix); $objDrawing-&amp;gt;setWorksheet($objPHPExcel-&amp;gt;getActiveSheet()); $rowix++; &amp;#125; &amp;#125; $objPHPExcel-&amp;gt;setActiveSheetIndex(0); $objWriter = PHPExcel\_IOFactory::createWriter($objPHPExcel, &amp;#x27;Excel5&amp;#x27;); $objWriter-&amp;gt;setTempDir(ROOT\_PATH.&amp;quot;data&amp;quot;); $objWriter-&amp;gt;save($filepaths); header(&amp;quot;Location:../data/&amp;quot;.$filename); exit; &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;*——————————-excel表格————end————————————————- */ 方法2 这种就比较简单，不需要导出图片代码也很少&lt;br&gt;&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;?php define(&amp;#x27;IN\_ECS&amp;#x27;, true); include (&amp;#x27;includes/init.php&amp;#x27;); $filename=&amp;#x27;订单&amp;#x27;; header(&amp;quot;Content-type: application/vnd.ms-excel; charset=gbk&amp;quot;); header(&amp;quot;Content-Disposition: attachment; filename=$filename.xls&amp;quot;); $order\_id = intval($\_REQUEST\[&amp;#x27;order\_id&amp;#x27;\]); // $sql = &amp;quot;select a.user\_id from&amp;quot; .$GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;users&amp;#x27;).&amp;quot; a join (select p.order\_id, o.order\_sn, o.user\_id from &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;order\_goods&amp;#x27;) . &amp;quot; p join&amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;order\_info&amp;#x27;) .&amp;quot; o on p.order\_id=o.order\_id where user\_id in&amp;quot;. //         &amp;quot;(select user\_id from&amp;quot; .$GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;users&amp;#x27;). &amp;quot; a join &amp;quot;.$GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;ex\_user&amp;#x27;).&amp;quot; b on a.s\_user=b.username &amp;quot;. //         &amp;quot;where 1=1 )) b on a.user\_id=b.user\_id&amp;quot;; //$sql=&amp;quot;select * from &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;order\_info&amp;#x27;) .&amp;quot; g join (select  o.*, g.goods\_number   AS storage,  IFNULL(b.brand\_name, &amp;#x27;&amp;#x27;) AS brand\_name &amp;quot; .&amp;quot; from &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;order\_goods&amp;#x27;) . &amp;quot; AS o &amp;quot; . &amp;quot;LEFT JOIN &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;goods&amp;#x27;) . &amp;quot; AS g ON o.goods\_id = g.goods\_id &amp;quot; . &amp;quot;LEFT JOIN &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;brand&amp;#x27;) . &amp;quot; AS b ON g.brand\_id = b.brand\_id &amp;quot; . &amp;quot;WHERE o.order\_id = &amp;#x27;$order\_id&amp;#x27; )  p on g.order\_id=p.order\_id&amp;quot;; $sql=&amp;quot;select *, (g.goods\_price*g.goods\_number) as num\_price, g.goods\_attr from &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;goods&amp;#x27;) .&amp;quot; gt, &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;order\_info&amp;#x27;) .&amp;quot; i, &amp;quot; . $GLOBALS\[&amp;#x27;ecs&amp;#x27;\]-&amp;gt;table(&amp;#x27;order\_goods&amp;#x27;) .&amp;quot; g where g.order\_id=i.order\_id and gt.goods\_id = g.goods\_id and i.order\_id = &amp;#x27;$order\_id&amp;#x27;&amp;quot;; $res=$db-&amp;gt;getAll($sql); //print\_r($res);die; $data.=&amp;#x27;订单号&amp;#x27;.&amp;quot;\\t&amp;quot;; $data.=&amp;#x27;商品图&amp;#x27;.&amp;quot;\\t&amp;quot;; $data.=&amp;#x27;商品名称&amp;#x27;.&amp;quot;\\t&amp;quot;; $data.=&amp;#x27;商品编号&amp;#x27;.&amp;quot;\\t&amp;quot;; $data.=&amp;#x27;商品单价&amp;#x27;.&amp;quot;\\t&amp;quot;; $data.=&amp;#x27;商品数量&amp;#x27;.&amp;quot;\\t&amp;quot;; $data.=&amp;#x27;合计价格&amp;#x27;.&amp;quot;\\t&amp;quot;; $data.=&amp;#x27;应付金额&amp;#x27;.&amp;quot;\\t&amp;quot;; $data.=&amp;#x27;属性备注&amp;#x27;.&amp;quot;\\t\\n&amp;quot;; while (!empty($res)) &amp;#123; foreach ($res as $key=&amp;gt;$var) &amp;#123; $a=$var\[&amp;#x27;goods\_id&amp;#x27;\]; foreach ($res as $keys=&amp;gt;$vars) &amp;#123; if($a==$vars\[&amp;#x27;goods\_id&amp;#x27;\]) &amp;#123; $res1\[0\]\[&amp;#x27;order\_sn&amp;#x27;\]=$vars\[&amp;#x27;order\_sn&amp;#x27;\]; $res1\[$key\]\[&amp;#x27;goods\_thumb&amp;#x27;\]=$vars\[&amp;#x27;goods\_thumb&amp;#x27;\]; $res1\[$key\]\[&amp;#x27;goods\_name&amp;#x27;\]=$vars\[&amp;#x27;goods\_name&amp;#x27;\]; $res1\[$key\]\[&amp;#x27;goods\_sn&amp;#x27;\]=$vars\[&amp;#x27;goods\_sn&amp;#x27;\]; $res1\[$key\]\[&amp;#x27;goods\_price&amp;#x27;\]=$vars\[&amp;#x27;goods\_price&amp;#x27;\]; $res1\[$key\]\[&amp;#x27;goods\_number&amp;#x27;\]=$vars\[&amp;#x27;goods\_number&amp;#x27;\]; $res1\[0\]\[&amp;#x27;goods\_amount&amp;#x27;\]=$vars\[&amp;#x27;goods\_amount&amp;#x27;\]; $res1\[0\]\[&amp;#x27;order\_amount&amp;#x27;\]=$vars\[&amp;#x27;order\_amount&amp;#x27;\]; $res1\[$key\]\[&amp;#x27;goods\_attr\_id&amp;#x27;\]=$vars\[&amp;#x27;goods\_attr\_id&amp;#x27;\]; unset ($res\[$keys\]); &amp;#125; &amp;#125; &amp;#125; &amp;#125; foreach ($res1 as $key =&amp;gt;$var) &amp;#123; $data.=$var\[&amp;#x27;order\_sn&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=$var\[&amp;#x27;goods\_thumb&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=$var\[&amp;#x27;goods\_name&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=$var\[&amp;#x27;goods\_sn&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=$var\[&amp;#x27;goods\_price&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=$var\[&amp;#x27;goods\_number&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=$var\[&amp;#x27;goods\_amount&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=$var\[&amp;#x27;order\_amount&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=$var\[&amp;#x27;goods\_attr\_id&amp;#x27;\].&amp;quot;\\t&amp;quot;; $data.=&amp;quot;\\t\\n&amp;quot;; &amp;#125; if (EC\_CHARSET != &amp;#x27;gbk&amp;#x27;) &amp;#123; echo $data.ecs\_iconv(EC\_CHARSET, &amp;#x27;gbk&amp;#x27;, $data) . &amp;quot;\\t&amp;quot;; &amp;#125; else &amp;#123; echo $data.$data. &amp;quot;\\t&amp;quot;; &amp;#125; ?&amp;gt; if (!empty(    $order\_sn\_list))&amp;#123; $goods\_thumb = $\_POST\[&amp;#x27;goods\_thumb&amp;#x27;\]; $img = grabImage($goods\_thumb,&amp;quot;&amp;quot;); echo $img; echo &amp;#x27;&amp;lt;pre&amp;gt;&amp;lt;img src=&amp;quot;&amp;#x27;.$img.&amp;#x27;&amp;quot;&amp;gt;&amp;lt;/pre&amp;gt;&amp;#x27;; &amp;#125; //下载图片函数 function grabImage($goods\_thumb,$filename=&amp;quot;&amp;quot;)&amp;#123; if ($goods\_thumb == &amp;quot;&amp;quot;) return false; if($filename == &amp;quot;&amp;quot;) &amp;#123; $ext=strrchr($goods\_thumb,&amp;quot;.&amp;quot;); //获取扩展名 $ext\_arr = array(&amp;quot;.gif&amp;quot;,&amp;quot;.png&amp;quot;,&amp;quot;.jpg&amp;quot;,&amp;quot;.bmp&amp;quot;); //判断扩展名是否为图片 if (!in\_array($ext, $ext\_arr)) return false; //将图片文件名保存为时间戳 $filename = time().$ext; &amp;#125; ob\_start(); //打开浏览器的缓冲区 readfile($goods\_thumb); //将图片读入缓冲区 $img = ob\_get\_contents(); //获取缓冲区的内容复制给变量$img ob\_end_clean(); //关闭并清空缓冲 $fp = @fopen($filename,&amp;quot;a&amp;quot;); //将文件绑定到流 fwrite($fp,$img); //写入文件 fclose($fp); //关闭文件之争 return $filename; &amp;#125; ?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
        <category term="ecshop" />
        <category term="框架" />
        <updated>2014-10-29T03:30:00.000Z</updated>
    </entry>
</feed>